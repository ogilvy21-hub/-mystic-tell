// ===== DOM í—¬í¼ + ë¡œì»¬ìŠ¤í† ë¦¬ì§€ í‚¤ =====
const $ = (sel) => document.querySelector(sel);
const $$ = (sel) => Array.from(document.querySelectorAll(sel) || []);
const LS_KEY = 'mystictell_recent_results';
// ===== lunar-javascript ê¸€ë¡œë²Œ ë³´ì • =====
(function fixLunarGlobals(){
    try {
        if (typeof window.Lunar !== "undefined") {
            if (typeof window.Solar === "undefined") window.Solar = window.Lunar.Solar;
            if (typeof window.LunarYear === "undefined") window.LunarYear = window.Lunar.LunarYear;
            if (typeof window.LunarMonth === "undefined") window.LunarMonth = window.Lunar.LunarMonth;
        }
    } catch(e) {
        console.warn("lunar globals patch skipped:", e);
    }
})();
// ===== ì…ë ¥ ì •ê·œí™” =====
function normalizeDateInput(s=''){
    return s.trim().replace(/[.\s]+/g, '-').replace(/-+/g,'-').replace(/-$/,'');
}

function normalizeTimeInput(s=''){
    s = s.trim();
    const am = /ì˜¤ì „/.test(s);
    const pm = /ì˜¤í›„/.test(s);
    s = s.replace(/[^\d:]/g,'');
    if(!s) return '';
    let [hh, mm='0'] = s.split(':');
    let h = parseInt(hh||'0',10);
    if (pm && h < 12) h += 12;
    if (am && h === 12) h = 0;
    return `${String(h).padStart(2,'0')}:${String(mm).padStart(2,'0')}`;
}
// ===== ì‚¬ì£¼ ê³„ì‚° ê´€ë ¨ ìƒìˆ˜ =====
const GAN_WUXING = {
    'ç”²':'æœ¨','ä¹™':'æœ¨','ä¸™':'ç«','ä¸':'ç«','æˆŠ':'åœŸ','å·±':'åœŸ',
    'åºš':'é‡‘','è¾›':'é‡‘','å£¬':'æ°´','ç™¸':'æ°´'
};
const ZHI_HIDDENS = {
    'å­': { 'ç™¸':100 },
    'ä¸‘': { 'å·±':70, 'ç™¸':10, 'è¾›':20 },
    'å¯…': { 'ç”²':60, 'ä¸™':20, 'æˆŠ':20 },
    'å¯': { 'ä¹™':100 },
    'è¾°': { 'æˆŠ':70, 'ä¹™':10, 'ç™¸':20 },
    'å·³': { 'ä¸™':60, 'åºš':20, 'æˆŠ':20 },
    'åˆ': { 'ä¸':90, 'å·±':10 },
    'æœª': { 'å·±':70, 'ä¸':10, 'ä¹™':20 },
    'ç”³': { 'åºš':70, 'æˆŠ':20, 'å£¬':10 },
    'é…‰': { 'è¾›':100 },
    'æˆŒ': { 'æˆŠ':70, 'è¾›':20, 'ä¸':10 },
    'äº¥': { 'å£¬':90, 'ç”²':10 }
};
const WUXING_INFO = {
    'æœ¨': { ko:'ëª©', trait:'ì„±ì¥Â·ê¸°íšÂ·ì°½ì˜', boost:'í‘¸ë¥¸ìƒ‰, ìˆ²ê¸¸ ê±·ê¸°, ì‹ ì„  ì±„ì†Œ, ìƒˆ í”„ë¡œì íŠ¸ ì‹œì‘', color:'#4caf50' },
    'ç«': { ko:'í™”', trait:'ì—´ì •Â·í‘œí˜„Â·ë¦¬ë”ì‹­', boost:'í–‡ë¹›, ê°€ë²¼ìš´ ìœ ì‚°ì†Œ, ë°œí‘œ/ê³µê°œ í™œë™, ë”°ëœ»í•œ ìƒ‰', color:'#f44336' },
    'åœŸ': { ko:'í† ', trait:'ì•ˆì •Â·ì‹ ë¢°Â·ì‹¤í–‰', boost:'ì •ë¦¬/ì •ëˆ, ë£¨í‹´ ë§Œë“¤ê¸°, ë…¸ë€/ê°ˆìƒ‰, ë•… ë°Ÿê¸°', color:'#ff9800' },
    'é‡‘': { ko:'ê¸ˆ', trait:'ê·œì¹™Â·ë¶„ì„Â·ì¬ì •', boost:'í™”ì´íŠ¸/ë©”íƒˆ, êµ¬ì¡°í™”, ì¬ë¬´ì •ë¦¬, ê°€ë²¼ìš´ ê·¼ë ¥ìš´ë™', color:'#9e9e9e' },
    'æ°´': { ko:'ìˆ˜', trait:'ìœ ì—°Â·í•™ìŠµÂ·ì†Œí†µ', boost:'ë¸”ë£¨/ë¸”ë™, ë…ì„œ/ì—°êµ¬, í˜¸í¡/ìˆ˜ë¶„, ì‚°ì±…', color:'#2196f3' }
};
const SHISHEN_DESC = {
    'ì •ê´€':'ê·œë²”Â·ì±…ì„Â·ê´€ë¦¬/í–‰ì •. ê³µê³µÂ·ìš´ì˜Â·ê´€ë¦¬ ì§ë¬´ì— ì í•©.',
    'í¸ê´€':'ë„ì „Â·ìœ„ê¸°ëŒ€ì‘Â·í˜„ì¥ ë¦¬ë”ì‹­. ê²½ìŸ/ë³´ì•ˆ/ì²´ë ¥ ë¶„ì•¼.',
    'ì •ì¬':'í˜„ì‹¤ ìˆ˜ìµÂ·ìì›ê´€ë¦¬. ì˜ì—…/ì¬ë¬´/ìš´ì˜ì— ê°•ì .',
    'í¸ì¬':'í™•ì¥Â·ë„¤íŠ¸ì›Œí‚¹Â·ì‚¬ì—…ê°. ìœ í†µ/ë§ˆì¼€íŒ…/ì°½ì—… ì ì„±.',
    'ì‹ì‹ ':'ìƒì‚°Â·ê±´ê°•Â·ì½˜í…ì¸  ì œì‘. ë£¨í‹´Â·ì§€ì† ì°½ì¶œ ê°•ì .',
    'ìƒê´€':'í‘œí˜„Â·ê¸°íšÂ·ê°œë°œ/í˜ì‹ . í¬ë¦¬ì—ì´í‹°ë¸ŒÂ·R&D.',
    'ì •ì¸':'í•™ìŠµÂ·ì—°êµ¬Â·ìê²©. êµìœ¡/ë¶„ì„/ì „ë¬¸ì§€ì‹ ê°•í™”.',
    'í¸ì¸':'ì „ëµÂ·ì»¨ì„¤íŒ…Â·ìƒˆ íŒì§œê¸°. ê¸°íš/ë¯¸ë””ì–´/ë¸Œëœë”©.',
    'ë¹„ê²¬':'ìê¸°ì£¼ë„Â·ë™ë£Œ í˜‘ì—…. ì°½ì—…/ê°œë°œ/ê°œì¸ë¸Œëœë”©.',
    'ê²ì¬':'íŒ€ì›Œí¬Â·ì„¸ì¼ì¦ˆÂ·ê³µë™ í”„ë¡œì íŠ¸ ì¶”ì§„ë ¥.'
};
const SHISHEN_KR = {
    'æ­£å®˜':'ì •ê´€','ä¸ƒæ®º':'í¸ê´€','åå®˜':'í¸ê´€','æ¯”è‚©':'ë¹„ê²¬','åŠ«è²¡':'ê²ì¬',
    'é£Ÿç¥':'ì‹ì‹ ','å‚·å®˜':'ìƒê´€','åè²¡':'í¸ì¬','æ­£è²¡':'ì •ì¬','åå°':'í¸ì¸','æ­£å°':'ì •ì¸'
};
// ===== ìš´ì„¸ ì¹´í…Œê³ ë¦¬ ë°ì´í„° =====
const FORTUNE_CATEGORIES = {
    total: {
        name: 'ì´ìš´',
        icon: 'ğŸŒŸ',
        messages: {
            90: ['ì˜¤ëŠ˜ì€ ëª¨ë“  ì¼ì´ ìˆ ìˆ  í’€ë¦¬ëŠ” ìµœê³ ì˜ ë‚ ì…ë‹ˆë‹¤!', 'í–‰ìš´ì˜ ì—¬ì‹ ì´ í•¨ê»˜í•˜ëŠ” íŠ¹ë³„í•œ í•˜ë£¨ê°€ ë  ê²ƒì…ë‹ˆë‹¤!'],
            80: ['ê¸ì •ì ì¸ ì—ë„ˆì§€ê°€ ë„˜ì¹˜ëŠ” ì¢‹ì€ ë‚ ì…ë‹ˆë‹¤!', 'ì‘ì€ ê¸°ì ë“¤ì´ ì¼ì–´ë‚  ìˆ˜ ìˆëŠ” ë‚ ì…ë‹ˆë‹¤!'],
            70: ['ì•ˆì •ì ì´ê³  í‰í™”ë¡œìš´ í•˜ë£¨ê°€ ë  ê²ƒì…ë‹ˆë‹¤!', 'ì°¨ê·¼ì°¨ê·¼ ì§„í–‰í•˜ë©´ ì¢‹ì€ ì„±ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤!'],
            60: ['ì¡°ê¸ˆë§Œ ë” ë…¸ë ¥í•˜ë©´ ì›í•˜ëŠ” ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤!', 'ì¸ë‚´ì‹¬ì„ ê°–ê³  ê¾¸ì¤€íˆ ë‚˜ì•„ê°€ì„¸ìš”!'],
            50: ['í˜„ìƒ ìœ ì§€í•˜ë©° ì•ˆì „í•˜ê²Œ ì§€ë‚´ëŠ” ê²ƒì´ ì¢‹ê² ìŠµë‹ˆë‹¤!', 'ê¸‰í•˜ê²Œ ì„œë‘ë¥´ì§€ ë§ê³  ì‹ ì¤‘í•˜ê²Œ íŒë‹¨í•˜ì„¸ìš”!'],
            40: ['ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ í–‰ë™í•˜ê³  ì‹ ì¤‘í•œ ê²°ì •ì„ ë‚´ë¦¬ì„¸ìš”!', 'ì‘ì€ ì¼ë¶€í„° ì°¨ê·¼ì°¨ê·¼ í•´ê²°í•´ë‚˜ê°€ì„¸ìš”!'],
            30: ['ì˜¤ëŠ˜ì€ ë¬´ë¦¬í•˜ì§€ ë§ê³  ì—¬ìœ ë¡­ê²Œ ì§€ë‚´ì„¸ìš”!', 'ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ì¤„ì´ê³  ë§ˆìŒì˜ í‰í™”ë¥¼ ì°¾ìœ¼ì„¸ìš”!']
        }
    },
    love: {
        name: 'ì—°ì• ìš´',
        icon: 'ğŸ’•',
        messages: {
            90: ['ìš´ëª…ì ì¸ ë§Œë‚¨ì´ ê¸°ë‹¤ë¦¬ê³  ìˆì„ì§€ë„ ëª°ë¼ìš”!', 'ì‚¬ë‘í•˜ëŠ” ì‚¬ëŒê³¼ì˜ ê´€ê³„ê°€ í•œì¸µ ë” ê¹Šì–´ì§ˆ ê²ƒì…ë‹ˆë‹¤!'],
            80: ['ë‹¬ì½¤í•œ ì‚¬ë‘ì˜ ê¸°ìš´ì´ ê°€ë“í•œ í•˜ë£¨ì…ë‹ˆë‹¤!', 'ì¢‹ì•„í•˜ëŠ” ì‚¬ëŒê³¼ì˜ ê±°ë¦¬ê°€ ê°€ê¹Œì›Œì§ˆ ê²ƒì…ë‹ˆë‹¤!'],
            70: ['ë”°ëœ»í•œ ë§ˆìŒì„ ë‚˜ëˆ„ëŠ” í‰ì˜¨í•œ ì—°ì• ìš´ì…ë‹ˆë‹¤!', 'ì„œë¡œë¥¼ ì´í•´í•˜ê³  ë°°ë ¤í•˜ëŠ” ì‹œê°„ì„ ê°€ì ¸ë³´ì„¸ìš”!'],
            60: ['ì¡°ê¸ˆ ë” ì ê·¹ì ìœ¼ë¡œ ë§ˆìŒì„ í‘œí˜„í•´ë³´ì„¸ìš”!', 'ìƒëŒ€ë°©ì˜ ì…ì¥ì—ì„œ ìƒê°í•´ë³´ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤!'],
            50: ['ì„£ë¶€ë¥¸ ê³ ë°±ë³´ë‹¤ëŠ” ì²œì²œíˆ ê´€ê³„ë¥¼ ë°œì „ì‹œí‚¤ì„¸ìš”!', 'ê°ì •ì ì¸ íŒë‹¨ë³´ë‹¤ëŠ” ì´ì„±ì ì¸ ì ‘ê·¼ì´ í•„ìš”í•©ë‹ˆë‹¤!'],
            40: ['ì—°ì• ë³´ë‹¤ëŠ” ìê¸°ê³„ë°œì— ì§‘ì¤‘í•˜ëŠ” ê²ƒì´ ì¢‹ê² ìŠµë‹ˆë‹¤!', 'ê°ˆë“±ì´ ìƒê¸¸ ìˆ˜ ìˆìœ¼ë‹ˆ ë§ì¡°ì‹¬í•˜ì„¸ìš”!'],
            30: ['ì˜¤ëŠ˜ì€ ì—°ì•  ë¬¸ì œë¡œ ìŠ¤íŠ¸ë ˆìŠ¤ë°›ì§€ ë§ˆì„¸ìš”!', 'ì¹œêµ¬ë“¤ê³¼ì˜ ì‹œê°„ì„ ë” ì†Œì¤‘íˆ ì—¬ê¸°ì„¸ìš”!']
        }
    },
    money: {
        name: 'ì¬ë¬¼ìš´',
        icon: 'ğŸ’°',
        messages: {
            90: ['ì˜ˆìƒì¹˜ ëª»í•œ ìˆ˜ì…ì´ë‚˜ ë³´ë„ˆìŠ¤ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤!', 'íˆ¬ìë‚˜ ì‚¬ì—…ì—ì„œ í° ì„±ê³¼ë¥¼ ê±°ë‘˜ ê²ƒì…ë‹ˆë‹¤!'],
            80: ['ëˆ ê´€ë¦¬ë¥¼ ì˜í•˜ë©´ ëª©ëˆì„ ë§Œë“¤ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤!', 'ë¶€ì—…ì´ë‚˜ ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ì—ì„œ ìˆ˜ìµì´ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤!'],
            70: ['ì•ˆì •ì ì¸ ìˆ˜ì…ê³¼ ì§€ì¶œ ê´€ë¦¬ê°€ ì´ë£¨ì–´ì§ˆ ê²ƒì…ë‹ˆë‹¤!', 'ê³„íšì ì¸ ì €ì¶•ìœ¼ë¡œ ë¯¸ë˜ë¥¼ ì¤€ë¹„í•˜ì„¸ìš”!'],
            60: ['ê°€ê³„ë¶€ë¥¼ ì‘ì„±í•˜ë©° ëˆì˜ íë¦„ì„ íŒŒì•…í•´ë³´ì„¸ìš”!', 'ë¶ˆí•„ìš”í•œ ì§€ì¶œì„ ì¤„ì´ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤!'],
            50: ['í° ì§€ì¶œì€ í”¼í•˜ê³  í˜„ìƒ ìœ ì§€ì— ì§‘ì¤‘í•˜ì„¸ìš”!', 'ì¶©ë™êµ¬ë§¤ë¥¼ ìì œí•˜ê³  ì‹ ì¤‘í•˜ê²Œ ì†Œë¹„í•˜ì„¸ìš”!'],
            40: ['ëˆ ë¬¸ì œë¡œ ìŠ¤íŠ¸ë ˆìŠ¤ë°›ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”!', 'ëŒ€ì¶œì´ë‚˜ íˆ¬ìëŠ” ì‹ ì¤‘í•˜ê²Œ ê²°ì •í•˜ì„¸ìš”!'],
            30: ['ì˜¤ëŠ˜ì€ ì§€ê°‘ì„ ë‹¨ë‹¨íˆ ë‹«ì•„ë‘ì„¸ìš”!', 'ê¸ˆì „ ê±°ë˜ëŠ” ìµœëŒ€í•œ í”¼í•˜ëŠ” ê²ƒì´ ì¢‹ê² ìŠµë‹ˆë‹¤!']
        }
    },
    health: {
        name: 'ê±´ê°•ìš´',
        icon: 'ğŸ’ª',
        messages: {
            90: ['ëª¸ê³¼ ë§ˆìŒì´ ìµœìƒì˜ ì»¨ë””ì…˜ì„ ìœ ì§€í•  ê²ƒì…ë‹ˆë‹¤!', 'ìƒˆë¡œìš´ ìš´ë™ì´ë‚˜ ê±´ê°•ê´€ë¦¬ ë°©ë²•ì„ ì‹œì‘í•˜ê¸° ì¢‹ì€ ë‚ ì…ë‹ˆë‹¤!'],
            80: ['ê·œì¹™ì ì¸ ìƒí™œë¡œ ê±´ê°•ì´ ë”ìš± ì¢‹ì•„ì§ˆ ê²ƒì…ë‹ˆë‹¤!', 'ê°€ë²¼ìš´ ìš´ë™ì´ë‚˜ ì‚°ì±…ì´ í° ë„ì›€ì´ ë  ê²ƒì…ë‹ˆë‹¤!'],
            70: ['ì „ë°˜ì ìœ¼ë¡œ ì•ˆì •ëœ ê±´ê°• ìƒíƒœë¥¼ ìœ ì§€í•  ê²ƒì…ë‹ˆë‹¤!', 'ì¶©ë¶„í•œ ìˆ˜ë©´ê³¼ íœ´ì‹ì„ ì·¨í•˜ì„¸ìš”!'],
            60: ['ì»¨ë””ì…˜ ê´€ë¦¬ì— ë”ìš± ì‹ ê²½ì¨ì•¼ í•  ë•Œì…ë‹ˆë‹¤!', 'ë¬´ë¦¬í•œ ìš´ë™ë³´ë‹¤ëŠ” ê°€ë²¼ìš´ í™œë™ì´ ì¢‹ê² ìŠµë‹ˆë‹¤!'],
            50: ['ê³¼ë¡œí•˜ì§€ ë§ê³  ì ë‹¹í•œ íœ´ì‹ì„ ì·¨í•˜ì„¸ìš”!', 'ê· í˜•ì¡íŒ ì‹ì‚¬ì™€ ì¶©ë¶„í•œ ìˆ˜ë¶„ ì„­ì·¨ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤!'],
            40: ['ëª¸ì˜ ì‹ í˜¸ë¥¼ ì˜ ë“¤ì–´ë³´ê³  ë¬´ë¦¬í•˜ì§€ ë§ˆì„¸ìš”!', 'ìˆ , ë‹´ë°°, ì¹´í˜ì¸ ì„­ì·¨ë¥¼ ì¤„ì´ëŠ” ê²ƒì´ ì¢‹ê² ìŠµë‹ˆë‹¤!'],
            30: ['ì˜¤ëŠ˜ì€ ëª¸ì¡°ë¦¬ì— ì§‘ì¤‘í•˜ëŠ” ê²ƒì´ ìµœìš°ì„ ì…ë‹ˆë‹¤!', 'ë¬´ë¦¬í•œ í™œë™ì€ í”¼í•˜ê³  í‘¹ ì‰¬ì„¸ìš”!']
        }
    },
    work: {
        name: 'ì§ì¥ìš´',
        icon: 'ğŸ’¼',
        messages: {
            90: ['ìŠ¹ì§„ì´ë‚˜ ì¢‹ì€ ì†Œì‹ì´ ìˆì„ ìˆ˜ ìˆëŠ” ë‚ ì…ë‹ˆë‹¤!', 'ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ì—ì„œ í° ì„±ê³¼ë¥¼ ê±°ë‘˜ ê²ƒì…ë‹ˆë‹¤!'],
            80: ['ì—…ë¬´ ëŠ¥ë ¥ì´ ì¸ì •ë°›ì•„ ì¹­ì°¬ì„ ë“¤ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤!', 'ìƒˆë¡œìš´ ê¸°íšŒë‚˜ ì œì•ˆì´ ë“¤ì–´ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤!'],
            70: ['ì•ˆì •ì ì´ê³  íš¨ìœ¨ì ìœ¼ë¡œ ì—…ë¬´ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!', 'íŒ€ì›Œí¬ê°€ ì¢‹ì•„ì ¸ í”„ë¡œì íŠ¸ê°€ ìˆœì¡°ë¡­ê²Œ ì§„í–‰ë  ê²ƒì…ë‹ˆë‹¤!'],
            60: ['ì¡°ê¸ˆ ë” ì§‘ì¤‘í•˜ë©´ ì›í•˜ëŠ” ì„±ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤!', 'ìƒì‚¬ë‚˜ ë™ë£Œì™€ì˜ ì†Œí†µì„ ëŠ˜ë ¤ë³´ì„¸ìš”!'],
            50: ['í˜„ì¬ ë§¡ì€ ì¼ì— ì¶©ì‹¤í•˜ë©° ì‹¤ìˆ˜í•˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”!', 'ê¸‰í•œ ê²°ì •ë³´ë‹¤ëŠ” ì‹ ì¤‘í•œ íŒë‹¨ì´ í•„ìš”í•©ë‹ˆë‹¤!'],
            40: ['ì—…ë¬´ìƒ ê°ˆë“±ì´ë‚˜ ì˜¤í•´ê°€ ìƒê¸¸ ìˆ˜ ìˆìœ¼ë‹ˆ ì¡°ì‹¬í•˜ì„¸ìš”!', 'ì¤‘ìš”í•œ ë¯¸íŒ…ì´ë‚˜ ë°œí‘œëŠ” í”¼í•˜ëŠ” ê²ƒì´ ì¢‹ê² ìŠµë‹ˆë‹¤!'],
            30: ['ì˜¤ëŠ˜ì€ ìƒˆë¡œìš´ ì¼ì„ ì‹œì‘í•˜ì§€ ë§ê³  í˜„ìƒ ìœ ì§€í•˜ì„¸ìš”!', 'ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë°›ëŠ” ì—…ë¬´ëŠ” ë‚´ì¼ë¡œ ë¯¸ë£¨ëŠ” ê²ƒì´ ì¢‹ê² ìŠµë‹ˆë‹¤!']
        }
    },
    study: {
        name: 'í•™ì—…ìš´',
        icon: 'ğŸ“š',
        messages: {
            90: ['ì§‘ì¤‘ë ¥ì´ ìµœê³ ì¡°ì— ë‹¬í•´ ì–´ë ¤ìš´ ê³µë¶€ë„ ìˆ ìˆ  í’€ë¦´ ê²ƒì…ë‹ˆë‹¤!', 'ì‹œí—˜ì´ë‚˜ ë°œí‘œì—ì„œ ë›°ì–´ë‚œ ì„±ê³¼ë¥¼ ê±°ë‘˜ ê²ƒì…ë‹ˆë‹¤!'],
            80: ['í•™ìŠµ íš¨ìœ¨ì´ ë†’ì•„ì ¸ ë§ì€ ê²ƒì„ ë°°ìš¸ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤!', 'ê¶ê¸ˆí–ˆë˜ ë¬¸ì œë“¤ì´ ëª…ì¾Œí•˜ê²Œ í•´ê²°ë  ê²ƒì…ë‹ˆë‹¤!'],
            70: ['ê¾¸ì¤€í•œ í•™ìŠµìœ¼ë¡œ ì‹¤ë ¥ì´ í–¥ìƒë  ê²ƒì…ë‹ˆë‹¤!', 'ë³µìŠµì„ í†µí•´ ê¸°ì´ˆë¥¼ ë”ìš± íƒ„íƒ„íˆ ë‹¤ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤!'],
            60: ['ì¡°ê¸ˆ ë” ì§‘ì¤‘í•˜ë©´ ì›í•˜ëŠ” ì„±ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤!', 'ì–´ë ¤ìš´ ë¶€ë¶„ì€ ì„ ìƒë‹˜ì´ë‚˜ ì¹œêµ¬ì—ê²Œ ë„ì›€ì„ ìš”ì²­í•˜ì„¸ìš”!'],
            50: ['ë¬´ë¦¬í•˜ì§€ ë§ê³  ìì‹ ì˜ í˜ì´ìŠ¤ì— ë§ì¶° ê³µë¶€í•˜ì„¸ìš”!', 'ì•”ê¸°ë³´ë‹¤ëŠ” ì´í•´ ìœ„ì£¼ì˜ í•™ìŠµì´ íš¨ê³¼ì ì¼ ê²ƒì…ë‹ˆë‹¤!'],
            40: ['ì§‘ì¤‘ë ¥ì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆìœ¼ë‹ˆ ì§§ì€ ì‹œê°„ì”© ê³µë¶€í•˜ì„¸ìš”!', 'ì¤‘ìš”í•œ ì‹œí—˜ì´ë‚˜ ê³¼ì œëŠ” ë‹¤ì‹œ í•œë²ˆ ì ê²€í•´ë³´ì„¸ìš”!'],
            30: ['ì˜¤ëŠ˜ì€ ê³µë¶€ë³´ë‹¤ëŠ” íœ´ì‹ì„ ì·¨í•˜ëŠ” ê²ƒì´ ì¢‹ê² ìŠµë‹ˆë‹¤!', 'ë¬´ë¦¬í•œ í•™ìŠµì€ í”¼í•˜ê³  ê°€ë²¼ìš´ ë…ì„œ ì •ë„ë§Œ í•˜ì„¸ìš”!']
        }
    }
};
const LUCKY_ITEMS = {
    items: ['ë°˜ì§€', 'ëª©ê±¸ì´', 'ì‹œê³„', 'í–¥ìˆ˜', 'ë¦½ë°¤', 'ì°¨í‚¤', 'ì§€ê°‘', 'ìŠ¤ë§ˆíŠ¸í° ì¼€ì´ìŠ¤', 'ë…¸íŠ¸', 'íœ'],
    colors: ['ë¹¨ê°•', 'íŒŒë‘', 'ë…¸ë‘', 'ì´ˆë¡', 'ë³´ë¼', 'ë¶„í™', 'í•˜ëŠ˜ìƒ‰', 'ì£¼í™©', 'í°ìƒ‰', 'ê²€ì •'],
    numbers: ['3', '7', '9', '12', '21', '27', '33', '42', '51', '63'],
    directions: ['ë™ìª½', 'ì„œìª½', 'ë‚¨ìª½', 'ë¶ìª½', 'ë™ë‚¨ìª½', 'ë™ë¶ìª½', 'ì„œë‚¨ìª½', 'ì„œë¶ìª½']
};

// ===== íƒ€ë¡œ ë°ì´í„° =====
const TAROT_DETAILS = [
    {
        name: "THE FOOL (ë°”ë³´)",
        meaning: "ìƒˆë¡œìš´ ì‹œì‘ê³¼ ìˆœìˆ˜í•¨ì„ ë‚˜íƒ€ë‚´ëŠ” ì¹´ë“œì…ë‹ˆë‹¤. ë¯¸ì§€ì˜ ì„¸ê³„ë¡œ ë›°ì–´ë“œëŠ” ìš©ê¸°ì™€ ìˆœì§„ë¬´êµ¬í•œ ë§ˆìŒì„ ìƒì§•í•©ë‹ˆë‹¤.",
        upright: {
            general: "ìƒˆë¡œìš´ ì‹œì‘, ìˆœì§„í•¨, ìë°œì„± - ì§€ê¸ˆì´ ìƒˆë¡œìš´ ë„ì „ì„ ì‹œì‘í•  ìµœì ì˜ ì‹œê¸°ì…ë‹ˆë‹¤.",
            love: "ìƒˆë¡œìš´ ë§Œë‚¨ì´ë‚˜ ê´€ê³„ì˜ ì‹œì‘. ìˆœìˆ˜í•œ ë§ˆìŒìœ¼ë¡œ ì‚¬ë‘ì— ì„í•˜ì„¸ìš”.",
            career: "ìƒˆë¡œìš´ ì§ì¥ì´ë‚˜ í”„ë¡œì íŠ¸ ì‹œì‘. ë„ì „ì„ ë‘ë ¤ì›Œí•˜ì§€ ë§ˆì„¸ìš”.",
            advice: "ê³¼ê±°ì— ì–½ë§¤ì´ì§€ ë§ê³  ììœ ë¡œìš´ ë§ˆìŒìœ¼ë¡œ ì•ìœ¼ë¡œ ë‚˜ì•„ê°€ì„¸ìš”. ì˜ˆìƒì¹˜ ëª»í•œ ê¸°íšŒê°€ ì°¾ì•„ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
        },
        reversed: {
            general: "ë¬´ëª¨í•¨, ê²½ì†”í•¨, ìœ„í—˜í•œ í–‰ë™ - ë„ˆë¬´ ì„±ê¸‰í•˜ê²Œ ê²°ì •í•˜ì§€ ë§ˆì„¸ìš”.",
            love: "ê´€ê³„ì—ì„œì˜ ì„±ê¸‰í•¨ì´ë‚˜ ê²½ì†”í•œ í–‰ë™ì„ ì¡°ì‹¬í•˜ì„¸ìš”.",
            career: "ì¤€ë¹„ ì—†ëŠ” ì´ì§ì´ë‚˜ ì°½ì—…ì€ ìœ„í—˜í•©ë‹ˆë‹¤.",
            advice: "ì¶©ë¶„í•œ ì¤€ë¹„ ì—†ì´ ë›°ì–´ë“¤ë©´ ì‹¤íŒ¨í•  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. í˜„ì‹¤ì„ ì§ì‹œí•˜ê³  ì‹ ì¤‘í•˜ê²Œ í–‰ë™í•˜ì„¸ìš”."
        },
        keywords: "ì‹œì‘, ëª¨í—˜, ììœ , ìˆœìˆ˜"
    },
    {
        name: "THE MAGICIAN (ë§ˆë²•ì‚¬)",
        meaning: "ì˜ì§€ë ¥ê³¼ ì°½ì¡°ë ¥ì„ ë‚˜íƒ€ë‚´ëŠ” ì¹´ë“œì…ë‹ˆë‹¤. í•˜ëŠ˜ê³¼ ë•…ì„ ì—°ê²°í•˜ëŠ” ì¡´ì¬ë¡œ, ëª¨ë“  ê°€ëŠ¥ì„±ì„ í˜„ì‹¤ë¡œ ë§Œë“œëŠ” í˜ì„ ìƒì§•í•©ë‹ˆë‹¤.",
        upright: {
            general: "ì˜ì§€ë ¥, ì°½ì¡°ë ¥, ì§‘ì¤‘ - ë‹¹ì‹ ì—ê²ŒëŠ” ëª©í‘œë¥¼ ë‹¬ì„±í•  ëª¨ë“  ëŠ¥ë ¥ì´ ìˆìŠµë‹ˆë‹¤.",
            love: "ì ê·¹ì ì¸ ì–´í”„ë¡œì¹˜ë¡œ ì›í•˜ëŠ” ê´€ê³„ë¥¼ ë§Œë“¤ì–´ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            career: "ë¦¬ë”ì‹­ì„ ë°œíœ˜í•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ì„±ê³µìœ¼ë¡œ ì´ëŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            advice: "ì§‘ì¤‘ë ¥ì„ ë°œíœ˜í•˜ë©´ ì›í•˜ëŠ” ê²ƒì„ ì´ë£° ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìì‹ ê°ì„ ê°€ì§€ì„¸ìš”."
        },
        reversed: {
            general: "ê¸°ë§Œ, ì¡°ì‘, ëŠ¥ë ¥ ë¶€ì¡± - ìì‹ ì˜ ëŠ¥ë ¥ì„ ê³¼ì‹ í•˜ê±°ë‚˜ ë‚¨ìš©í•˜ì§€ ë§ˆì„¸ìš”.",
            love: "ìƒëŒ€ë°©ì„ ì¡°ì¢…í•˜ë ¤ ë“¤ê±°ë‚˜ ê±°ì§“ìœ¼ë¡œ ê´€ê³„ë¥¼ ìœ ì§€í•˜ë ¤ í•˜ì§€ ë§ˆì„¸ìš”.",
            career: "ë™ë£Œë“¤ì„ ì†ì´ê±°ë‚˜ ì‹¤ë ¥ ì´ìƒì˜ ì¼ì„ ë§¡ì§€ ë§ˆì„¸ìš”.",
            advice: "ê±°ì§“ê³¼ ì†ì„ìˆ˜ëŠ” ê²°êµ­ ë“œëŸ¬ë‚©ë‹ˆë‹¤. ì§„ì‹¤ëœ ë…¸ë ¥ì´ í•„ìš”í•œ ë•Œì…ë‹ˆë‹¤."
        },
        keywords: "ëŠ¥ë ¥, ì§‘ì¤‘, ìì›, í–‰ë™"
    },
    {
        name: "THE HIGH PRIESTESS (ì—¬êµí™©)",
        meaning: "ì§ê°ê³¼ ë‚´ë©´ì˜ ì§€í˜œë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì¹´ë“œì…ë‹ˆë‹¤. ë³´ì´ì§€ ì•ŠëŠ” ì§„ì‹¤ê³¼ ìˆ¨ê²¨ì§„ ì§€ì‹, ë¬´ì˜ì‹ì˜ ì„¸ê³„ë¥¼ ìƒì§•í•©ë‹ˆë‹¤.",
        upright: {
            general: "ì§ê°, ë¬´ì˜ì‹, ì‹ ë¹„ - ë‚´ë©´ì˜ ëª©ì†Œë¦¬ì— ê·€ë¥¼ ê¸°ìš¸ì´ì„¸ìš”.",
            love: "ì§ê°ì„ ë¯¿ê³  ìƒëŒ€ë°©ì˜ ì§„ì‹¬ì„ íŒŒì•…í•˜ì„¸ìš”. ìˆ¨ê²¨ì§„ ê°ì •ì´ ë“œëŸ¬ë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            career: "ë…¼ë¦¬ì  ë¶„ì„ë³´ë‹¤ ì§ê´€ì  íŒë‹¨ì´ ë” ì •í™•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            advice: "ë…¼ë¦¬ë³´ë‹¤ ì§ê°ì´ ë” ì •í™•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª…ìƒê³¼ ì„±ì°°ì´ ë„ì›€ì´ ë©ë‹ˆë‹¤."
        },
        reversed: {
            general: "ë¹„ë°€, ìˆ¨ê²¨ì§„ ë™ê¸°, ì§ê° ë¬´ì‹œ - ì¤‘ìš”í•œ ì •ë³´ê°€ ìˆ¨ê²¨ì ¸ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            love: "ìƒëŒ€ë°©ì´ ì§„ì‹¤ì„ ìˆ¨ê¸°ê³  ìˆê±°ë‚˜ ë‹¹ì‹ ì´ ì§ê°ì„ ë¬´ì‹œí•˜ê³  ìˆìŠµë‹ˆë‹¤.",
            career: "ì¤‘ìš”í•œ ì •ë³´ë¥¼ ë†“ì¹˜ê³  ìˆê±°ë‚˜ ì˜ëª»ëœ íŒë‹¨ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            advice: "ì§ê°ì„ ë¬´ì‹œí•˜ë©´ í›„íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì§„ì‹¤ì„ íŒŒì•…í•˜ë ¤ ë…¸ë ¥í•˜ì„¸ìš”."
        },
        keywords: "ì§ê´€, ì§€í˜œ, ë¹„ë°€, ì—¬ì„±ì„±"
    },
    {
        name: "THE EMPRESS (ì—¬í™©ì œ)",
        meaning: "í’ìš”ì™€ ëª¨ì„±ì„ ë‚˜íƒ€ë‚´ëŠ” ì¹´ë“œì…ë‹ˆë‹¤. ì°½ì¡°ì  ì—ë„ˆì§€ì™€ ìì—°ì˜ í’ìš”ë¡œì›€, ì–‘ìœ¡ê³¼ ëŒë´„ì„ ìƒì§•í•©ë‹ˆë‹¤.",
        upright: {
            general: "í’ìš”, ëª¨ì„±, ì°½ì¡°ì„± - ì°½ì¡°ì  í”„ë¡œì íŠ¸ë‚˜ ìƒˆë¡œìš´ ì‹œì‘ì— ì¢‹ì€ ì‹œê¸°ì…ë‹ˆë‹¤.",
            love: "ì„ì‹ ì´ë‚˜ ê²°í˜¼, ê°€ì¡±ì˜ í™•ì¥ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ëœ»í•œ ì‚¬ë‘ì´ ë„˜ì¹˜ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤.",
            career: "ì°½ì˜ì ì¸ ì•„ì´ë””ì–´ë¡œ ì„±ê³¼ë¥¼ ê±°ë‘˜ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í˜‘ë ¥ê³¼ ë°°ë ¤ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤.",
            advice: "í’ìš”ì™€ ì„±ì¥ì´ ê¸°ëŒ€ë©ë‹ˆë‹¤. ì‚¬ë‘ê³¼ ë³´ì‚´í•Œì´ ë„˜ì¹˜ëŠ” ë•Œì…ë‹ˆë‹¤."
        },
        reversed: {
            general: "ë¶ˆì„, ì°½ì¡°ì„± ë¶€ì¡±, ê³¼ë³´í˜¸ - ì°½ì˜ë ¥ì´ ë§‰í˜€ìˆê±°ë‚˜ ì„±ì¥ì´ ì •ì²´ëœ ìƒíƒœì…ë‹ˆë‹¤.",
            love: "ê³¼ë³´í˜¸ë‚˜ ì˜ì¡´ì ì¸ ê´€ê³„ê°€ ë¬¸ì œê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            career: "ì°½ì˜ì  ì•„ì´ë””ì–´ê°€ ë– ì˜¤ë¥´ì§€ ì•Šê±°ë‚˜ íŒ€ì›Œí¬ì— ë¬¸ì œê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            advice: "ì§€ë‚˜ì¹œ ì§‘ì°©ì´ë‚˜ ì˜ì¡´ì€ í•´ë¡­ìŠµë‹ˆë‹¤. ê· í˜•ì„ ì°¾ìœ¼ì„¸ìš”."
        },
        keywords: "í’ìš”, ì°½ì¡°, ë³´ì‚´í•Œ, ì„±ì¥"
    },
    {
        name: "THE EMPEROR (í™©ì œ)",
        meaning: "ê¶Œìœ„ì™€ ì•ˆì •ì„ ë‚˜íƒ€ë‚´ëŠ” ì¹´ë“œì…ë‹ˆë‹¤. í™•ê³ í•œ ê¸°ë°˜ê³¼ êµ¬ì¡°, ë¦¬ë”ì‹­ê³¼ ì±…ì„ê°ì„ ìƒì§•í•©ë‹ˆë‹¤.",
        upright: {
            general: "ê¶Œìœ„, êµ¬ì¡°, ì§ˆì„œ - ê°•ë ¥í•œ ë¦¬ë”ì‹­ì„ ë°œíœ˜í•  ë•Œì…ë‹ˆë‹¤.",
            love: "ê´€ê³„ì—ì„œ ì£¼ë„ê¶Œì„ ì¡ê³  ì•ˆì •ì ì¸ ê¸°ë°˜ì„ ë§Œë“¤ì–´ê°€ì„¸ìš”.",
            career: "ê´€ë¦¬ì§ì´ë‚˜ ë¦¬ë” ì—­í• ì„ ë§¡ê²Œ ë  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.",
            advice: "ì²´ê³„ì ì¸ ê³„íšê³¼ ì‹¤í–‰ì´ ì„±ê³µì„ ê°€ì ¸ì˜µë‹ˆë‹¤. ì±…ì„ê° ìˆê²Œ í–‰ë™í•˜ì„¸ìš”."
        },
        reversed: {
            general: "ë…ì¬, ê¶Œìœ„ì£¼ì˜, ê²½ì§ì„± - ì§€ë‚˜ì¹œ í†µì œìš•ì€ ê´€ê³„ë¥¼ í•´ì¹©ë‹ˆë‹¤.",
            love: "ìƒëŒ€ë°©ì„ ë„ˆë¬´ í†µì œí•˜ë ¤ í•˜ê±°ë‚˜ ê³ ì§‘ì´ ì„¼ ëª¨ìŠµì„ ë³´ì´ì§€ ë§ˆì„¸ìš”.",
            career: "ë…ë‹¨ì ì¸ ê²°ì •ì´ë‚˜ ìœµí†µì„± ì—†ëŠ” íƒœë„ê°€ ë¬¸ì œê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            advice: "ìœµí†µì„± ì—†ëŠ” íƒœë„ë¥¼ ë²„ë¦¬ì„¸ìš”. ê¶Œìœ„ë¥¼ ë‚¨ìš©í•˜ì§€ ë§ˆì„¸ìš”."
        },
        keywords: "ê¶Œìœ„, ì•ˆì •, êµ¬ì¡°, ì•„ë²„ì§€"
    },
    {
        name: "THE HIEROPHANT (êµí™©)",
        meaning: "ì „í†µê³¼ êµìœ¡ì„ ë‚˜íƒ€ë‚´ëŠ” ì¹´ë“œì…ë‹ˆë‹¤. ì˜ì  ê°€ë¥´ì¹¨ê³¼ ê´€ìŠµ, ì²´ê³„ì ì¸ ì§€ì‹ ì „ë‹¬ì„ ìƒì§•í•©ë‹ˆë‹¤.",
        upright: {
            general: "ì „í†µ, êµìœ¡, ì¢…êµ - ì „í†µì  ê°€ì¹˜ì™€ ì§€í˜œì—ì„œ ë°°ìš¸ ì ì´ ë§ìŠµë‹ˆë‹¤.",
            love: "ì „í†µì ì¸ ë°©ì‹ì˜ ê²°í˜¼ì´ë‚˜ ê°€ì¡±ì˜ ìŠ¹ì¸ì„ ë°›ëŠ” ê´€ê³„ê°€ ìœ ë¦¬í•©ë‹ˆë‹¤.",
            career: "ë©˜í† ë¥¼ ì°¾ê±°ë‚˜ ì²´ê³„ì ì¸ êµìœ¡ì´ ë„ì›€ì´ ë©ë‹ˆë‹¤.",
            advice: "ìŠ¤ìŠ¹ì„ ì°¾ê±°ë‚˜ ì²´ê³„ì ì¸ í•™ìŠµì´ ë„ì›€ì´ ë©ë‹ˆë‹¤."
        },
        reversed: {
            general: "ë°˜í•­, ë¹„ì •í†µì„±, ìƒˆë¡œìš´ ì ‘ê·¼ë²• - ê¸°ì¡´ì˜ í‹€ì„ ê¹¨ê³  ìƒˆë¡œìš´ ë°©ë²•ì„ ì‹œë„í•´ë³´ì„¸ìš”.",
            love: "ë¹„ì „í†µì ì¸ ê´€ê³„ë‚˜ ì£¼ë³€ì˜ ë°˜ëŒ€ì—ë„ ë¶ˆêµ¬í•˜ê³  ì‚¬ë‘ì„ ê´€ì² í•˜ë ¤ í•©ë‹ˆë‹¤.",
            career: "ê¸°ì¡´ ë°©ì‹ì— ì–½ë§¤ì´ì§€ ë§ê³  í˜ì‹ ì ì¸ ì ‘ê·¼ì„ ì‹œë„í•´ë³´ì„¸ìš”.",
            advice: "ë§¹ëª©ì ì¸ ì¶”ì¢…ë³´ë‹¤ ìì‹ ë§Œì˜ ê¸¸ì„ ì°¾ìœ¼ì„¸ìš”."
        },
        keywords: "ì „í†µ, ê°€ë¥´ì¹¨, ì‹ ë…, ì²´ê³„"
    },
    {
        name: "THE LOVERS (ì—°ì¸)",
        meaning: "ì‚¬ë‘ê³¼ ì„ íƒì„ ë‚˜íƒ€ë‚´ëŠ” ì¹´ë“œì…ë‹ˆë‹¤. ì¡°í™”ë¡œìš´ ê´€ê³„ì™€ ì¤‘ìš”í•œ ê²°ì •, ê°€ì¹˜ê´€ì˜ ì¼ì¹˜ë¥¼ ìƒì§•í•©ë‹ˆë‹¤.",
        upright: {
            general: "ì‚¬ë‘, ê´€ê³„, ì„ íƒ - ì§„ì •í•œ ì‚¬ë‘ì´ë‚˜ ì¤‘ìš”í•œ íŒŒíŠ¸ë„ˆì‹­ì´ í˜•ì„±ë©ë‹ˆë‹¤.",
            love: "ìš´ëª…ì ì¸ ë§Œë‚¨ì´ë‚˜ ê´€ê³„ì˜ ë°œì „ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê²°í˜¼ì„ ê³ ë ¤í•  ì‹œê¸°ì…ë‹ˆë‹¤.",
            career: "ë¹„ì¦ˆë‹ˆìŠ¤ íŒŒíŠ¸ë„ˆë‚˜ í˜‘ë ¥ìì™€ì˜ ê´€ê³„ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤.",
            advice: "ê°€ì¹˜ê´€ì´ ë§ëŠ” ì‚¬ëŒì„ ë§Œë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¤‘ìš”í•œ ì„ íƒì„ í˜„ëª…í•˜ê²Œ í•˜ì„¸ìš”."
        },
        reversed: {
            general: "ë¶ˆê· í˜•, ê°ˆë“±, ì˜ëª»ëœ ì„ íƒ - ê´€ê³„ì˜ ë¶ˆê· í˜•ì´ë‚˜ ê°€ì¹˜ê´€ ì¶©ëŒì´ ìˆìŠµë‹ˆë‹¤.",
            love: "ê´€ê³„ì— ê· ì—´ì´ ìƒê¸°ê±°ë‚˜ ì´ë³„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            career: "íŒŒíŠ¸ë„ˆë‚˜ ë™ë£Œì™€ì˜ ê°ˆë“±ì´ ì¼ì–´ë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            advice: "ì„ íƒì„ ë¯¸ë£¨ê±°ë‚˜ ì˜ëª»ëœ ê²°ì •ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
        },
        keywords: "ì‚¬ë‘, ê²°í•©, ì„ íƒ, ì¡°í™”"
    },
    {
        name: "THE CHARIOT (ì „ì°¨)",
        meaning: "ìŠ¹ë¦¬ì™€ ì˜ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì¹´ë“œì…ë‹ˆë‹¤. ìƒë°˜ëœ í˜ì„ í†µì œí•˜ì—¬ ëª©í‘œë¥¼ í–¥í•´ ì „ì§„í•˜ëŠ” ëª¨ìŠµì„ ìƒì§•í•©ë‹ˆë‹¤.",
        upright: {
            general: "ìŠ¹ë¦¬, ì˜ì§€ë ¥, ìì œë ¥ - ê°•í•œ ì˜ì§€ë¡œ ì¥ì• ë¬¼ì„ ê·¹ë³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            love: "ì ê·¹ì ìœ¼ë¡œ ê´€ê³„ë¥¼ ì´ëŒì–´ê°€ë©´ ì›í•˜ëŠ” ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            career: "ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•œ ê°•í•œ ì¶”ì§„ë ¥ì´ ì„±ê³µì„ ê°€ì ¸ì˜¬ ê²ƒì…ë‹ˆë‹¤.",
            advice: "ëª©í‘œë¥¼ í–¥í•´ ëŒì§„í•˜ì„¸ìš”. ìŠ¹ë¦¬ê°€ ëˆˆì•ì— ìˆìŠµë‹ˆë‹¤."
        },
        reversed: {
            general: "í†µì œë ¥ ìƒì‹¤, ë°©í–¥ì„± ë¶€ì¡± - ê°ì •ì´ë‚˜ ìƒí™©ì„ í†µì œí•˜ì§€ ëª»í•˜ê³  ìˆìŠµë‹ˆë‹¤.",
            love: "ê´€ê³„ì—ì„œ ì£¼ë„ê¶Œì„ ìƒê±°ë‚˜ ê°ˆë“±ì´ ì‹¬í•´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            career: "ëª©í‘œë¥¼ ìƒê³  í—¤ë§¤ê±°ë‚˜ ê³„íšì´ í‹€ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            advice: "ë°©í–¥ì„ ìƒê³  í—¤ë§¤ê³  ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
        },
        keywords: "ìŠ¹ë¦¬, ì „ì§„, ì˜ì§€, í†µì œ"
    }
];

const CARD_ICONS = ["ğŸƒ","ğŸ©","ğŸŒ™","ğŸ‘‘","ğŸ°","â›ª","ğŸ’•","ğŸï¸","ğŸ¦","ğŸ•¯ï¸","ğŸ¡","âš–ï¸","ğŸ™ƒ","ğŸ’€","ğŸ‘¼","ğŸ˜ˆ","ğŸ—¼","â­","ğŸŒ™","â˜€ï¸","ğŸ“¯","ğŸŒ"];

// 2025ë…„ ì‹ ë…„ìš´ì„¸ ë°ì´í„°
const YEAR_2025_DATA = {
    yearInfo: {
        element: 'ä¹™å·³', // ì„ì‚¬ë…„ (ëª©ë±€)
        animal: 'ë±€',
        description: '2025ë…„ì€ ì„ì‚¬ë…„(ä¹™å·³å¹´)ìœ¼ë¡œ "í‘¸ë¥¸ ë±€ì˜ í•´"ì…ë‹ˆë‹¤. ì§€í˜œë¡­ê³  ì‹ ì¤‘í•œ ë³€í™”, ë‚´ë©´ì˜ ì„±ì°°ê³¼ ì „í™˜ì˜ ì‹œê¸°ì…ë‹ˆë‹¤.',
        keywords: ['ì§€í˜œ', 'ë³€í™”', 'ì§ê°', 'ì„±ì°°', 'ì „í™˜', 'ì„±ì¥'],
        theme: 'ë‚´ì  ì„±ì¥ê³¼ ì§€í˜œë¡œìš´ ë³€í™”ì˜ í•´'
    },
    
    // ê°œì¸ë³„ ìš´ì„¸ ìœ í˜• (ìƒë…„ì›”ì¼ ê¸°ë°˜ 12ê°€ì§€)
    personalTypes: [
        {
            name: 'í° ë„ì•½ì˜ í•´',
            icon: 'ğŸš€',
            summary: 'ì˜¤ë«ë™ì•ˆ ì¤€ë¹„í•´ì˜¨ ì¼ë“¤ì´ ê²°ì‹¤ì„ ë§ºëŠ” í•´ì…ë‹ˆë‹¤.',
            description: '2025ë…„ì€ ê·¸ë™ì•ˆ ê¾¸ì¤€íˆ ì¤€ë¹„í•˜ê³  ë…¸ë ¥í•´ì˜¨ ê²ƒë“¤ì´ ë“œë””ì–´ ë¹›ì„ ë°œí•˜ëŠ” í•œ í•´ê°€ ë  ê²ƒì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ì§ì±…ìœ¼ë¡œì˜ ìŠ¹ì§„, ì‚¬ì—…ì˜ ì„±ê³µ, ë˜ëŠ” ì¸ìƒì˜ ì¤‘ìš”í•œ ì „í™˜ì ì„ ë§ì´í•  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. ì„ì‚¬ë…„ì˜ ë±€ ê¸°ìš´ì´ ë‹¹ì‹ ì˜ ì ì¬ë ¥ì„ ê¹¨ìš°ê³ , ê¸°íšŒì˜ ë¬¸ì„ í™œì§ ì—´ì–´ì¤„ ê²ƒì…ë‹ˆë‹¤.',
            sectors: {
                career: 'ìŠ¹ì§„ì´ë‚˜ ì´ì§ì˜ ê¸°íšŒê°€ ë§ìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë¥¼ ë§¡ê²Œ ë˜ê±°ë‚˜ ë¦¬ë”ì‹­ì„ ë°œíœ˜í•  ê¸°íšŒê°€ ìƒê¹ë‹ˆë‹¤. ì „ë¬¸ì„±ì„ ì¸ì •ë°›ì•„ ë” í° ë¬´ëŒ€ë¡œ ë‚˜ì•„ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                love: 'ìƒˆë¡œìš´ ë§Œë‚¨ì´ë‚˜ ê¸°ì¡´ ê´€ê³„ì˜ ë°œì „ì´ ê¸°ëŒ€ë©ë‹ˆë‹¤. ê²°í˜¼ì„ ì•ë‘” ì»¤í”Œì€ ì¢‹ì€ ì†Œì‹ì´ ìˆì„ ìˆ˜ ìˆìœ¼ë©°, ì‹±ê¸€ì¸ ê²½ìš° ìš´ëª…ì ì¸ ë§Œë‚¨ì´ ê¸°ë‹¤ë¦¬ê³  ìˆìŠµë‹ˆë‹¤.',
                health: 'ì „ë°˜ì ìœ¼ë¡œ í™œë ¥ì´ ë„˜ì¹˜ëŠ” í•œ í•´ì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ìš´ë™ì´ë‚˜ ê±´ê°•ê´€ë¦¬ë²•ì„ ì‹œì‘í•˜ê¸° ì¢‹ì€ ì‹œê¸°ì…ë‹ˆë‹¤. ë‹¤ë§Œ ê³¼ë¡œëŠ” ê¸ˆë¬¼ì…ë‹ˆë‹¤.',
                money: 'íˆ¬ìë‚˜ ë¶€ë™ì‚°ì—ì„œ ì¢‹ì€ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¶€ì—…ì´ë‚˜ ìƒˆë¡œìš´ ìˆ˜ìµì›ì„ ê°œë°œí•  ê¸°íšŒë„ ìˆìŠµë‹ˆë‹¤. ì¬ì • ìƒí™©ì´ í¬ê²Œ ê°œì„ ë  ê²ƒì…ë‹ˆë‹¤.'
            },
            luckyPeriods: '3ì›”, 7ì›”, 11ì›”',
            cautions: 'ì„±ê¸‰í•œ ê²°ì •ë³´ë‹¤ëŠ” ì‹ ì¤‘í•œ ê³„íšì„ ì„¸ìš°ì„¸ìš”. ê¸°íšŒê°€ ì™€ë„ ì¶©ë¶„íˆ ê²€í† í•œ í›„ í–‰ë™í•˜ì„¸ìš”.',
            advice: 'ê¸°íšŒê°€ ì™”ì„ ë•Œ ì£¼ì €í•˜ì§€ ë§ê³  ë„ì „í•˜ì„¸ìš”. í•˜ì§€ë§Œ ìµœì†Œí•œì˜ ì¤€ë¹„ëŠ” ë°˜ë“œì‹œ í•„ìš”í•©ë‹ˆë‹¤. ë‹¹ì‹ ì˜ ëŠ¥ë ¥ì„ ë¯¿ê³  ìì‹ ê°ì„ ê°€ì§€ì„¸ìš”.',
            keywords: ['ì„±ì·¨', 'ë„ì•½', 'ì„±ê³µ', 'ë¦¬ë”ì‹­']
        },
        {
            name: 'ì„±ì¥ê³¼ í•™ìŠµì˜ í•´',
            icon: 'ğŸ“š',
            summary: 'ìƒˆë¡œìš´ ì§€ì‹ê³¼ ê¸°ìˆ ì„ ìŠµë“í•˜ë©° ìì‹ ì„ ë°œì „ì‹œí‚¤ëŠ” í•´ì…ë‹ˆë‹¤.',
            description: '2025ë…„ì€ ë°°ì›€ê³¼ ì„±ì¥ì— ì§‘ì¤‘í•´ì•¼ í•  í•œ í•´ì…ë‹ˆë‹¤. ì„ì‚¬ë…„ì˜ ë±€ì€ ì§€í˜œì˜ ìƒì§•ìœ¼ë¡œ, ë‹¹ì‹ ì—ê²Œ ìƒˆë¡œìš´ ì§€ì‹ê³¼ ê¸°ìˆ ì„ ìŠµë“í•  ê¸°íšŒë¥¼ ê°€ì ¸ë‹¤ ì¤„ ê²ƒì…ë‹ˆë‹¤. êµìœ¡ íˆ¬ìë‚˜ ìê¸°ê³„ë°œì´ ë¯¸ë˜ì— í° ìì‚°ì´ ë  ê²ƒì…ë‹ˆë‹¤.',
            sectors: {
                career: 'ì „ë¬¸ì„± í–¥ìƒì„ ìœ„í•œ êµìœ¡ì´ë‚˜ ìê²©ì¦ ì·¨ë“ì´ ë„ì›€ë©ë‹ˆë‹¤. ìƒˆë¡œìš´ ê¸°ìˆ ì„ ë°°ìš°ê±°ë‚˜ í•´ì™¸ ì—°ìˆ˜ ê¸°íšŒê°€ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                love: 'ì§€ì ì¸ ëŒ€í™”ë¥¼ ë‚˜ëˆŒ ìˆ˜ ìˆëŠ” ìƒëŒ€ë°©ê³¼ ì¢‹ì€ ì¸ì—°ì´ ë©ë‹ˆë‹¤. í•¨ê»˜ ë°°ìš°ê³  ì„±ì¥í•  ìˆ˜ ìˆëŠ” ê´€ê³„ê°€ ë°œì „í•  ê²ƒì…ë‹ˆë‹¤.',
                health: 'ì •ì‹ ì  ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤. ëª…ìƒì´ë‚˜ ìš”ê°€ ë“± ë§ˆìŒì˜ í‰ì •ì„ ì°¾ëŠ” í™œë™ì´ ë„ì›€ì´ ë©ë‹ˆë‹¤.',
                money: 'êµìœ¡ë¹„ë‚˜ ìê¸°ê³„ë°œ íˆ¬ìë¥¼ ì•„ë¼ì§€ ë§ˆì„¸ìš”. ë‹¹ì¥ì€ ì§€ì¶œì´ì§€ë§Œ ì¥ê¸°ì ìœ¼ë¡œ í° ìˆ˜ìµìœ¼ë¡œ ëŒì•„ì˜¬ ê²ƒì…ë‹ˆë‹¤.'
            },
            luckyPeriods: '2ì›”, 6ì›”, 9ì›”',
            cautions: 'ë„ˆë¬´ ë§ì€ ê²ƒì„ í•œêº¼ë²ˆì— ë°°ìš°ë ¤ í•˜ì§€ ë§ˆì„¸ìš”. ìš°ì„ ìˆœìœ„ë¥¼ ì •í•˜ê³  ë‹¨ê³„ì ìœ¼ë¡œ ì ‘ê·¼í•˜ì„¸ìš”.',
            advice: 'ë°°ì›€ì— ì¸ìƒ‰í•˜ì§€ ë§ˆì„¸ìš”. ì§€ê¸ˆ íˆ¬ìí•œ ì‹œê°„ê³¼ ë…¸ë ¥ì´ ë¯¸ë˜ì˜ ê°€ì¥ í° ìì‚°ì´ ë©ë‹ˆë‹¤. í˜¸ê¸°ì‹¬ì„ ìƒì§€ ë§ê³  ê³„ì† ë„ì „í•˜ì„¸ìš”.',
            keywords: ['í•™ìŠµ', 'ì„±ì¥', 'ì§€ì‹', 'ë°œì „']
        },
        {
            name: 'ì¸ê°„ê´€ê³„ í™•ì¥ì˜ í•´',
            icon: 'ğŸ¤',
            summary: 'ìƒˆë¡œìš´ ì‚¬ëŒë“¤ê³¼ì˜ ë§Œë‚¨ì´ ë§ì•„ì§€ê³  ê¸°ì¡´ ê´€ê³„ê°€ ë”ìš± ëˆë…í•´ì§€ëŠ” í•´ì…ë‹ˆë‹¤.',
            description: '2025ë…„ì€ ì¸ê°„ê´€ê³„ì˜ í­ì´ í¬ê²Œ ë„“ì–´ì§€ëŠ” í•œ í•´ê°€ ë  ê²ƒì…ë‹ˆë‹¤. ë±€ì˜ ì‚¬êµì  ë©´ëª¨ê°€ ë‹¹ì‹ ì˜ ë§¤ë ¥ì„ ë‹ë³´ì´ê²Œ í•˜ê³ , ë‹¤ì–‘í•œ ë¶„ì•¼ì˜ ì‚¬ëŒë“¤ê³¼ ì˜ë¯¸ ìˆëŠ” ê´€ê³„ë¥¼ ë§ºì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë„¤íŠ¸ì›Œí‚¹ì´ ìƒˆë¡œìš´ ê¸°íšŒë¡œ ì´ì–´ì§ˆ ê²ƒì…ë‹ˆë‹¤.',
            sectors: {
                career: 'íŒ€ì›Œí¬ì™€ í˜‘ì—…ì—ì„œ í° ì„±ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë™ë£Œë“¤ê³¼ì˜ ê´€ê³„ê°€ ì—…ë¬´ ì„±ê³µì˜ ì—´ì‡ ê°€ ë©ë‹ˆë‹¤.',
                love: 'ì¹œêµ¬ì˜ ì†Œê°œë¡œ ì¢‹ì€ ì¸ì—°ì„ ë§Œë‚  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. ì‚¬êµ ëª¨ì„ì—ì„œ íŠ¹ë³„í•œ ë§Œë‚¨ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                health: 'ì‚¬êµ í™œë™ì´ ë§ì•„ì ¸ í”¼ë¡œê°€ ëˆ„ì ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì ì ˆí•œ íœ´ì‹ê³¼ ê±´ê°•ê´€ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.',
                money: 'ê³µë™ íˆ¬ìë‚˜ íŒŒíŠ¸ë„ˆì‹­ì—ì„œ ìˆ˜ìµì´ ê¸°ëŒ€ë©ë‹ˆë‹¤. ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” íŒŒíŠ¸ë„ˆì™€ì˜ í˜‘ë ¥ì´ ì„±ê³µì„ ê°€ì ¸ì˜¬ ê²ƒì…ë‹ˆë‹¤.'
            },
            luckyPeriods: '1ì›”, 5ì›”, 10ì›”',
            cautions: 'ëª¨ë“  ì‚¬ëŒì„ ë‹¤ ë§Œì¡±ì‹œí‚¤ë ¤ í•˜ì§€ ë§ˆì„¸ìš”. ì§„ì •ì„± ìˆëŠ” ê´€ê³„ì— ì§‘ì¤‘í•˜ì„¸ìš”.',
            advice: 'ì‚¬ëŒì„ ì†Œì¤‘íˆ ì—¬ê¸°ê³  ì§„ì •ì„± ìˆê²Œ ëŒ€í•˜ì„¸ìš”. ë‹¹ì‹ ì´ ë¨¼ì € ë„ì›€ì„ ë² í’€ë©´ ë” í° ë„ì›€ì´ ëŒì•„ì˜¬ ê²ƒì…ë‹ˆë‹¤.',
            keywords: ['ì¸ë§¥', 'ì†Œí†µ', 'í˜‘ë ¥', 'ì‹ ë¢°']
        },
        {
            name: 'ì•ˆì •ê³¼ ì •ì°©ì˜ í•´',
            icon: 'ğŸ ',
            summary: 'ê·¸ë™ì•ˆì˜ ë…¸ë ¥ì´ ì•ˆì •ì ì¸ ê¸°ë°˜ìœ¼ë¡œ ìë¦¬ì¡ëŠ” í•´ì…ë‹ˆë‹¤.',
            description: '2025ë…„ì€ ì•ˆì •ê³¼ ì •ì°©ì— ì§‘ì¤‘í•´ì•¼ í•  í•œ í•´ì…ë‹ˆë‹¤. ì„ì‚¬ë…„ì˜ í†  ê¸°ìš´ì´ ë‹¹ì‹ ì—ê²Œ ê²¬ê³ í•œ ê¸°ë°˜ì„ ë§ˆë ¨í•´ì£¼ê³ , ì¬ì •ê³¼ ê±´ê°• ëª¨ë“  ë©´ì—ì„œ ì•ˆì •ê°ì„ ê°€ì ¸ë‹¤ ì¤„ ê²ƒì…ë‹ˆë‹¤. ê¸‰í•œ ë³€í™”ë³´ë‹¤ëŠ” í˜„ì¬ë¥¼ ë”ìš± ê²¬ê³ íˆ í•˜ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤.',
            sectors: {
                career: 'í˜„ì¬ ë§¡ì€ ì¼ì— ì¶©ì‹¤í•˜ë©° ì „ë¬¸ì„±ì„ ê¹Šê²Œ íŒŒëŠ” ê²ƒì´ ìœ ë¦¬í•©ë‹ˆë‹¤. ì•ˆì •ì ì¸ ì„±ê³¼ë¡œ ì‹ ë¢°ë¥¼ ìŒ“ì•„ê°€ì„¸ìš”.',
                love: 'ì§„ì§€í•œ ê´€ê³„ë¡œ ë°œì „í•˜ê±°ë‚˜ ê²°í˜¼ì„ ìƒê°í•´ë³¼ ì¢‹ì€ ì‹œê¸°ì…ë‹ˆë‹¤. ì•ˆì •ì ì´ê³  ì„±ìˆ™í•œ ì‚¬ë‘ì´ ê¸°ë‹¤ë¦¬ê³  ìˆìŠµë‹ˆë‹¤.',
                health: 'ê·œì¹™ì ì¸ ìƒí™œ íŒ¨í„´ì„ ìœ ì§€í•˜ë©´ ê±´ê°•ì´ í¬ê²Œ ì¢‹ì•„ì§‘ë‹ˆë‹¤. ê¾¸ì¤€í•œ ìš´ë™ê³¼ ê· í˜•ì¡íŒ ì‹ë‹¨ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.',
                money: 'ì €ì¶•ê³¼ ì•ˆì •ì ì¸ íˆ¬ìë¡œ ìì‚°ì„ ê¾¸ì¤€íˆ ëŠ˜ë ¤ê°€ì„¸ìš”. ë¶€ë™ì‚° íˆ¬ìë¥¼ ê³ ë ¤í•´ë³¼ ë§Œí•œ ì‹œê¸°ì…ë‹ˆë‹¤.'
            },
            luckyPeriods: '4ì›”, 8ì›”, 12ì›”',
            cautions: 'ì•ˆì£¼í•˜ì§€ ë§ê³  ê¾¸ì¤€í•œ ë°œì „ì„ ì¶”êµ¬í•˜ì„¸ìš”. í˜„ìƒìœ ì§€ë§Œìœ¼ë¡œëŠ” ë’¤ì²˜ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
            advice: 'ê¸‰í•˜ê²Œ ë³€í™”ë¥¼ ì¶”êµ¬í•˜ê¸°ë³´ë‹¤ëŠ” í˜„ì¬ë¥¼ ê²¬ê³ íˆ í•˜ëŠ”ë° ì§‘ì¤‘í•˜ì„¸ìš”. ê¸°ì´ˆê°€ íƒ„íƒ„í•´ì•¼ ë” ë†’ì´ ì˜¬ë¼ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
            keywords: ['ì•ˆì •', 'ê¸°ë°˜', 'ì •ì°©', 'ì„±ìˆ™']
        },
        {
            name: 'ì „í™˜ê³¼ ë³€í™”ì˜ í•´',
            icon: 'ğŸ”„',
            summary: 'ì¸ìƒì˜ ì¤‘ìš”í•œ ì „í™˜ì ì´ ë˜ëŠ” í•´ì…ë‹ˆë‹¤.',
            description: '2025ë…„ì€ ë‹¹ì‹  ì¸ìƒì˜ ì¤‘ìš”í•œ ì „í™˜ì ì´ ë˜ëŠ” í•œ í•´ì…ë‹ˆë‹¤. ë±€ì´ í—ˆë¬¼ì„ ë²—ë“¯ì´, ë‹¹ì‹ ë„ ê³¼ê±°ì˜ ë‚¡ì€ ëª¨ìŠµì„ ë²—ê³  ìƒˆë¡œìš´ ëª¨ìŠµìœ¼ë¡œ ê±°ë“­ë‚  ê²ƒì…ë‹ˆë‹¤. ë³€í™”ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ë§ê³  ì ê·¹ì ìœ¼ë¡œ ë°›ì•„ë“¤ì´ì„¸ìš”.',
            sectors: {
                career: 'ì—…ì¢… ë³€ê²½ì´ë‚˜ ìƒˆë¡œìš´ ë¶„ì•¼ ì§„ì¶œì„ ê³ ë ¤í•´ë³¼ ì‹œê¸°ì…ë‹ˆë‹¤. ê³¼ê°í•œ ë„ì „ì´ ì„±ê³µìœ¼ë¡œ ì´ì–´ì§ˆ ê²ƒì…ë‹ˆë‹¤.',
                love: 'ê¸°ì¡´ ê´€ê³„ì˜ ë³€í™”ë‚˜ ìƒˆë¡œìš´ ì‹œì‘ì´ ì˜ˆìƒë©ë‹ˆë‹¤. ìš´ëª…ì ì¸ ë§Œë‚¨ì´ë‚˜ ì¤‘ìš”í•œ ê²°ì •ì˜ ì‹œê¸°ê°€ ë  ê²ƒì…ë‹ˆë‹¤.',
                health: 'ìƒí™œ íŒ¨í„´ì˜ ë³€í™”ê°€ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ì™€ ì¶©ë¶„í•œ íœ´ì‹ìœ¼ë¡œ ë³€í™”ì— ì ì‘í•˜ì„¸ìš”.',
                money: 'íˆ¬ì í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ì¬ê²€í† í•˜ê³  ìƒˆë¡œìš´ íˆ¬ìì²˜ë¥¼ ëª¨ìƒ‰í•´ë³´ì„¸ìš”. ë³€í™”í•˜ëŠ” ì‹œì¥ì— ë°œë§ì¶° ë‚˜ê°€ì•¼ í•©ë‹ˆë‹¤.'
            },
            luckyPeriods: '3ì›”, 7ì›”, 10ì›”',
            cautions: 'ê¸‰ê²©í•œ ë³€í™”ë³´ë‹¤ëŠ” ë‹¨ê³„ì ì¸ ì „í™˜ì„ ì¶”êµ¬í•˜ì„¸ìš”. ì¶©ë¶„í•œ ì¤€ë¹„ì™€ ê³„íšì´ í•„ìš”í•©ë‹ˆë‹¤.',
            advice: 'ë³€í™”ë¥¼ ë°›ì•„ë“¤ì´ê³  ì ì‘í•˜ëŠ” ìœ ì—°ì„±ì´ í•„ìš”í•©ë‹ˆë‹¤. ëì€ ìƒˆë¡œìš´ ì‹œì‘ì„ì„ ìŠì§€ ë§ˆì„¸ìš”.',
            keywords: ['ì „í™˜', 'ë³€í™”', 'ìƒˆì¶œë°œ', 'í˜ì‹ ']
        },
        {
            name: 'íœ´ì‹ê³¼ ì¶©ì „ì˜ í•´',
            icon: 'ğŸ§˜',
            summary: 'ê·¸ë™ì•ˆ ìŒ“ì¸ í”¼ë¡œë¥¼ í’€ê³  ì—ë„ˆì§€ë¥¼ ì¶©ì „í•˜ëŠ” í•´ì…ë‹ˆë‹¤.',
            description: '2025ë…„ì€ ëª¸ê³¼ ë§ˆìŒì˜ ê±´ê°•ì„ ìµœìš°ì„ ìœ¼ë¡œ í•´ì•¼ í•  í•œ í•´ì…ë‹ˆë‹¤. ì„ì‚¬ë…„ì˜ ì°¨ë¶„í•œ ì—ë„ˆì§€ê°€ ë‹¹ì‹ ì—ê²Œ íœ´ì‹ê³¼ íšŒë³µì˜ ì‹œê°„ì„ ì„ ì‚¬í•  ê²ƒì…ë‹ˆë‹¤. ë¬´ë¦¬í•˜ì§€ ë§ê³  ìì‹ ì„ ëŒë³´ëŠ” ì‹œê°„ì„ ê°€ì§€ì„¸ìš”.',
            sectors: {
                career: 'í˜„ìƒ ìœ ì§€í•˜ë©° ì²´ë ¥ê³¼ ì—ë„ˆì§€ë¥¼ ë¹„ì¶•í•˜ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. í° ë„ì „ë³´ë‹¤ëŠ” ì•ˆì •ì ì¸ ì„±ê³¼ì— ì§‘ì¤‘í•˜ì„¸ìš”.',
                love: 'ì—¬ìœ ë¡œìš´ ë§ˆìŒìœ¼ë¡œ ìƒëŒ€ë°©ì„ ë°°ë ¤í•˜ë©° ê´€ê³„ë¥¼ ìœ ì§€í•˜ì„¸ìš”. í•¨ê»˜ íœ´ì‹ì„ ì·¨í•  ìˆ˜ ìˆëŠ” ì‹œê°„ì„ ëŠ˜ë¦¬ì„¸ìš”.',
                health: 'ì •ê¸° ê±´ê°•ê²€ì§„ê³¼ ìƒí™œ ìŠµê´€ ê°œì„ ì— ì‹ ê²½ì“°ì„¸ìš”. ëª¸ì˜ ì‹ í˜¸ë¥¼ ì˜ ë“¤ì–´ë³´ê³  ë¬´ë¦¬í•˜ì§€ ë§ˆì„¸ìš”.',
                money: 'í° ì§€ì¶œì€ í”¼í•˜ê³  ì•ˆì •ì ì¸ ê´€ë¦¬ì— ì§‘ì¤‘í•˜ì„¸ìš”. ê±´ê°• ê´€ë ¨ íˆ¬ìëŠ” ì•„ë¼ì§€ ë§ˆì„¸ìš”.'
            },
            luckyPeriods: '2ì›”, 6ì›”, 11ì›”',
            cautions: 'ë„ˆë¬´ ê²Œìœ¼ë¥´ì§€ ë§ê³  ì ë‹¹í•œ í™œë™ëŸ‰ì„ ìœ ì§€í•˜ì„¸ìš”. ì™„ì „í•œ ì •ì²´ëŠ” ì˜¤íˆë ¤ ë…ì´ ë©ë‹ˆë‹¤.',
            advice: 'ëª¸ê³¼ ë§ˆìŒì˜ ê±´ê°•ì„ ìµœìš°ì„ ìœ¼ë¡œ í•˜ì„¸ìš”. íœ´ì‹ë„ ìƒì‚°ì ì¸ í™œë™ì…ë‹ˆë‹¤. ì—ë„ˆì§€ë¥¼ ì¶©ì „í•´ì•¼ ë” ë©€ë¦¬ ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
            keywords: ['íœ´ì‹', 'ê±´ê°•', 'íšŒë³µ', 'ì¬ì¶©ì „']
        },
        {
            name: 'ì°½ì¡°ì™€ í˜ì‹ ì˜ í•´',
            icon: 'ğŸ’¡',
            summary: 'ì°½ì˜ì  ì•„ì´ë””ì–´ê°€ ìƒ˜ì†Ÿê³  í˜ì‹ ì ì¸ ì‹œë„ì—ì„œ ì„±ê³µí•˜ëŠ” í•´ì…ë‹ˆë‹¤.',
            description: '2025ë…„ì€ ì°½ì˜ë ¥ì´ í­ë°œí•˜ëŠ” í•œ í•´ê°€ ë  ê²ƒì…ë‹ˆë‹¤. ë±€ì˜ ì§€í˜œë¡œìš´ ì§ê°ì´ ë‹¹ì‹ ì—ê²Œ í˜ì‹ ì ì¸ ì•„ì´ë””ì–´ë¥¼ ì„ ì‚¬í•˜ê³ , ë‚¨ë“¤ì´ ìƒê°í•˜ì§€ ëª»í•œ ìƒˆë¡œìš´ ë°©ë²•ìœ¼ë¡œ ì„±ê³µì„ ê±°ë‘˜ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
            sectors: {
                career: 'R&D, ê¸°íš, ì°½ì‘ ë¶„ì•¼ì—ì„œ ë‘ê°ì„ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í˜ì‹ ì ì¸ ì•„ì´ë””ì–´ë¡œ ì¸ì •ë°›ì„ ê²ƒì…ë‹ˆë‹¤.',
                love: 'ë…íŠ¹í•˜ê³  ë§¤ë ¥ì ì¸ ìƒëŒ€ë°©ê³¼ì˜ ì¸ì—°ì´ ê¸°ëŒ€ë©ë‹ˆë‹¤. ì°½ì˜ì ì¸ ë°ì´íŠ¸ë‚˜ íŠ¹ë³„í•œ ì´ë²¤íŠ¸ë¡œ ê´€ê³„ê°€ ë°œì „í•  ê²ƒì…ë‹ˆë‹¤.',
                health: 'ì°½ì¡°ì  í™œë™ì„ í†µí•´ ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ í•´ì†Œí•˜ì„¸ìš”. ì˜ˆìˆ ì´ë‚˜ ì·¨ë¯¸ í™œë™ì´ ì •ì‹  ê±´ê°•ì— ë„ì›€ì´ ë©ë‹ˆë‹¤.',
                money: 'ìƒˆë¡œìš´ ìˆ˜ìµì› ê°œë°œì´ë‚˜ ì°½ì—…ì„ ê³ ë ¤í•´ë³¼ ì‹œê¸°ì…ë‹ˆë‹¤. ë…ì°½ì ì¸ ì•„ì´ë””ì–´ê°€ ëˆì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.'
            },
            luckyPeriods: '1ì›”, 5ì›”, 9ì›”',
            cautions: 'ë„ˆë¬´ ê¸‰ì§„ì ì´ì§€ ë§ê³  ì ì§„ì ì¸ í˜ì‹ ì„ ì¶”êµ¬í•˜ì„¸ìš”. ì‹œì¥ì˜ ë°˜ì‘ì„ ì‚´í´ê°€ë©° ì§„í–‰í•˜ì„¸ìš”.',
            advice: 'ìƒˆë¡œìš´ ì‹œê°ìœ¼ë¡œ ë¬¸ì œë¥¼ ë°”ë¼ë³´ê³  ì°½ì˜ì  í•´ê²°ë°©ì•ˆì„ ëª¨ìƒ‰í•˜ì„¸ìš”. ë‚¨ë“¤ê³¼ ë‹¤ë¥¸ ê¸¸ì´ ì„±ê³µì˜ ì§€ë¦„ê¸¸ì…ë‹ˆë‹¤.',
            keywords: ['ì°½ì˜', 'í˜ì‹ ', 'ì•„ì´ë””ì–´', 'ë…ì°½ì„±']
        },
        {
            name: 'ë¦¬ë”ì‹­ ë°œíœ˜ì˜ í•´',
            icon: 'ğŸ‘‘',
            summary: 'íƒ€ê³ ë‚œ ë¦¬ë”ì‹­ì„ ë°œíœ˜í•˜ì—¬ ì£¼ë³€ì„ ì´ëŒì–´ê°€ëŠ” í•´ì…ë‹ˆë‹¤.',
            description: '2025ë…„ì€ ë‹¹ì‹ ì˜ ë¦¬ë”ì‹­ì´ ë¹›ì„ ë°œí•˜ëŠ” í•œ í•´ê°€ ë  ê²ƒì…ë‹ˆë‹¤. ì„ì‚¬ë…„ ë±€ì˜ ì¹´ë¦¬ìŠ¤ë§ˆê°€ ë‹¹ì‹ ì˜ ì§€ë„ë ¥ì„ í•œì¸µ ê°•í™”ì‹œí‚¤ê³ , ë§ì€ ì‚¬ëŒë“¤ì´ ë‹¹ì‹ ì„ ë”°ë¥´ê²Œ ë  ê²ƒì…ë‹ˆë‹¤.',
            sectors: {
                career: 'ê´€ë¦¬ì§ìœ¼ë¡œì˜ ìŠ¹ì§„ì´ë‚˜ í”„ë¡œì íŠ¸ ë¦¬ë” ì—­í• ì´ ê¸°ëŒ€ë©ë‹ˆë‹¤. íŒ€ì„ ì´ë„ëŠ” ëŠ¥ë ¥ì´ ì¸ì •ë°›ì„ ê²ƒì…ë‹ˆë‹¤.',
                love: 'ê´€ê³„ì—ì„œ ì£¼ë„ê¶Œì„ ê°–ë˜ ìƒëŒ€ë°©ì„ ë°°ë ¤í•˜ëŠ” ë§ˆìŒì„ ìŠì§€ ë§ˆì„¸ìš”. ì„±ìˆ™í•œ ë¦¬ë”ì‹­ìœ¼ë¡œ ê´€ê³„ë¥¼ ì´ëŒì–´ê°€ì„¸ìš”.',
                health: 'ì±…ì„ê°ì´ ë§ì•„ì ¸ ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ì¦ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì ì ˆí•œ ìš´ë™ìœ¼ë¡œ ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ í•´ì†Œí•˜ì„¸ìš”.',
                money: 'íˆ¬ì ê²°ì •ì—ì„œ ì‹ ì¤‘í•¨ê³¼ ê³¼ê°í•¨ì˜ ê· í˜•ì´ í•„ìš”í•©ë‹ˆë‹¤. ë¦¬ë”ì‹­ì„ ë°œíœ˜í•´ ì¢‹ì€ íˆ¬ìì²˜ë¥¼ ì°¾ì•„ë³´ì„¸ìš”.'
            },
            luckyPeriods: '3ì›”, 8ì›”, 12ì›”',
            cautions: 'ë…ë‹¨ì ì´ì§€ ë§ê³  íŒ€ì›ë“¤ì˜ ì˜ê²¬ë„ ê²½ì²­í•˜ì„¸ìš”. ì§„ì •í•œ ë¦¬ë”ëŠ” ì†Œí†µí•˜ëŠ” ë¦¬ë”ì…ë‹ˆë‹¤.',
            advice: 'ì†”ì„ ìˆ˜ë²”í•˜ë©° ë‹¤ë¥¸ ì‚¬ëŒë“¤ì—ê²Œ ëª¨ë²”ì´ ë˜ì–´ì£¼ì„¸ìš”. ì§„ì •í•œ ë¦¬ë”ëŠ” ì„¬ê¸°ëŠ” ìì„ì„ ìŠì§€ ë§ˆì„¸ìš”.',
            keywords: ['ë¦¬ë”ì‹­', 'ì±…ì„ê°', 'ì¹´ë¦¬ìŠ¤ë§ˆ', 'í†µì†”ë ¥']
        },
        {
            name: 'ì¡°í™”ì™€ í˜‘ë ¥ì˜ í•´',
            icon: 'ğŸ¤²',
            summary: 'í˜¼ìë³´ë‹¤ëŠ” í•¨ê»˜í•  ë•Œ ë” í° í˜ì„ ë°œíœ˜í•˜ëŠ” í•´ì…ë‹ˆë‹¤.',
            description: '2025ë…„ì€ í˜‘ë ¥ê³¼ ì¡°í™”ì˜ í˜ì„ ëŠë¼ëŠ” í•œ í•´ê°€ ë  ê²ƒì…ë‹ˆë‹¤. ë±€ì˜ ìœ ì—°í•¨ì´ ë‹¹ì‹ ì—ê²Œ ë‹¤ë¥¸ ì‚¬ëŒê³¼ ì¡°í™”ë¥¼ ì´ë£¨ëŠ” ì§€í˜œë¥¼ ê°€ì ¸ë‹¤ ì£¼ê³ , íŒ€ì›Œí¬ë¥¼ í†µí•´ ê°œì¸ìœ¼ë¡œëŠ” ë¶ˆê°€ëŠ¥í•œ ì„±ê³¼ë¥¼ ê±°ë‘˜ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
            sectors: {
                career: 'íŒ€ í”„ë¡œì íŠ¸ë‚˜ íŒŒíŠ¸ë„ˆì‹­ì—ì„œ í° ì„±ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í˜‘ì—… ëŠ¥ë ¥ì´ ì„±ê³µì˜ ì—´ì‡ ê°€ ë©ë‹ˆë‹¤.',
                love: 'ìƒí˜¸ ì¡´ì¤‘ê³¼ ì´í•´ë¥¼ ë°”íƒ•ìœ¼ë¡œ í•œ ê´€ê³„ê°€ ë°œì „í•©ë‹ˆë‹¤. í•¨ê»˜ ì„±ì¥í•˜ëŠ” íŒŒíŠ¸ë„ˆì‹­ì´ í˜•ì„±ë  ê²ƒì…ë‹ˆë‹¤.',
                health: 'ê·œì¹™ì ì¸ ìƒí™œê³¼ ì ë‹¹í•œ ì‚¬íšŒ í™œë™ì´ ë„ì›€ë©ë‹ˆë‹¤. í˜¼ìë§Œì˜ ì‹œê°„ê³¼ ì‚¬êµ ì‹œê°„ì˜ ê· í˜•ì„ ë§ì¶”ì„¸ìš”.',
                money: 'ê³µë™ íˆ¬ìë‚˜ í˜‘ë ¥ ì‚¬ì—…ì—ì„œ ìˆ˜ìµ ê¸°íšŒê°€ ìˆìŠµë‹ˆë‹¤. ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” íŒŒíŠ¸ë„ˆì™€ í•¨ê»˜ í•˜ì„¸ìš”.'
            },
            luckyPeriods: '4ì›”, 7ì›”, 11ì›”',
            cautions: 'ìì‹ ì˜ ì˜ê²¬ë„ ì ì ˆíˆ í‘œí˜„í•˜ë©° ê· í˜•ì„ ìœ ì§€í•˜ì„¸ìš”. ì¼ë°©ì ì¸ ì–‘ë³´ë§Œìœ¼ë¡œëŠ” ì¢‹ì€ ê´€ê³„ê°€ ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
            advice: 'ë‹¤ë¥¸ ì‚¬ëŒê³¼ì˜ í˜‘ë ¥ì„ í†µí•´ ì‹œë„ˆì§€ë¥¼ ì°½ì¶œí•˜ì„¸ìš”. ê²¸ì†í•¨ì´ ì„±ê³µì˜ ì—´ì‡ ì…ë‹ˆë‹¤.',
            keywords: ['í˜‘ë ¥', 'ì¡°í™”', 'íŒ€ì›Œí¬', 'ê· í˜•']
        },
        {
            name: 'ë„ì „ê³¼ ëª¨í—˜ì˜ í•´',
            icon: 'ğŸ¯',
            summary: 'ìƒˆë¡œìš´ ë„ì „ì— ê³¼ê°íˆ ë‚˜ì„œë©° ëª¨í—˜ì •ì‹ ì„ ë°œíœ˜í•˜ëŠ” í•´ì…ë‹ˆë‹¤.',
            description: '2025ë…„ì€ ëª¨í—˜ê³¼ ë„ì „ì˜ í•œ í•´ê°€ ë  ê²ƒì…ë‹ˆë‹¤. ì„ì‚¬ë…„ ë±€ì˜ ê³¼ê°í•¨ì´ ë‹¹ì‹ ì—ê²Œ ìƒˆë¡œìš´ ì˜ì—­ì— ë„ì „í•  ìš©ê¸°ë¥¼ ì£¼ê³ , ìœ„í—˜ì„ ê°ìˆ˜í•˜ë”ë¼ë„ ë” í° ì„±ì·¨ë¥¼ ì´ë£° ìˆ˜ ìˆê²Œ í•´ì¤„ ê²ƒì…ë‹ˆë‹¤.',
            sectors: {
                career: 'ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë‚˜ í•´ì™¸ ì§„ì¶œì˜ ê¸°íšŒê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê³¼ê°í•œ ë„ì „ì´ í° ì„±ê³µìœ¼ë¡œ ì´ì–´ì§ˆ ê²ƒì…ë‹ˆë‹¤.',
                love: 'ìƒˆë¡œìš´ í™˜ê²½ì—ì„œ ì˜ˆìƒì¹˜ ëª»í•œ ë§Œë‚¨ì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª¨í—˜ì ì¸ ë°ì´íŠ¸ë‚˜ ì—¬í–‰ì—ì„œ ì‚¬ë‘ì´ ì‹¹í‹€ ê²ƒì…ë‹ˆë‹¤.',
                health: 'í™œë™ëŸ‰ì´ ë§ì•„ì§€ë‹ˆ ë¶€ìƒ ë°©ì§€ì— ì£¼ì˜í•˜ì„¸ìš”. ìƒˆë¡œìš´ ìŠ¤í¬ì¸ ë‚˜ ìš´ë™ì„ ì‹œì‘í•˜ê¸° ì¢‹ì€ ì‹œê¸°ì…ë‹ˆë‹¤.',
                money: 'ê³ ìœ„í—˜ ê³ ìˆ˜ìµ íˆ¬ìì—ì„œ ê¸°íšŒê°€ ìˆì§€ë§Œ ì‹ ì¤‘í•˜ê²Œ ì ‘ê·¼í•˜ì„¸ìš”. ëª¨í—˜ì  íˆ¬ìëŠ” ì—¬ìœ  ìê¸ˆìœ¼ë¡œë§Œ í•˜ì„¸ìš”.'
            },
            luckyPeriods: '2ì›”, 6ì›”, 10ì›”',
            cautions: 'ë¬´ëª¨í•œ ë„ì „ë³´ë‹¤ëŠ” ì¤€ë¹„ëœ ëª¨í—˜ì„ í•˜ì„¸ìš”. ìœ„í—˜ ê´€ë¦¬ë¥¼ ì² ì €íˆ í•˜ê³  ë„ì „í•˜ì„¸ìš”.',
            advice: 'ê³„ì‚°ëœ ìœ„í—˜ì„ ê°ìˆ˜í•˜ë©° ìƒˆë¡œìš´ ì˜ì—­ì— ë„ì „í•´ë³´ì„¸ìš”. ì‹œë„í•˜ì§€ ì•Šìœ¼ë©´ ì„±ê³µë„ ì—†ìŠµë‹ˆë‹¤.',
            keywords: ['ë„ì „', 'ëª¨í—˜', 'ìš©ê¸°', 'ê°œì²™']
        },
        {
            name: 'ì™„ì„±ê³¼ ì„±ì·¨ì˜ í•´',
            icon: 'ğŸ†',
            summary: 'ì˜¤ë«ë™ì•ˆ ì¶”ì§„í•´ì˜¨ ì¼ë“¤ì´ ë§ˆë¬´ë¦¬ë˜ë©° ì„±ê³¼ë¥¼ ê±°ë‘ëŠ” í•´ì…ë‹ˆë‹¤.',
            description: '2025ë…„ì€ ê·¸ë™ì•ˆì˜ ëª¨ë“  ë…¸ë ¥ì´ ê²°ì‹¤ì„ ë§ºëŠ” í•œ í•´ê°€ ë  ê²ƒì…ë‹ˆë‹¤. ì„ì‚¬ë…„ì˜ ì™„ì„± ì—ë„ˆì§€ê°€ ë‹¹ì‹ ì˜ í”„ë¡œì íŠ¸ë“¤ì„ ì„±ê³µì ìœ¼ë¡œ ë§ˆë¬´ë¦¬í•˜ê²Œ í•˜ê³ , ëª©í‘œí–ˆë˜ ì„±ê³¼ë¥¼ ì¶©ë¶„íˆ ê±°ë‘˜ ìˆ˜ ìˆê²Œ í•´ì¤„ ê²ƒì…ë‹ˆë‹¤.',
            sectors: {
                career: 'í”„ë¡œì íŠ¸ ì™„ë£Œë‚˜ ëª©í‘œ ë‹¬ì„±ìœ¼ë¡œ í¬ê²Œ ì¸ì •ë°›ì„ ê²ƒì…ë‹ˆë‹¤. ìŠ¹ì§„ì´ë‚˜ í¬ìƒì˜ ê¸°íšŒê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                love: 'ê´€ê³„ê°€ ì•ˆì •ë˜ê³  ë”ìš± ê¹Šì–´ì§€ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ê²°í˜¼ì´ë‚˜ ì•½í˜¼ ë“± ì¤‘ìš”í•œ ê²°ì •ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
                health: 'ê·¸ë™ì•ˆì˜ ê±´ê°•ê´€ë¦¬ ë…¸ë ¥ì´ ê²°ì‹¤ì„ ë§ºìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì„±ì·¨ í›„ ê¸´ì¥ì´ í’€ë ¤ ê´€ë¦¬ê°€ ì†Œí™€í•´ì§€ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”.',
                money: 'íˆ¬ì ìˆ˜ìµ ì‹¤í˜„ì´ë‚˜ í° ê±°ë˜ ì„±ì‚¬ê°€ ê¸°ëŒ€ë©ë‹ˆë‹¤. ì¬ì • ëª©í‘œ ë‹¬ì„±ìœ¼ë¡œ ê²½ì œì  ì•ˆì •ì„ í™•ë³´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.'
            },
            luckyPeriods: '1ì›”, 8ì›”, 12ì›”',
            cautions: 'ì„±ì·¨ì— ë§Œì¡±í•˜ì§€ ë§ê³  ë‹¤ìŒ ëª©í‘œë¥¼ ì¤€ë¹„í•˜ì„¸ìš”. ì™„ì„±ì€ ëì´ ì•„ë‹ˆë¼ ìƒˆë¡œìš´ ì‹œì‘ì…ë‹ˆë‹¤.',
            advice: 'ë§ˆì§€ë§‰ê¹Œì§€ ìµœì„ ì„ ë‹¤í•˜ë©° ì™„ë²½í•œ ë§ˆë¬´ë¦¬ë¥¼ ì¶”êµ¬í•˜ì„¸ìš”. ëì´ ì¢‹ì•„ì•¼ ëª¨ë“  ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.',
            keywords: ['ì™„ì„±', 'ì„±ì·¨', 'ê²°ì‹¤', 'ëª©í‘œë‹¬ì„±']
        }
    ]
};

// ===== ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤ =====
function krShiShen(s=''){
    return Object.entries(SHISHEN_KR).reduce((t,[c,k])=>t.replaceAll(c,k), s||'');
}

function getCalMode(prefix){
    return document.getElementById(`${prefix}-cal-lunar`)?.checked ? 'lunar' : 'solar';
}

function getLeap(prefix){
    return !!document.getElementById(`${prefix}-leap`)?.checked;
}

function bindCalToggle(prefix){
    const solar = document.getElementById(`${prefix}-cal-solar`);
    const lunar = document.getElementById(`${prefix}-cal-lunar`);
    const leap = document.getElementById(`${prefix}-leap`);
    if(!leap) return;
    const sync = ()=>{
        leap.disabled = !lunar.checked;
        leap.parentElement.style.opacity = leap.disabled?0.5:1;
    };
    solar?.addEventListener('change', sync);
    lunar?.addEventListener('change', sync);
    sync();
}

function fmtSolar(solar){
    const y = solar.getYear(), m=String(solar.getMonth()).padStart(2,'0'), d=String(solar.getDay()).padStart(2,'0');
    return `${y}-${m}-${d}`;
}

function toSolarFromInput(dateStrRaw, timeStrRaw, mode='solar', isLeap=false){
    const dateStr = normalizeDateInput(dateStrRaw||'');
    const timeStr = normalizeTimeInput(timeStrRaw||'');
    if(!dateStr) throw new Error('ìƒë…„ì›”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”');
    const [y,m0,d] = dateStr.split('-').map(Number);
    let h=0, min=0, s=0;
    if (timeStr) {
        [h,min] = timeStr.split(':').map(Number);
    }
    if (mode === 'lunar'){
        const m = isLeap ? -Math.abs(m0) : Math.abs(m0);
        try{
            const ly = LunarYear.fromYear(y);
            const leapMonth = ly.getLeapMonth();
            if (isLeap && leapMonth !== Math.abs(m0)) {
                alert(`${y}ë…„ì—ëŠ” ìœ¤${String(m0).padStart(2,'0')}ì›”ì´ ì—†ìŠµë‹ˆë‹¤.`);
            }
        }catch(_){}
        const lunar = Lunar.fromYmdHms(y, m, d, h||0, min||0, s);
        return lunar.getSolar();
    }
    return Solar.fromYmdHms(y, m0, d, h||0, min||0, s);
}
// ===== ìŠ¤í”Œë˜ì‹œ í™”ë©´ ì²˜ë¦¬ (í†µí•©) =====
function hideSplash(){
    const splash = $('#splashScreen');
    const main = $('#mainContent');
    const nav = $('#bottomNav');
    console.log('ğŸš€ ìŠ¤í”Œë˜ì‹œ ìˆ¨ê¹€ ì‹œì‘...');
    if (splash) {
        splash.style.display = 'none';
        splash.classList.add('hidden');
    }
    if (main) {
        main.style.display = 'block';
        main.classList.add('show');
    }
    if (nav) {
        nav.style.display = 'flex';
        nav.classList.add('show');
    }
    // ì´ˆê¸° ë¼ìš°íŒ…
    if (!location.hash) location.hash = '#/home';
}
// ===== ë„¤ë¹„ê²Œì´ì…˜ ì‹œìŠ¤í…œ =====
const pages = {
    get home() { return document.getElementById('page-home'); },
    get fortune() { return document.getElementById('page-fortune'); },
    get chat() { return document.getElementById('page-chat'); },
    get me() { return document.getElementById('page-me'); }
};
function setActiveTab(tab){
    const mainContent = document.getElementById('mainContent');
    if (mainContent) mainContent.style.display = 'block';
    $$('.nav-item').forEach(n=>n.classList.toggle('active',n.dataset.tab===tab));
    Object.entries(pages).forEach(([k,el])=>el?.classList.toggle('show',k===tab));
    closeAllOverlays();
}
// ===== ìš´ì„¸ ë·° ì‹œìŠ¤í…œ =====
const fortuneTitle = $('#fortuneTitle');
const views = {
    'fortune-today': $('#view-today'),
    'fortune-saju' : $('#view-saju'),
    'fortune-tarot': $('#view-tarot'),
    'fortune-match': $('#view-match'),
    'fortune-year' : $('#view-year'),
    'fortune-lotto': $('#view-lotto')
};

function showFortuneView(route){
    closeAllOverlays();
    Object.values(views).forEach(v => v && (v.style.display = 'none'));
    switch (route) {
        case 'fortune-today':
            fortuneTitle.textContent = 'ì˜¤ëŠ˜ì˜ ìš´ì„¸';
            views['fortune-today'].style.display = 'block';
            bindCalToggle('today');
            break;
        case 'fortune-saju':
            fortuneTitle.textContent = 'ì •í†µ ì‚¬ì£¼';
            views['fortune-saju'].style.display = 'block';
            bindCalToggle('saju');
            break;
        case 'fortune-tarot':
            fortuneTitle.textContent = 'íƒ€ë¡œ ì ';
            views['fortune-tarot'].style.display = 'block';
            initializeTarot();
            break;
        case 'fortune-match':
            fortuneTitle.textContent = 'ê¶í•© ë³´ê¸°';
            views['fortune-match'].style.display = 'block';
            break;
        case 'fortune-year':
            fortuneTitle.textContent = 'ì‹ ë…„ ìš´ì„¸ (2025)';
            views['fortune-year'].style.display = 'block';
            break;
        case 'fortune-lotto':
            fortuneTitle.textContent = 'í–‰ìš´ë²ˆí˜¸';
            views['fortune-lotto'].style.display = 'block';
            break;
        default:
            fortuneTitle.textContent = 'ì¤€ë¹„ì¤‘';
            reactCrystal('âœ¨ ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤...');
            break;
    }
    reactCrystal(`${fortuneTitle.textContent}ì„(ë¥¼) ì¤€ë¹„í•©ë‹ˆë‹¤â€¦`);
}
// ===== í¬ë¦¬ìŠ¤íƒˆ êµ¬ìŠ¬ ì• ë‹ˆë©”ì´ì…˜ =====
const mainCrystal=$('#mainCrystal');
function reactCrystal(text){
    if(!mainCrystal) return;
    mainCrystal.style.background='radial-gradient(circle at 30% 30%, rgba(255,215,0,.9), rgba(255,20,147,.7), rgba(138,43,226,.5))';
    mainCrystal.innerHTML='ğŸ”®<br>ë¶„ì„ì¤‘...';
    setTimeout(()=> mainCrystal.innerHTML=text||'âœ¨ ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤...',800);
    setTimeout(()=>{
        mainCrystal.style.background='radial-gradient(circle at 30% 30%, rgba(255,255,255,.8), rgba(255,255,255,.3), transparent)';
        mainCrystal.innerHTML='êµ¬ìŠ¬ ì† ë¯¸ë˜ë¥¼<br>í™•ì¸í•´ë³´ì„¸ìš”';
    },2800);
}
mainCrystal?.addEventListener('click',()=>reactCrystal('ğŸ”® ì‹ ë¹„ë¡œìš´ í˜ì„ ëŠê»´ë³´ì„¸ìš”'));
// ===== ê²°ê³¼ ì‹œíŠ¸ ëª¨ë‹¬ =====
const sheet=$('#sheetBackdrop'), sheetTitle=$('#sheetTitle'), sheetContent=$('#sheetContent');
let lastResult=null;
function openSheet(title,content,savePayload){
    if(!sheet) return;
    sheetTitle.textContent=title;
    if (typeof content === 'string' && content.includes('<')) {
        sheetContent.innerHTML = content;
    } else {
        sheetContent.textContent = content?.toString?.() || '';
    }
    sheet.classList.add('show');
    lastResult=savePayload||null;
    // ì°¨íŠ¸ ì• ë‹ˆë©”ì´ì…˜ íŠ¸ë¦¬ê±°
    setTimeout(() => {
        $$('.element-fill').forEach(fill => {
            const width = fill.style.width;
            fill.style.width = '0%';
            setTimeout(() => fill.style.width = width, 100);
        });
    }, 300);
}

function closeSheet(){
    if(!sheet) return;
    sheet.classList.remove('show');
}
function closeAllOverlays(){
    try { closeSheet(); } catch(e){}
    try { closeTarotModal(); } catch(e){}
}
// ===== ìµœê·¼ ê²°ê³¼ ì €ì¥ =====
function pushRecent(item){
    const arr=JSON.parse(localStorage.getItem(LS_KEY)||"[]");
    arr.unshift({...item,ts:Date.now()});
    localStorage.setItem(LS_KEY,JSON.stringify(arr.slice(0,20)));
}
// ===== ë¼ìš°íŒ… ì‹œìŠ¤í…œ =====
function handleRoute() {
    const hash = location.hash || '#/home';
    const match = hash.match(/^#\/([^/]+)(?:\/([^/]+))?/);
    const tab = match?.[1] || 'home';
    const sub = match?.[2] || '';
    setActiveTab(tab);
    if (tab === 'fortune') {
        const viewMap = {
            'today': 'fortune-today',
            'saju': 'fortune-saju',
            'tarot': 'fortune-tarot',
            'match': 'fortune-match',
            'year': 'fortune-year',
            'lotto': 'fortune-lotto'
        };
        showFortuneView(viewMap[sub] || 'fortune-today');
    }
}
// ===== ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë“¤ =====
// 1. í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ ë°” í´ë¦­
$$('.nav-item[data-tab]').forEach(item => {
    item.addEventListener('click', () => {
        const tab = item.dataset.tab || 'home';
        location.hash = '#/' + tab;
        reactCrystal(`${tab} í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤! âœ¨`);
    });
});
// 2. ì„œë¹„ìŠ¤ ì¹´ë“œ í´ë¦­ (ìˆ˜ì •ëœ ë²„ì „)
$$('.service-item[data-route], .special-item[data-route]').forEach(card => {
    card.addEventListener('click', () => {
        const route = card.dataset.route || 'fortune-today';
        const view = route.replace('fortune-', '');
        location.hash = '#/fortune/' + view;
    });
});

// 3. ê¸€ë¡œë²Œ í´ë¦­ ìœ„ì„ (data-route ì²˜ë¦¬)
document.addEventListener('click', (e) => {
    const el = e.target.closest('[data-route]');
    if (!el) return;
    e.preventDefault();
    hideSplash();
    const route = el.dataset.route;
    if (route && route.startsWith('fortune-')) {
        const view = route.replace('fortune-', '');
        location.hash = '#/fortune/' + view;
    } else if (route) {
        location.hash = '#/' + route;
    }
});

// ===== ì‚¬ì£¼/ìš´ì„¸ ê³„ì‚° í•¨ìˆ˜ë“¤ =====
function computeBaZi(dateStrRaw, timeStrRaw, calMode='solar', isLeap=false) {
    const solar = toSolarFromInput(dateStrRaw, timeStrRaw, calMode, isLeap);
    const lunar = solar.getLunar();
    const ec = lunar.getEightChar();
    const pillars = {
        year: ec.getYear(),
        month: ec.getMonth(),
        day: ec.getDay(),
        time: ec.getTime()
    };
    const countsGan = { 'æœ¨':0,'ç«':0,'åœŸ':0,'é‡‘':0,'æ°´':0 };
    const countsZhi = { 'æœ¨':0,'ç«':0,'åœŸ':0,'é‡‘':0,'æ°´':0 };
    const countsAll = { 'æœ¨':0,'ç«':0,'åœŸ':0,'é‡‘':0,'æ°´':0 };
    [pillars.year, pillars.month, pillars.day, pillars.time].forEach(gz => {
        if(!gz) return;
        const gan = gz[0];
        const zhi = gz[gz.length-1];
        const elG = GAN_WUXING[gan];
        if(elG) {
            countsGan[elG] = (countsGan[elG] || 0) + 1;
            countsAll[elG] = (countsAll[elG] || 0) + 1;
        }
        const hiddens = ZHI_HIDDENS[zhi] || {};
        Object.entries(hiddens).forEach(([hiddenGan, pct]) => {
            const elZ = GAN_WUXING[hiddenGan];
            if(elZ) {
                const w = pct/100;
                countsZhi[elZ] = (countsZhi[elZ] || 0) + w;
                countsAll[elZ] = (countsAll[elZ] || 0) + w;
            }
        });
    });
    const tenGods = {
        y: (ec.getYearShiShenGan && ec.getYearShiShenGan()) || '',
        m: (ec.getMonthShiShenGan && ec.getMonthShiShenGan()) || '',
        d: 'ì¼ê°„',
        t: (ec.getTimeShiShenGan && ec.getTimeShiShenGan()) || ''
    };
    return { pillars, countsGan, countsZhi, countsAll, lunar, solar, tenGods, calMode, isLeap };
}

// ì˜¤ëŠ˜ì˜ ìš´ì„¸ ê³„ì‚°
function calcEnhancedDailyFortune(birthdate) {
    const today = new Date();
    const dateStr = `${today.getFullYear()}-${today.getMonth() + 1}-${today.getDate()}`;
    const results = {};
    Object.keys(FORTUNE_CATEGORIES).forEach((category, index) => {
        const seed = (birthdate || '').replaceAll('-', '') + dateStr + category + index;
        let hash = 0;
        for (let i = 0; i < seed.length; i++) {
            hash = (hash * 37 + seed.charCodeAt(i)) % 100000;
        }
        const score = Math.abs(hash) % 100;
        let messageKey = 30;
        if (score >= 85) messageKey = 90;
        else if (score >= 75) messageKey = 80;
        else if (score >= 65) messageKey = 70;
        else if (score >= 55) messageKey = 60;
        else if (score >= 45) messageKey = 50;
        else if (score >= 35) messageKey = 40;
        const messages = FORTUNE_CATEGORIES[category].messages[messageKey];
        const messageIndex = Math.abs(hash) % messages.length;
        results[category] = {
            name: FORTUNE_CATEGORIES[category].name,
            icon: FORTUNE_CATEGORIES[category].icon,
            score: score,
            message: messages[messageIndex]
        };
    });
    
    // ëŸ­í‚¤ ì•„ì´í…œ ê³„ì‚°
    const luckyHash = birthdate.replaceAll('-', '') + dateStr + 'lucky';
    let lHash = 0;
    for (let i = 0; i < luckyHash.length; i++) {
        lHash = (lHash * 41 + luckyHash.charCodeAt(i)) % 100000;
    }
    const luckyItem = LUCKY_ITEMS.items[Math.abs(lHash) % LUCKY_ITEMS.items.length];
    const luckyColor = LUCKY_ITEMS.colors[Math.abs(lHash + 1) % LUCKY_ITEMS.colors.length];
    const luckyNumber = LUCKY_ITEMS.numbers[Math.abs(lHash + 2) % LUCKY_ITEMS.numbers.length];
    const luckyDirection = LUCKY_ITEMS.directions[Math.abs(lHash + 3) % LUCKY_ITEMS.directions.length];
    return {
        categories: results,
        lucky: {
            item: luckyItem,
            color: luckyColor,
            number: luckyNumber,
            direction: luckyDirection
        },
        date: dateStr
    };
}

// ===== ì‚¬ì£¼ ìš´ì„¸í’€ì´ ìƒì„± í•¨ìˆ˜ë“¤ =====
function generateLifetimeFortune(r, name = '') {
    const dayGan = (r.pillars.day||'')[0] || '';
    const dayEl = GAN_WUXING[dayGan] || '';
    const KEYS = ['æœ¨','ç«','åœŸ','é‡‘','æ°´'];
    const total = KEYS.reduce((a,k)=>a+(r.countsAll[k]||0),0);
    const list = KEYS.map(k=>({k, v: r.countsAll[k]||0, p: total ? Math.round((r.countsAll[k]/total)*100) : 0}))
        .sort((a,b)=>b.v-a.v);
    const strongest = list[0];
    const ssMonth = krShiShen(r.tenGods.m || '');
    const lifetimeTexts = {
        'æœ¨': `${name ? name+'ë‹˜ì€' : 'ì´ ë¶„ì€'} ì„±ì¥ê³¼ ë°œì „ì„ ì¶”êµ¬í•˜ëŠ” ì¸ìƒì„ ê±·ê²Œ ë©ë‹ˆë‹¤. ì–´ë ¤ì„œë¶€í„° í•™ìŠµëŠ¥ë ¥ì´ ë›°ì–´ë‚˜ë©°, ìƒˆë¡œìš´ ê²ƒì„ ë°°ìš°ê³  í¡ìˆ˜í•˜ëŠ” ì†ë„ê°€ ë¹ ë¦…ë‹ˆë‹¤. ì¸ìƒ ì „ë°˜ì— ê±¸ì³ ëŠì„ì—†ëŠ” ìê¸°ê³„ë°œê³¼ ì„±ì¥ì˜ ê¸°íšŒê°€ ì£¼ì–´ì§€ë©°, íŠ¹íˆ êµìœ¡, ê¸°íš, ì°½ì˜ì ì¸ ë¶„ì•¼ì—ì„œ ë‘ê°ì„ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‚¬ëŒë“¤ê³¼ì˜ ë„¤íŠ¸ì›Œí‚¹ì„ í†µí•´ ê¸°íšŒë¥¼ í™•ì¥í•´ë‚˜ê°€ëŠ” ì„±í–¥ì´ ê°•í•˜ë©°, ì¤‘ë…„ ì´í›„ì—ëŠ” í›„ë°°ë‚˜ ì œìë¥¼ ì–‘ì„±í•˜ëŠ” ì—­í• ì„ ë§¡ê²Œ ë  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.`,
        'ç«': `${name ? name+'ë‹˜ì˜' : 'ì´ ë¶„ì˜'} ì¸ìƒì€ ì—´ì •ê³¼ ì—ë„ˆì§€ë¡œ ê°€ë“í•œ ì—­ë™ì ì¸ ì—¬ì •ì´ ë  ê²ƒì…ë‹ˆë‹¤. íƒ€ê³ ë‚œ ë¦¬ë”ì‹­ê³¼ í‘œí˜„ë ¥ìœ¼ë¡œ ë§ì€ ì‚¬ëŒë“¤ì—ê²Œ ì˜í–¥ì„ ë¯¸ì¹˜ë©°, íŠ¹íˆ ì Šì€ ì‹œì ˆë¶€í„° ì£¼ëª©ë°›ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ì˜ˆìˆ , ì—”í„°í…Œì¸ë¨¼íŠ¸, ì„¸ì¼ì¦ˆ, í™ë³´ ë¶„ì•¼ì—ì„œ íŠ¹ë³„í•œ ì¬ëŠ¥ì„ ë°œíœ˜í•  ìˆ˜ ìˆìœ¼ë©°, ì‚¬ëŒë“¤ ì•ì— ì„œëŠ” ê²ƒì„ ë‘ë ¤ì›Œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.`,
        'åœŸ': `${name ? name+'ë‹˜ì€' : 'ì´ ë¶„ì€'} ì•ˆì •ê³¼ ì‹ ë¢°ë¥¼ ë°”íƒ•ìœ¼ë¡œ í•œ ê²¬ì‹¤í•œ ì¸ìƒì„ ì‚´ê²Œ ë©ë‹ˆë‹¤. ê¸‰í•˜ê²Œ ì„œë‘ë¥´ê¸°ë³´ë‹¤ëŠ” ì°¨ê·¼ì°¨ê·¼ ê¸°ë°˜ì„ ë‹¤ì ¸ë‚˜ê°€ëŠ” ì„±í–¥ìœ¼ë¡œ, ì‹œê°„ì´ ê°ˆìˆ˜ë¡ ì£¼ë³€ì˜ ì‹ ë¢°ë¥¼ ì–»ê²Œ ë©ë‹ˆë‹¤. ë¶€ë™ì‚°, ê¸ˆìœµ, ìš´ì˜ê´€ë¦¬, ì„œë¹„ìŠ¤ì—… ë“±ì—ì„œ ì¥ê¸°ì ì¸ ì„±ê³µì„ ê±°ë‘˜ ìˆ˜ ìˆìœ¼ë©°, íŠ¹íˆ 40ëŒ€ ì´í›„ì—ëŠ” ì•ˆì •ëœ ê¸°ë°˜ ìœ„ì—ì„œ ë”í° ì„±ê³¼ë¥¼ ì´ë£° ìˆ˜ ìˆìŠµë‹ˆë‹¤.`,
        'é‡‘': `${name ? name+'ë‹˜ì˜' : 'ì´ ë¶„ì˜'} ì¸ìƒì€ ì •í™•ì„±ê³¼ ì›ì¹™ì„ ì¤‘ì‹œí•˜ëŠ” ì²´ê³„ì ì¸ ì—¬ì •ì´ ë  ê²ƒì…ë‹ˆë‹¤. ë¶„ì„ì  ì‚¬ê³ ì™€ ë…¼ë¦¬ì  íŒë‹¨ë ¥ì´ ë›°ì–´ë‚˜ ì „ë¬¸ì§, ê¸ˆìœµ, ë²•ë¬´, ê¸°ìˆ  ë¶„ì•¼ì—ì„œ ì¸ì •ë°›ì„ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. ì Šì€ ì‹œì ˆì—ëŠ” ë‹¤ì†Œ ê²½ì§ë˜ì–´ ë³´ì¼ ìˆ˜ ìˆì§€ë§Œ, ê²½í—˜ì´ ìŒ“ì´ë©´ì„œ ìì‹ ë§Œì˜ í™•ê³ í•œ ì „ë¬¸ì„±ì„ êµ¬ì¶•í•˜ê²Œ ë©ë‹ˆë‹¤.`,
        'æ°´': `${name ? name+'ë‹˜ì€' : 'ì´ ë¶„ì€'} ìœ ì—°í•¨ê³¼ ì ì‘ë ¥ìœ¼ë¡œ ë‹¤ì–‘í•œ ê²½í—˜ì„ í•˜ëŠ” í’ì„±í•œ ì¸ìƒì„ ì‚´ê²Œ ë©ë‹ˆë‹¤. ë›°ì–´ë‚œ ì†Œí†µëŠ¥ë ¥ê³¼ í•™ìŠµë ¥ìœ¼ë¡œ ì—¬ëŸ¬ ë¶„ì•¼ë¥¼ ë„˜ë‚˜ë“¤ë©° í™œë™í•  ìˆ˜ ìˆìœ¼ë©°, íŠ¹íˆ êµìœ¡, ì—°êµ¬, ë¯¸ë””ì–´, ìƒë‹´ ë¶„ì•¼ì—ì„œ ë‘ê°ì„ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì§ê´€ë ¥ì´ ë›°ì–´ë‚˜ íŠ¸ë Œë“œë¥¼ ë¹ ë¥´ê²Œ íŒŒì•…í•˜ê³ , ë³€í™”í•˜ëŠ” í™˜ê²½ì— ì˜ ì ì‘í•©ë‹ˆë‹¤.`
    };
    return lifetimeTexts[dayEl] || `${name ? name+'ë‹˜ì˜' : 'ì´ ë¶„ì˜'} ì¸ìƒì€ ë…íŠ¹í•œ ê°œì„±ê³¼ íŠ¹ë³„í•œ ì¬ëŠ¥ìœ¼ë¡œ íŠ¹ë³„í•œ ì—¬ì •ì„ ê±¸ì–´ê°€ê²Œ ë  ê²ƒì…ë‹ˆë‹¤.`;
}

function generateDaeunAnalysis(r, name = '') {
    const birthYear = r.solar ? r.solar.getYear() : 2000;
    const currentYear = new Date().getFullYear();
    const age = currentYear - birthYear;
    let analysis = `${name ? name+'ë‹˜ì˜' : 'ì´ ë¶„ì˜'} ëŒ€ìš´ íë¦„ì„ ì‚´í´ë³´ë©´, `;
    if (age < 10) {
        analysis += 'í˜„ì¬ ê¸°ì´ˆ í˜•ì„±ê¸°ë¡œ ì„±ê²©ê³¼ ê¸°ë³¸ ì„±í–¥ì´ ìë¦¬ì¡ëŠ” ì¤‘ìš”í•œ ì‹œê¸°ì…ë‹ˆë‹¤. ';
    } else if (age < 20) {
        analysis += 'í˜„ì¬ ì„±ì¥ê¸°ë¡œ í•™ìŠµê³¼ ì¸ê²© í˜•ì„±ì˜ ê²°ì •ì  ì‹œê¸°ì— ìˆìŠµë‹ˆë‹¤. ';
    } else if (age < 30) {
        analysis += 'í˜„ì¬ ë„ì•½ê¸°ë¡œ ì‚¬íšŒ ì§„ì¶œê³¼ ìì•„ ì‹¤í˜„ì´ ì‹œì‘ë˜ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ';
    } else if (age < 40) {
        analysis += 'í˜„ì¬ ë°œì „ê¸°ë¡œ ê²½ë ¥ ë°œì „ê³¼ ê¸°ë°˜ êµ¬ì¶•ì˜ í•µì‹¬ ì‹œê¸°ì…ë‹ˆë‹¤. ';
    } else if (age < 50) {
        analysis += 'í˜„ì¬ ì„±ìˆ™ê¸°ë¡œ ì•ˆì •ê³¼ ì„±ì·¨ë¥¼ ì´ë£¨ëŠ” ì ˆì •ì˜ ì‹œê¸°ì…ë‹ˆë‹¤. ';
    } else if (age < 60) {
        analysis += 'í˜„ì¬ ì™„ì„±ê¸°ë¡œ ê²½í—˜ê³¼ ì§€í˜œê°€ ì ˆì •ì— ë‹¬í•˜ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ';
    } else {
        analysis += 'í˜„ì¬ ì—¬ìœ ê¸°ë¡œ í›„ë°° ì–‘ì„±ê³¼ ìƒˆë¡œìš´ ì‹œì‘ì„ ì¤€ë¹„í•˜ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ';
    }
    analysis += 'ì•ìœ¼ë¡œì˜ 10ë…„ ë‹¨ìœ„ ëŒ€ìš´ì€ ì ì°¨ ì•ˆì •ë˜ë©´ì„œë„ ìƒˆë¡œìš´ ê¸°íšŒê°€ ì°¾ì•„ì˜¬ ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.';
    return analysis;
}

function generateDaeunTiming(r, name = '') {
    const birthYear = r.solar ? r.solar.getYear() : 2000;
    const currentYear = new Date().getFullYear();
    const age = currentYear - birthYear;
    if (age < 25) {
        return `í˜„ì¬ëŠ” ê¸°ì´ˆë¥¼ ë‹¤ì§€ëŠ” ì¤‘ìš”í•œ ì‹œê¸°ì…ë‹ˆë‹¤. 25-35ì„¸ ì‚¬ì´ì— í° ì „í™˜ì ì´ ì˜¬ ê²ƒì´ë©°, ì´ë•Œì˜ ì„ íƒì´ í–¥í›„ 10ë…„ì„ ì¢Œìš°í•©ë‹ˆë‹¤.`;
    } else if (age < 35) {
        return `ì§€ê¸ˆì´ ì¸ìƒì˜ ì¤‘ìš”í•œ ì „í™˜ê¸°ì…ë‹ˆë‹¤. 35-45ì„¸ ì‚¬ì´ì— ìµœê³ ì˜ ì„±ì·¨ê¸°ê°€ ì˜¬ ê²ƒì´ë‹ˆ í˜„ì¬ì˜ ë…¸ë ¥ì„ ë©ˆì¶”ì§€ ë§ˆì„¸ìš”.`;
    } else if (age < 45) {
        return `í˜„ì¬ ì¸ìƒì˜ ì ˆì •ê¸°ì— ìˆìŠµë‹ˆë‹¤. 45-55ì„¸ ì‚¬ì´ì—ëŠ” ì•ˆì •ê³¼ ì„±ìˆ™ì˜ ì‹œê¸°ê°€ ì˜¬ ê²ƒì´ë©°, í›„ë°° ì–‘ì„±ì—ë„ í˜ì¨ë³´ì„¸ìš”.`;
    } else if (age < 55) {
        return `ì„±ìˆ™í•œ ì§€í˜œê°€ ë¹›ë‚˜ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. 55-65ì„¸ ì‚¬ì´ì—ëŠ” ìƒˆë¡œìš´ ë„ì „ì´ë‚˜ ì œ2ì˜ ì¸ìƒì„ ì„¤ê³„í•  ì¢‹ì€ ì‹œê¸°ì…ë‹ˆë‹¤.`;
    } else {
        return `ì¸ìƒì˜ ì—¬ìœ ì™€ ê¹Šì´ë¥¼ ë§Œë½í•  ì‹œê¸°ì…ë‹ˆë‹¤. ê²½í—˜ê³¼ ì§€í˜œë¥¼ ë‚˜ëˆ„ë©° ì˜ë¯¸ ìˆëŠ” ì‹œê°„ì„ ë³´ë‚´ì„¸ìš”.`;
    }
}

function generateCautionPeriods(r, name = '') {
    const dayGan = (r.pillars.day||'')[0] || '';
    const dayEl = GAN_WUXING[dayGan] || '';
    const cautionByElement = {
        'æœ¨': 'ê¸ˆ(é‡‘)ì˜ í•´(ì›ìˆ­ì´ë , ë‹­ë  í•´)ì—ëŠ” ê³¼ë„í•œ ìŠ¤íŠ¸ë ˆìŠ¤ì™€ ê±´ê°• ë¬¸ì œë¥¼ ì£¼ì˜í•˜ì„¸ìš”.',
        'ç«': 'ë¬¼(æ°´)ì˜ í•´(ì¥ë , ë¼ì§€ë  í•´)ì—ëŠ” ê°ì • ê¸°ë³µê³¼ ëŒ€ì¸ê´€ê³„ ê°ˆë“±ì„ ì¡°ì‹¬í•˜ì„¸ìš”.',
        'åœŸ': 'ëª©(æœ¨)ì˜ í•´(í˜¸ë‘ì´ë , í† ë¼ë  í•´)ì—ëŠ” ìš°ìœ ë¶€ë‹¨í•œ ê²°ì •ê³¼ ì¬ì • ê´€ë¦¬ë¥¼ ì£¼ì˜í•˜ì„¸ìš”.',
        'é‡‘': 'í™”(ç«)ì˜ í•´(ë§ë , ë±€ë  í•´)ì—ëŠ” ì„±ê¸‰í•œ íŒë‹¨ê³¼ íˆ¬ì ì†ì‹¤ì„ ê²½ê³„í•˜ì„¸ìš”.',
        'æ°´': 'í† (åœŸ)ì˜ í•´(ìš©ë , ê°œë , ì–‘ë , ì†Œë  í•´)ì—ëŠ” ë‹µë‹µí•¨ê³¼ ì •ì²´ë¥¼ ì¸ë‚´ë¡œ ê·¹ë³µí•˜ì„¸ìš”.'
    };
    return cautionByElement[dayEl] || 'ë³€í™”ì˜ í•´ì—ëŠ” ì‹ ì¤‘í•œ íŒë‹¨ì´ í•„ìš”í•©ë‹ˆë‹¤. ë˜í•œ ë³¸ëª…ë…„ê³¼ ì¶©(æ²–)ì´ ë˜ëŠ” í•´ì—ëŠ” í° ë³€í™”ë‚˜ ì´ë™ì´ ìˆì„ ìˆ˜ ìˆìœ¼ë‹ˆ ë¯¸ë¦¬ ì¤€ë¹„í•˜ì„¸ìš”.';
}

function generateAdvice(r, name = '') {
    const dayGan = (r.pillars.day||'')[0] || '';
    const dayEl = GAN_WUXING[dayGan] || '';
    const KEYS = ['æœ¨','ç«','åœŸ','é‡‘','æ°´'];
    const total = KEYS.reduce((a,k)=>a+(r.countsAll[k]||0),0);
    const list = KEYS.map(k=>({k, v: r.countsAll[k]||0, p: total ? Math.round((r.countsAll[k]/total)*100) : 0}))
        .sort((a,b)=>b.v-a.v);
    const weakest = list[list.length-1];
    const weakInfo = WUXING_INFO[weakest.k] || {};
    const basicAdvice = {
        'æœ¨': 'ì„±ì¥ ì§€í–¥ì ì¸ ì„±ê²©ì„ ì‚´ë ¤ ì§€ì†ì ì¸ í•™ìŠµê³¼ ë„¤íŠ¸ì›Œí‚¹ì— íˆ¬ìí•˜ì„¸ìš”. ë‹¤ë§Œ ë„ˆë¬´ ë§ì€ ì¼ì„ ë²Œì´ì§€ ë§ê³  ìš°ì„ ìˆœìœ„ë¥¼ ì •í•´ ì°¨ê·¼ì°¨ê·¼ ì§„í–‰í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.',
        'ç«': 'ë›°ì–´ë‚œ í‘œí˜„ë ¥ê³¼ ì—´ì •ì„ í™œìš©í•˜ë˜, ê°ì • ì¡°ì ˆê³¼ ì¸ë‚´ì‹¬ì„ ê¸°ë¥´ëŠ” ê²ƒì´ í•„ìš”í•©ë‹ˆë‹¤. ê¸‰í•œ ì„±ê²©ì„ ë‹¤ìŠ¤ë¦¬ê³  ì¥ê¸°ì ì¸ ê´€ì ì—ì„œ ê³„íšì„ ì„¸ìš°ì„¸ìš”.',
        'åœŸ': 'ì•ˆì •ê°ê³¼ ì‹ ë¢°ì„±ì´ ê°€ì¥ í° ë¬´ê¸°ì…ë‹ˆë‹¤. ê¾¸ì¤€í•¨ì„ ìœ ì§€í•˜ë˜, ë•Œë¡œëŠ” ë³€í™”ì— ëŒ€í•œ ìœ ì—°ì„±ë„ í•„ìš”í•©ë‹ˆë‹¤. ìƒˆë¡œìš´ ì‹œë„ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ë§ˆì„¸ìš”.',
        'é‡‘': 'ì •í™•ì„±ê³¼ ì›ì¹™ì„ ì¤‘ì‹œí•˜ëŠ” ì„±í–¥ì„ ì‚´ë ¤ ì „ë¬¸ì„±ì„ ê¸°ë¥´ì„¸ìš”. ì™„ë²½ì£¼ì˜ ì„±í–¥ì´ ê°•í•  ìˆ˜ ìˆìœ¼ë‹ˆ ì ë‹¹í•œ íƒ€í˜‘ì ì„ ì°¾ëŠ” ì§€í˜œë„ í•„ìš”í•©ë‹ˆë‹¤.',
        'æ°´': 'ë›°ì–´ë‚œ ì ì‘ë ¥ê³¼ ì†Œí†µëŠ¥ë ¥ì„ í™œìš©í•˜ë˜, í•œ ë¶„ì•¼ì—ì„œì˜ ê¹Šì´ë„ ì¶”êµ¬í•˜ì„¸ìš”. ë³€í™”ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ë§ê³  ìƒˆë¡œìš´ ê¸°íšŒì— ì—´ë¦° ë§ˆìŒì„ ê°€ì§€ì„¸ìš”.'
    };
    let advice = `${name ? name+'ë‹˜ê»˜' : 'ì´ ë¶„ê»˜'} ë“œë¦¬ëŠ” ì¸ìƒ ì¡°ì–¸ì…ë‹ˆë‹¤. `;
    advice += basicAdvice[dayEl] || 'ìì‹ ì˜ ì¥ì ì„ ì‚´ë¦¬ë˜ ë‹¨ì ì„ ë³´ì™„í•˜ëŠ” ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤.';
    advice += ` íŠ¹íˆ ${weakInfo.ko} ê¸°ìš´ì´ ë¶€ì¡±í•˜ë‹ˆ ${weakInfo.boost}ë¡œ ë³´ì™„í•˜ë©´ ë”ìš± ê· í˜•ì¡íŒ ì‚¶ì„ ì‚´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
    return advice;
}

function buildEnhancedSajuResult(r, name = '') {
    const KEYS = ['æœ¨','ç«','åœŸ','é‡‘','æ°´'];
    const total = KEYS.reduce((a,k)=>a+(r.countsAll[k]||0),0);
    const list = KEYS.map(k=>({
        k, v: r.countsAll[k]||0, p: total ? Math.round((r.countsAll[k]/total)*100) : 0
    })).sort((a,b)=>b.v-a.v);
    const strongest = list[0];
    const weakest = list[list.length-1];
    const strongInfo = WUXING_INFO[strongest.k];
    const weakInfo = WUXING_INFO[weakest.k];
    const dayGan = (r.pillars.day||'')[0] || '';
    const dayEl = GAN_WUXING[dayGan] || '';
    const dayInfo = WUXING_INFO[dayEl] || {};
    const ssMonthKR = krShiShen(r.tenGods.m || '');
    const ssKey = Object.keys(SHISHEN_DESC).find(k => ssMonthKR.includes(k));
    const ssDesc = ssKey ? SHISHEN_DESC[ssKey] : 'ì›”ê°„ì€ ì‚¬íšŒì  ì—­í• Â·ì§ì—…ì„±ì˜ ë¼ˆëŒ€ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.';
    const nameTitle = name ? `<b>${name}</b>ë‹˜ì˜ ` : '';
    const lifetimeFortune = generateLifetimeFortune(r, name);
    const daeunAnalysis = generateDaeunAnalysis(r, name);
    const daeunTiming = generateDaeunTiming(r, name);
    const cautionPeriods = generateCautionPeriods(r, name);
    const advice = generateAdvice(r, name);
    let html = `<div class="result-section">
        <div class="section-title-result">ğŸ“Š ${nameTitle}ì‚¬ì£¼ ê¸°ë³¸ êµ¬ì¡°</div>
        ${createPillarsGrid(r.pillars)}
    </div>
    <div class="result-section">
        <div class="section-title-result">ğŸ¯ ${nameTitle}í•µì‹¬ í•´ì„</div>
        ${createResultCard('ğŸŒ±', 'ë³´ì™„í•  ì˜¤í–‰', `${weakInfo.ko}(${weakest.k}) ${weakest.p}%`, 
            `<strong>ì„¤ëª…:</strong> ì˜¤í–‰ì˜ ê· í˜•ì—ì„œ ê°€ì¥ ë‚®ì€ ì¶•ì…ë‹ˆë‹¤.<br/>
            <strong>ë³´ì™„ íŒ:</strong> ${weakInfo.boost}`, true)}
        ${createResultCard('ğŸ·ï¸', 'ì›”ê°„ ì‹­ì‹ ', ssMonthKR || '-', 
            `<strong>ì„¤ëª…:</strong> ${ssDesc}`)}
        ${createResultCard('ğŸ”¥', 'ê°•í•œ ì˜¤í–‰', `${strongInfo.ko}(${strongest.k}) ${strongest.p}%`, 
            `<strong>ì¥ì :</strong> ${strongInfo.trait}<br/>
            <strong>ì£¼ì˜:</strong> ì´ ìš”ì†Œê°€ ê³¼í•  ë•ŒëŠ” ê· í˜•ì„ ìœ„í•´ ë‹¤ë¥¸ ì˜¤í–‰ì„ ë³´ì™„í•˜ì„¸ìš”.`)}
    </div>
    <div class="result-section">
        <div class="section-title-result">ğŸ“ˆ ${nameTitle}ì˜¤í–‰ ë¶„í¬</div>
        ${createElementChart(r.countsAll)}
    </div>
    <div class="result-section">
        <div class="section-title-result">ğŸŒŸ ${nameTitle}ìƒì„¸ ìš´ì„¸í’€ì´</div>
        ${createResultCard('ğŸ“œ', 'í‰ìƒìš´', 'ì¸ìƒ ì „ì²´ íë¦„', lifetimeFortune, false)}
        ${createResultCard('ğŸ“Š', 'ëŒ€ìš´ë¶„ì„', '10ë…„ ë‹¨ìœ„ íë¦„', daeunAnalysis, false)}
        ${createResultCard('â°', 'ëŒ€ìš´ì‹œê¸°', 'í˜„ì¬ì™€ í–¥í›„ ì‹œê¸°', daeunTiming, false)}
        ${createResultCard('âš ï¸', 'ì¡°ì‹¬í• ì‹œê¸°', 'ì£¼ì˜ê°€ í•„ìš”í•œ ë•Œ', cautionPeriods, false)}
        ${createResultCard('ğŸ’¡', 'ì¸ìƒì¡°ì–¸', 'ì‹¤ìš©ì  ê°€ì´ë“œ', advice, false)}
    </div>
    <div class="info-box">
        <div class="info-title">ğŸ“‹ ìƒì„¸ ì •ë³´</div>
        <div class="info-content">
            <strong>ë‹¬ë ¥:</strong> ${r.calMode==='lunar'?'ìŒë ¥':'ì–‘ë ¥'}${r.calMode==='lunar' ? ` / ìœ¤ë‹¬: ${r.isLeap?'ì˜ˆ':'ì•„ë‹ˆì˜¤'}`:''}<br/>
            <strong>ì‹­ì‹ :</strong> ë…„:${krShiShen(r.tenGods.y)||'-'} / ì›”:${krShiShen(r.tenGods.m)||'-'} / ì‹œ:${krShiShen(r.tenGods.t)||'-'}<br/>
            â€» ìš´ì„¸í’€ì´ëŠ” ì‚¬ì£¼ êµ¬ì¡°ë¥¼ ë°”íƒ•ìœ¼ë¡œ í•œ ì¼ë°˜ì ì¸ í•´ì„ì´ë©°, ê°œì¸ì˜ ë…¸ë ¥ê³¼ ì„ íƒì´ ë”ìš± ì¤‘ìš”í•©ë‹ˆë‹¤.
        </div>
    </div>`;
    return html;
}

// ===== HTML ìƒì„± í•¨ìˆ˜ë“¤ =====
function createResultCard(icon, title, value, description, isMain = false, cardType = '') {
    let cardClass = 'result-card';
    if (isMain) cardClass += ' main-result';
    if (cardType) cardClass += ' ' + cardType;
    return `<div class="${cardClass}">
        <div class="card-header">
            <div class="card-icon">${icon}</div>
            <div class="card-title">${title}</div>
        </div>
        <div class="card-value">${value}</div>
        <div class="card-description">${description}</div>
    </div>`;
}

function createPillarsGrid(pillars) {
    return `<div class="pillars-grid">
        <div class="pillar-card">
            <div class="pillar-label">ì—°ì£¼</div>
            <div class="pillar-value">${pillars.year || '-'}</div>
        </div>
        <div class="pillar-card">
            <div class="pillar-label">ì›”ì£¼</div>
            <div class="pillar-value">${pillars.month || '-'}</div>
        </div>
        <div class="pillar-card">
            <div class="pillar-label">ì¼ì£¼</div>
            <div class="pillar-value">${pillars.day || '-'}</div>
        </div>
        <div class="pillar-card">
            <div class="pillar-label">ì‹œì£¼</div>
            <div class="pillar-value">${pillars.time || '-'}</div>
        </div>
    </div>`;
}

function createElementChart(countsAll) {
    const KEYS = ['æœ¨','ç«','åœŸ','é‡‘','æ°´'];
    const total = KEYS.reduce((a,k)=>a+(countsAll[k]||0),0);
    let html = '<div class="element-distribution">';
    KEYS.forEach(key => {
        const info = WUXING_INFO[key];
        const value = countsAll[key] || 0;
        const percentage = total ? Math.round((value/total)*100) : 0;
        html += `<div class="element-item">
            <div class="element-name">${info.ko}</div>
            <div class="element-bar">
                <div class="element-fill" style="width: ${percentage}%; background: ${info.color}"></div>
            </div>
            <div class="element-percentage">${percentage}%</div>
        </div>`;
    });
    html += '</div>';
    return html;
}

// ===== íƒ€ë¡œ ê¸°ëŠ¥ =====
let selectedCards = new Set();
function initializeTarot() {
    const tarotCards = $$('.tarot-card-back');
    tarotCards.forEach(card => {
        if (card.__bound) return;
        card.addEventListener('click', () => selectTarotCard(card));
        card.__bound = true;
    });
    const randomBtn = $('#btnRandomTarot');
    if (randomBtn && !randomBtn.__bound) {
        randomBtn.addEventListener('click', drawRandomTarotCard);
        randomBtn.__bound = true;
    }
    const resetBtn = $('#btnResetTarot');
    if (resetBtn && !resetBtn.__bound) {
        resetBtn.addEventListener('click', resetTarotCards);
        resetBtn.__bound = true;
    }
    resetTarotCards();
}

function selectTarotCard(cardElement) {
    if (cardElement.classList.contains('revealed')) return;
    const randomTarotIndex = Math.floor(Math.random() * TAROT_DETAILS.length);
    const isUpright = Math.random() < 0.7;
    const selectedCard = TAROT_DETAILS[randomTarotIndex];
    if(!selectedCard) return;
    cardElement.classList.add('flipped');
    setTimeout(() => {
        const frontElement = document.createElement('div');
        frontElement.className = 'tarot-card-front';
        frontElement.innerHTML = `<div class="card-number">${randomTarotIndex}</div>
            <div class="card-icon">${CARD_ICONS[randomTarotIndex]}</div>
            <div class="card-name">${selectedCard.name.split('(')[0].trim()}</div>
            <div class="card-direction">${isUpright ? 'ì •ìœ„' : 'ì—­ìœ„'}</div>`;
        cardElement.appendChild(frontElement);
        cardElement.classList.add('revealed');
        setTimeout(()=>{ frontElement.style.opacity='1'; },100);
    },300);
    setTimeout(()=> showTarotModal(randomTarotIndex, isUpright), 800);
    pushRecent({
        type:'tarot',
        card:selectedCard.name,
        upright:isUpright,
        meaning:isUpright?selectedCard.upright:selectedCard.reversed
    });
    reactCrystal(`${selectedCard.name.split('(')[0].trim()}ì„ ë½‘ì•˜ìŠµë‹ˆë‹¤! âœ¨`);
}

function drawRandomTarotCard(){
    const available = $$('.tarot-card-back:not(.revealed)');
    if(!available.length){
        reactCrystal('ëª¨ë“  ì¹´ë“œë¥¼ ì´ë¯¸ ë½‘ì•˜ìŠµë‹ˆë‹¤! ğŸ¯');
        return;
    }
    const el = available[Math.floor(Math.random()*available.length)];
    setTimeout(()=> selectTarotCard(el), 300);
}

function resetTarotCards(){
    $$('.tarot-card-back').forEach(card=>{
        card.classList.remove('flipped','revealed');
        card.style.transform='';
        card.querySelector('.tarot-card-front')?.remove();
    });
    selectedCards.clear();
    closeTarotModal();
    reactCrystal('ìƒˆë¡œìš´ ì¹´ë“œë“¤ì´ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤ âœ¨');
}

function showTarotModal(cardIndex, isUpright) {
    const idx = Math.max(0, Math.min(TAROT_DETAILS.length-1, Number(cardIndex)||0));
    const card = TAROT_DETAILS[idx];
    if(!card) return;
    
    const modal = $('#tarotModalOverlay');
    const content = $('#tarotModalContent');
    if(!modal || !content) return;
    
    const currentMeaning = isUpright ? card.upright : card.reversed;
    
    let meaningText = '';
    if (typeof currentMeaning === 'object') {
        meaningText = `
            <div style="margin-bottom:12px; padding:8px; background:rgba(255,255,255,0.05); border-radius:6px;">
                <strong style="color:#4ade80;">ğŸ”® ì¼ë°˜í•´ì„:</strong><br/>
                <span style="margin-left:20px;">${currentMeaning.general || ''}</span>
            </div>
            <div style="margin-bottom:12px; padding:8px; background:rgba(255,255,255,0.05); border-radius:6px;">
                <strong style="color:#f87171;">ğŸ’• ì—°ì• ìš´:</strong><br/>
                <span style="margin-left:20px;">${currentMeaning.love || ''}</span>
            </div>
            <div style="margin-bottom:12px; padding:8px; background:rgba(255,255,255,0.05); border-radius:6px;">
                <strong style="color:#60a5fa;">ğŸ’¼ ì§ì—…ìš´:</strong><br/>
                <span style="margin-left:20px;">${currentMeaning.career || ''}</span>
            </div>
            <div style="margin-bottom:12px; padding:8px; background:rgba(255,255,255,0.05); border-radius:6px;">
                <strong style="color:#fbbf24;">ğŸ’¡ ì¡°ì–¸:</strong><br/>
                <span style="margin-left:20px;">${currentMeaning.advice || ''}</span>
            </div>
        `;
    } else {
        meaningText = currentMeaning || '';
    }
    
    content.innerHTML = `
        <h2 style="text-align:center; margin-bottom:15px;">${card.name}</h2>
        <p style="color:#9ca3af; margin-bottom:20px; line-height:1.6; text-align:center; font-style:italic;">
            ${card.meaning}
        </p>
        
        <div style="margin-top:20px; padding:15px; background:rgba(255,215,0,0.1); border-radius:10px; border-left:4px solid #ffd700;">
            <h3 style="color:#ffd700; margin-bottom:15px; text-align:center;">
                ${isUpright ? 'ğŸŒŸ ì •ë°©í–¥ í•´ì„' : 'ğŸŒ€ ì—­ë°©í–¥ í•´ì„'}
            </h3>
            <div style="color:#e5e7eb; line-height:1.6;">
                ${meaningText}
            </div>
        </div>
        
        ${card.keywords ? `<div style="margin-top:15px; padding:12px; background:rgba(255,255,255,0.05); border-radius:8px; text-align:center;">
            <strong style="color:#ffd700;">ğŸ·ï¸ í•µì‹¬ í‚¤ì›Œë“œ:</strong> ${card.keywords}
        </div>` : ''}
    `;
    
    modal.style.display='flex';
    requestAnimationFrame(()=> modal.classList.add('show'));
}

function closeTarotModal(){
    const modal = document.getElementById('tarotModalOverlay');
    if(!modal) return;
    modal.classList.remove('show');
    setTimeout(() => {
        modal.style.display = 'none';
    }, 300);
}
// íƒ€ë¡œ ëª¨ë‹¬ ë‹«ê¸° ì´ë²¤íŠ¸ë“¤ (ê¸°ì¡´ ì½”ë“œ ëë¶€ë¶„ì— ì¶”ê°€)
document.addEventListener('DOMContentLoaded', () => {
    const closeBtn = document.getElementById('tarotCloseBtn');
    if (closeBtn) {
        closeBtn.addEventListener('click', closeTarotModal);
    }
    
    const overlay = document.getElementById('tarotModalOverlay');
    if (overlay) {
        overlay.addEventListener('click', (e) => {
            if (e.target === overlay) {
                closeTarotModal();
            }
        });
    }
});

// ESC í‚¤ë¡œë„ ë‹«ê¸°
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
        closeTarotModal();
    }
});

// ===== ë¡œë˜ ë²ˆí˜¸ ìƒì„± =====
function seededRandomFactory(seedStr='') {
    let h = 2166136261 >>> 0;
    for (let i = 0; i < seedStr.length; i++) {
        h ^= seedStr.charCodeAt(i);
        h = Math.imul(h, 16777619) >>> 0;
    }
    let state = h;
    return function rnd() {
        state = (Math.imul(state, 1664525) + 1013904223) >>> 0;
        return (state >>> 0) / 0xFFFFFFFF;
    };
}

function generateLottoSet(seedStr) {
    const s = String(seedStr ?? '');
    const digits = s.replace(/\D/g, '');
    let seed = Number.isFinite(Date.parse(s)) ? Date.parse(s) : NaN;
    if (!Number.isFinite(seed) && digits.length === 8) {
        const norm = `${digits.slice(0,4)}-${digits.slice(4,6)}-${digits.slice(6,8)}`;
        seed = Date.parse(norm);
    }
    if (!Number.isFinite(seed)) {
        let h = 2166136261;
        for (let i = 0; i < s.length; i++) h = (h ^ s.charCodeAt(i)) * 16777619 >>> 0;
        seed = (h || (Date.now() >>> 0));
    }
    let state = seed >>> 0;
    function rnd() {
        state = (1664525 * state + 1013904223) >>> 0;
        return state / 2 ** 32;
    }
    const picked = new Set();
    let guard = 0;
    while (picked.size < 6 && guard++ < 4000) {
        const n = Math.floor(rnd() * 45) + 1;
        if (n >= 1 && n <= 45) picked.add(n);
    }
    while (picked.size < 6) {
        picked.add(Math.floor(Math.random() * 45) + 1);
    }
    return Array.from(picked).sort((a, b) => a - b);
}

function generateLottoNumbers(birth='') {
    const today = new Date();
    const utc = new Date(Date.UTC(today.getFullYear(), today.getMonth(), today.getDate()));
    const day = utc.getUTCDay() || 7;
    utc.setUTCDate(utc.getUTCDate() + 4 - day);
    const yearStart = new Date(Date.UTC(utc.getUTCFullYear(), 0, 1));
    const isoWeek = Math.ceil((((utc - yearStart) / 86400000) + 1) / 7);
    const seed = `${utc.getUTCFullYear()}-W${String(isoWeek).padStart(2,'0')}:${birth}`;
    const main = generateLottoSet(seed);
    let bonus;
    const rnd = seededRandomFactory(seed + '#bonus');
    do {
        bonus = Math.floor(rnd() * 45) + 1;
    } while (main.includes(bonus));
    return {
        main,
        bonus,
        seedInfo: `ì£¼ ${isoWeek}${birth ? ` Â· ${birth}` : ''}`
    };
}
// ===== ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë“¤ =====
// ì˜¤ëŠ˜ì˜ ìš´ì„¸ ë²„íŠ¼
$('#btnToday')?.addEventListener('click', ()=>{
    const birthRaw = $('#today-birth').value;
    const name = $('#today-name')?.value?.trim() || '';
    const calMode = getCalMode('today');
    const isLeap = getLeap('today');
    try {
        if (!birthRaw.trim()) {
            alert('ìƒë…„ì›”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”.');
            return;
        }
        const solar = toSolarFromInput(birthRaw, '', calMode, isLeap);
        const birthSolarStr = fmtSolar(solar);
        const fortuneData = calcEnhancedDailyFortune(birthSolarStr);
        let html = `<div class="result-section">
            <div class="section-title-result">ğŸŒŸ ${name ? name+'ë‹˜ì˜ ' : ''}ì˜¤ëŠ˜ì˜ ìš´ì„¸</div>
            <div class="fortune-date">ğŸ“… ${fortuneData.date}</div>
        </div>`;
        html += '<div class="result-section">';
        Object.values(fortuneData.categories).forEach((category, index) => {
            html += createResultCard(
                category.icon,
                category.name,
                `${category.score}ì `,
                category.message,
                index === 0
            );
        });
        html += '</div>';
        html += `<div class="result-section">
            <div class="section-title-result">ğŸ€ ì˜¤ëŠ˜ì˜ ëŸ­í‚¤ ì•„ì´í…œ</div>
            <div class="lucky-items-grid">
                <div class="lucky-item-card">
                    <div class="lucky-icon">ğŸ</div>
                    <div class="lucky-label">ëŸ­í‚¤ ì•„ì´í…œ</div>
                    <div class="lucky-value">${fortuneData.lucky.item}</div>
                </div>
                <div class="lucky-item-card">
                    <div class="lucky-icon">ğŸ¨</div>
                    <div class="lucky-label">ëŸ­í‚¤ ì»¬ëŸ¬</div>
                    <div class="lucky-value">${fortuneData.lucky.color}</div>
                </div>
                <div class="lucky-item-card">
                    <div class="lucky-icon">ğŸ”¢</div>
                    <div class="lucky-label">ëŸ­í‚¤ ë„˜ë²„</div>
                    <div class="lucky-value">${fortuneData.lucky.number}</div>
                </div>
                <div class="lucky-item-card">
                    <div class="lucky-icon">ğŸ§­</div>
                    <div class="lucky-label">ëŸ­í‚¤ ë°©í–¥</div>
                    <div class="lucky-value">${fortuneData.lucky.direction}</div>
                </div>
            </div>
        </div>`;
        openSheet('ì˜¤ëŠ˜ì˜ ìš´ì„¸', html, {
            type: 'enhanced-today',
            birth_input: birthRaw,
            name: name,
            calMode: calMode,
            isLeap: isLeap,
            data: fortuneData
        });
        reactCrystal('ì˜¤ëŠ˜ì˜ ìƒì„¸ ìš´ì„¸ë¥¼ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤! âœ¨');
    } catch (e) {
        console.error(e);
        alert(e.message || 'ì…ë ¥ ê°’ì„ í™•ì¸í•´ ì£¼ì„¸ìš”.');
    }
});
// ì‚¬ì£¼ ë²„íŠ¼
$('#btnSaju')?.addEventListener('click', () => {
    const rawDate = $('#saju-birth')?.value || '';
    const rawTime = $('#saju-time')?.value || '';
    const name = $('#saju-name')?.value?.trim() || '';
    const calMode = getCalMode('saju');
    const isLeap = getLeap('saju');
    try {
        if (!rawDate.trim()) {
            alert('ìƒë…„ì›”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”.');
            return;
        }
        const r = computeBaZi(rawDate, rawTime, calMode, isLeap);
        const enhancedResult = buildEnhancedSajuResult(r, name);
        openSheet('ì •í†µ ì‚¬ì£¼ í•´ì„', enhancedResult, {
            type:'saju',
            name, date: rawDate, time: rawTime, calMode, isLeap,
            data: r
        });
        reactCrystal('ì‚¬ì£¼ í•´ì„ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ âœ¨');
    } catch (e) {
        console.error(e);
        alert(e.message || 'ì‚¬ì£¼ ê³„ì‚° ì¤‘ ì˜¤ë¥˜');
    }
});
// ë¡œë˜ ë²„íŠ¼
$('#btnLotto')?.addEventListener('click', () => {
    const birth = $('#lotto-birth')?.value?.trim() || '';
    try {
        const result = generateLottoNumbers(birth);
        let html = `<div class="result-section">
            <div class="section-title-result">ğŸ² ì´ë²ˆ ì£¼ í–‰ìš´ë²ˆí˜¸</div>
            <div class="lotto-wrap">
                <div class="lotto-balls">`;
        result.main.forEach(n => {
            html += `<div class="ball">${String(n).padStart(2,'0')}</div>`;
        });
        html += `<div style="align-self:center;font-weight:800;margin:0 2px">+</div>
                <div class="ball bonus">${String(result.bonus).padStart(2,'0')}</div>
            </div>
            <div class="lotto-meta">ìƒì„± ê¸°ì¤€: ${result.seedInfo} Â· ì°¸ê³ ìš©</div>
        </div></div>`;
        openSheet('ğŸ€ í–‰ìš´ì˜ ë¡œë˜ë²ˆí˜¸', html, {
            type: 'lotto',
            birth,
            data: result
        });
        reactCrystal('í–‰ìš´ë²ˆí˜¸ë¥¼ ì¤€ë¹„í–ˆì–´ìš”! âœ¨');
    } catch (e) {
        console.error(e);
        alert('í–‰ìš´ë²ˆí˜¸ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    }
});
// ì‹œíŠ¸ ë‹«ê¸°
$('#btnClose')?.addEventListener('click', closeSheet);
sheet?.addEventListener('click', e=>{
    if(e.target===sheet) closeSheet();
});
// ìµœê·¼ ê²°ê³¼ ì €ì¥
$('#btnSave')?.addEventListener('click', ()=>{
    if(!lastResult){
        closeSheet();
        return;
    }
    pushRecent(lastResult);
    const notice = document.createElement('div');
    notice.textContent = 'ğŸ’¾ ìµœê·¼ ê²°ê³¼ì— ì €ì¥ëìŠµë‹ˆë‹¤.';
    notice.style.cssText = 'margin-top:16px;padding:12px;background:rgba(102,126,234,0.1);border-radius:8px;text-align:center;color:#667eea;font-weight:bold;';
    sheetContent.appendChild(notice);
    setTimeout(() => notice.remove(), 3000);
});
// ìµœê·¼ ê²°ê³¼ ì‚­ì œ
$('#btnClear')?.addEventListener('click', ()=>{
    if(confirm('ìµœê·¼ ê²°ê³¼ë¥¼ ëª¨ë‘ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')){
        localStorage.removeItem(LS_KEY);
        alert('ìµœê·¼ ê²°ê³¼ê°€ ëª¨ë‘ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
    }
});
// ===== ì´ˆê¸°í™” =====
window.addEventListener('hashchange', handleRoute);
window.addEventListener('load', () => {
    setTimeout(hideSplash, 500);
    bindCalToggle('today');
    bindCalToggle('saju');
    if (!location.hash) location.hash = '#/home';
    handleRoute();
});
// ESC í‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸°
document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') {
        closeAllOverlays();
    }
});
console.log('âœ… MysticTell ì´ˆê¸°í™” ì™„ë£Œ');

// ê¸°ì¡´ calcMatch í•¨ìˆ˜ë¥¼ ì´ ì½”ë“œë¡œ êµì²´
function calcMatch(a, b) {
    if(!a || !b) return {score:null, text:'ë‘ ìƒë…„ì›”ì¼ì„ ëª¨ë‘ ì…ë ¥í•˜ì„¸ìš”.'};
    
    try {
        // ì‚¬ì£¼ ê¸°ë³¸ ì •ë³´ ê³„ì‚°
        const baziA = computeBaZi(a, '', 'solar', false);
        const baziB = computeBaZi(b, '', 'solar', false);
        
        // ì¼ê°„, ì—°ì§€ ì¶”ì¶œ
        const dayGanA = (baziA.pillars.day || '')[0] || '';
        const dayGanB = (baziB.pillars.day || '')[0] || '';
        const yearZhiA = (baziA.pillars.year || '')[1] || '';
        const yearZhiB = (baziB.pillars.year || '')[1] || '';
        
        // ì˜¤í–‰ ì¶”ì¶œ
        const elementA = GAN_WUXING[dayGanA] || '';
        const elementB = GAN_WUXING[dayGanB] || '';
        
        // 1. ì˜¤í–‰ ê¶í•© ê³„ì‚°
        let elementScore = 50;
        const compatible = {
            'æœ¨': ['ç«', 'æ°´'], 'ç«': ['æœ¨', 'åœŸ'], 'åœŸ': ['ç«', 'é‡‘'], 
            'é‡‘': ['åœŸ', 'æ°´'], 'æ°´': ['é‡‘', 'æœ¨']
        };
        const conflicted = {
            'æœ¨': ['é‡‘'], 'ç«': ['æ°´'], 'åœŸ': ['æœ¨'], 'é‡‘': ['ç«'], 'æ°´': ['åœŸ']
        };
        
        if (compatible[elementA] && compatible[elementA].includes(elementB)) {
            elementScore += 25; // ìƒìƒ ê´€ê³„
        } else if (conflicted[elementA] && conflicted[elementA].includes(elementB)) {
            elementScore -= 20; // ìƒê·¹ ê´€ê³„
        } else if (elementA === elementB) {
            elementScore += 15; // ê°™ì€ ì˜¤í–‰
        }
        
        // 2. ë  ê¶í•© ê³„ì‚° (12ì§€ì§€ ê¸°ë°˜)
        let zodiacScore = 50;
        const zodiacCompatibility = {
            'å­': { best: ['ç”³', 'è¾°'], good: ['ä¸‘', 'äº¥'], bad: ['åˆ'] }, // ì¥
            'ä¸‘': { best: ['å·³', 'é…‰'], good: ['å­', 'å¯'], bad: ['æœª'] }, // ì†Œ
            'å¯…': { best: ['åˆ', 'æˆŒ'], good: ['äº¥', 'å¯'], bad: ['ç”³'] }, // í˜¸ë‘ì´
            'å¯': { best: ['æœª', 'äº¥'], good: ['å¯…', 'æˆŒ'], bad: ['é…‰'] }, // í† ë¼
            'è¾°': { best: ['ç”³', 'å­'], good: ['é…‰', 'ä¸‘'], bad: ['æˆŒ'] }, // ìš©
            'å·³': { best: ['é…‰', 'ä¸‘'], good: ['ç”³', 'è¾°'], bad: ['äº¥'] }, // ë±€
            'åˆ': { best: ['æˆŒ', 'å¯…'], good: ['æœª', 'å¯'], bad: ['å­'] }, // ë§
            'æœª': { best: ['äº¥', 'å¯'], good: ['åˆ', 'å¯…'], bad: ['ä¸‘'] }, // ì–‘
            'ç”³': { best: ['å­', 'è¾°'], good: ['å·³', 'é…‰'], bad: ['å¯…'] }, // ì›ìˆ­ì´
            'é…‰': { best: ['ä¸‘', 'å·³'], good: ['è¾°', 'ç”³'], bad: ['å¯'] }, // ë‹­
            'æˆŒ': { best: ['å¯…', 'åˆ'], good: ['å¯', 'æœª'], bad: ['è¾°'] }, // ê°œ
            'äº¥': { best: ['å¯', 'æœª'], good: ['å¯…', 'æˆŒ'], bad: ['å·³'] }  // ë¼ì§€
        };
        
        const zodiacA = zodiacCompatibility[yearZhiA];
        if (zodiacA) {
            if (zodiacA.best && zodiacA.best.includes(yearZhiB)) {
                zodiacScore += 30;
            } else if (zodiacA.good && zodiacA.good.includes(yearZhiB)) {
                zodiacScore += 15;
            } else if (zodiacA.bad && zodiacA.bad.includes(yearZhiB)) {
                zodiacScore -= 20;
            }
        }
        
        // 3. ë‚˜ì´ì°¨ ê³ ë ¤
        let ageScore = 50;
        const yearA = baziA.solar ? baziA.solar.getYear() : 2000;
        const yearB = baziB.solar ? baziB.solar.getYear() : 2000;
        const ageDiff = Math.abs(yearA - yearB);
        if (ageDiff <= 2) ageScore += 20;
        else if (ageDiff <= 5) ageScore += 15;
        else if (ageDiff <= 8) ageScore += 5;
        else if (ageDiff > 15) ageScore -= 15;
        
        // 4. ì˜¤í–‰ ê· í˜•ë„ ê³ ë ¤
        let balanceScore = 50;
        const KEYS = ['æœ¨','ç«','åœŸ','é‡‘','æ°´'];
        const totalA = KEYS.reduce((a,k)=>a+(baziA.countsAll[k]||0),0);
        const totalB = KEYS.reduce((a,k)=>a+(baziB.countsAll[k]||0),0);
        
        if (totalA > 0 && totalB > 0) {
            const balanceA = Math.max(...KEYS.map(k => baziA.countsAll[k]||0)) - Math.min(...KEYS.map(k => baziA.countsAll[k]||0));
            const balanceB = Math.max(...KEYS.map(k => baziB.countsAll[k]||0)) - Math.min(...KEYS.map(k => baziB.countsAll[k]||0));
            const balanceDiff = Math.abs(balanceA - balanceB);
            balanceScore = Math.max(20, 70 - balanceDiff * 8);
        }
        
        // ìµœì¢… ì ìˆ˜ (ê°€ì¤‘í‰ê· )
        const finalScore = Math.round(
            elementScore * 0.35 + 
            zodiacScore * 0.25 + 
            ageScore * 0.25 + 
            balanceScore * 0.15
        );
        const clampedScore = Math.max(15, Math.min(95, finalScore));
        
        // ì˜¤í–‰ë³„ ì„±ê²© íŠ¹ì„± ë° ì¡°ì–¸ ë°ì´í„°
        const elementCharacteristics = {
            'æœ¨': {
                traits: 'ì„±ì¥ì§€í–¥ì , ê³„íšì , ì´ìƒì£¼ì˜ì , ê°ì •ì ',
                communication: 'ë…¼ë¦¬ì  ì„¤ëª…ë³´ë‹¤ ë¹„ì „ê³¼ ê°€ëŠ¥ì„± ì¤‘ì‹¬ìœ¼ë¡œ ëŒ€í™”',
                conflicts: 'ê¸‰í•œ ì„±ê²©ì„ ì´í•´í•˜ê³  ê¸°ë‹¤ë ¤ì£¼ê¸°, ë³€í™” ìš”êµ¬ì‹œ ë‹¨ê³„ì  ì ‘ê·¼',
                dateStyle: 'ìì—°ìŠ¤ëŸ¬ìš´ ì•¼ì™¸ í™œë™, ìƒˆë¡œìš´ ê²½í—˜, ë¯¸ë˜ ê³„íš ì„¸ìš°ê¸°'
            },
            'ç«': {
                traits: 'ì—´ì •ì , í‘œí˜„ë ¥ í’ë¶€, ì‚¬êµì , ì¦‰í¥ì ',
                communication: 'ê°ì •ì„ ì¶©ë¶„íˆ í‘œí˜„í•  ìˆ˜ ìˆëŠ” ë¶„ìœ„ê¸° ì¡°ì„±',
                conflicts: 'ê°ì •ì´ ê²©í•´ì§ˆ ë•Œ ì ì‹œ ì‹œê°„ì„ ë‘ê³  ëŒ€í™”, ì¸ì •ë°›ê³  ì‹¶ì–´í•˜ëŠ” ìš•êµ¬ ì´í•´',
                dateStyle: 'í™œê¸°ì°¬ ì¥ì†Œ, íŒŒí‹°ë‚˜ ì´ë²¤íŠ¸, ì°½ì˜ì  í™œë™'
            },
            'åœŸ': {
                traits: 'ì•ˆì •ì , ì‹ ë¢°í•  ìˆ˜ ìˆëŠ”, í˜„ì‹¤ì , ë³´ìˆ˜ì ',
                communication: 'êµ¬ì²´ì ì´ê³  ì‹¤ì§ˆì ì¸ ë‚´ìš© ì¤‘ì‹¬ìœ¼ë¡œ ëŒ€í™”',
                conflicts: 'ë³€í™”ë¥¼ ì²œì²œíˆ ë°›ì•„ë“¤ì´ë¯€ë¡œ ì¸ë‚´ì‹¬ í•„ìš”, ì•ˆì •ê° ì œê³µ',
                dateStyle: 'í¸ì•ˆí•œ ì§‘ì—ì„œì˜ ì‹œê°„, ì „í†µì ì¸ ë°ì´íŠ¸, ë§›ì§‘ íƒë°©'
            },
            'é‡‘': {
                traits: 'ì›ì¹™ì , ë¶„ì„ì , ì™„ë²½ì£¼ì˜, ë…ë¦½ì ',
                communication: 'ë…¼ë¦¬ì ì´ê³  ì²´ê³„ì ì¸ ì„¤ëª…, ê°œì¸ ì‹œê°„ ì¡´ì¤‘',
                conflicts: 'ë¹„íŒë³´ë‹¤ ê±´ì„¤ì  ì œì•ˆìœ¼ë¡œ ì ‘ê·¼, ì™„ë²½í•¨ì— ëŒ€í•œ ì••ë°• ì¤„ì´ê¸°',
                dateStyle: 'ë¬¸í™”ì  í™œë™, ë°•ë¬¼ê´€ì´ë‚˜ ì „ì‹œíšŒ, ê³ ê¸‰ìŠ¤ëŸ¬ìš´ ì¥ì†Œ'
            },
            'æ°´': {
                traits: 'ìœ ì—°í•œ, ì ì‘ë ¥ ì¢‹ì€, ì§ê°ì , í•™ìŠµì§€í–¥ì ',
                communication: 'ë‹¤ì–‘í•œ ì£¼ì œë¡œ ê¹Šì´ ìˆëŠ” ëŒ€í™”, í˜¸ê¸°ì‹¬ ì¶©ì¡±',
                conflicts: 'ìš°ìœ ë¶€ë‹¨í•  ë•Œ ì„ íƒ ë„ì›€, ë³€í™”ë¬´ìŒí•¨ì„ ì´í•´í•˜ê³  ìˆ˜ìš©',
                dateStyle: 'ì§€ì  í˜¸ê¸°ì‹¬ ìê·¹í•˜ëŠ” í™œë™, ì±…ë°©ì´ë‚˜ ê°•ì˜, ì—¬í–‰'
            }
        };
        
        // ê´€ê³„ ë°œì „ ë‹¨ê³„ë³„ ì¡°ì–¸ ìƒì„±
        function generateStageAdvice(elemA, elemB, score) {
            const charA = elementCharacteristics[elementA];
            const charB = elementCharacteristics[elementB];
            
            let advice = {
                initial: '', // ì—°ì•  ì´ˆê¸°
                development: '', // ê´€ê³„ ë°œì „ê¸°
                commitment: '' // ê²°í˜¼/ë™ê±° ì¤€ë¹„
            };
            
            if (score >= 70) {
                advice.initial = `ì—°ì•  ì´ˆê¸°ì—ëŠ” ${charA?.dateStyle || 'ì·¨í–¥ì— ë§ëŠ” í™œë™'}ê³¼ ${charB?.dateStyle || 'ìƒëŒ€ë°©ì´ ì¢‹ì•„í•˜ëŠ” í™œë™'}ì„ ë²ˆê°ˆì•„ê°€ë©° ì¦ê²¨ë³´ì„¸ìš”. ì„œë¡œì˜ ë‹¤ë¥¸ ë§¤ë ¥ì„ ë°œê²¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
                advice.development = `ê´€ê³„ê°€ ê¹Šì–´ì§€ë©´ì„œ ${charA?.communication || 'ì†”ì§í•œ ì†Œí†µ'}ê³¼ ${charB?.communication || 'ì§„ì‹¬ ì–´ë¦° ëŒ€í™”'}ë¥¼ í†µí•´ ë”ìš± ëˆëˆí•œ ìœ ëŒ€ê°ì„ í˜•ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
                advice.commitment = `ê²°í˜¼ì´ë‚˜ ë™ê±°ë¥¼ ê³ ë ¤í•  ë•ŒëŠ” ë‘ ë¶„ì˜ ìƒí™œ íŒ¨í„´ê³¼ ê°€ì¹˜ê´€ì´ ì˜ ë§ìœ¼ë¯€ë¡œ ìì—°ìŠ¤ëŸ½ê²Œ ì§„í–‰ë  ê²ƒì…ë‹ˆë‹¤. êµ¬ì²´ì ì¸ ë¯¸ë˜ ê³„íšì„ í•¨ê»˜ ì„¸ì›Œë³´ì„¸ìš”.`;
            } else if (score >= 50) {
                advice.initial = `ì²˜ìŒì—ëŠ” ì„œë¡œì˜ ì°¨ì´ì ì´ ìƒˆë¡­ê²Œ ëŠê»´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ${charA?.dateStyle || 'í¸ì•ˆí•œ í™œë™'}ë¶€í„° ì‹œì‘í•´ì„œ ì ì°¨ ì·¨í–¥ì˜ í­ì„ ë„“í˜€ê°€ì„¸ìš”.`;
                advice.development = `ê´€ê³„ ë°œì „ ê³¼ì •ì—ì„œ ${charA?.conflicts || 'ì„œë¡œë¥¼ ì´í•´í•˜ë ¤ëŠ” ë…¸ë ¥'}ì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ê°ˆë“±ì´ ìƒê¸°ë©´ ${charB?.communication || 'ì—´ë¦° ë§ˆìŒìœ¼ë¡œ ëŒ€í™”'}í•˜ì„¸ìš”.`;
                advice.commitment = `ì§„ì§€í•œ ê´€ê³„ë¡œ ë°œì „í•˜ë ¤ë©´ ìƒí™œ ë°©ì‹ê³¼ ê°€ì¹˜ê´€ì˜ ì°¨ì´ë¥¼ ì¶©ë¶„íˆ ë…¼ì˜í•˜ê³  íƒ€í˜‘ì ì„ ì°¾ëŠ” ì‹œê°„ì´ í•„ìš”í•©ë‹ˆë‹¤.`;
            } else {
                advice.initial = `ì´ˆê¸°ì—ëŠ” ì„œë¡œì˜ ë‹¤ë¦„ì„ ë°›ì•„ë“¤ì´ëŠ” ì—°ìŠµì´ í•„ìš”í•©ë‹ˆë‹¤. ë¬´ë¦¬í•˜ì§€ ë§ê³  ì²œì²œíˆ ì„œë¡œë¥¼ ì•Œì•„ê°€ì„¸ìš”.`;
                advice.development = `ê´€ê³„ ë°œì „ì—ëŠ” ë” ë§ì€ ì¸ë‚´ì™€ ë…¸ë ¥ì´ í•„ìš”í•©ë‹ˆë‹¤. ${charA?.conflicts || 'ìƒëŒ€ë°©ì˜ ê´€ì ì„ ì´í•´í•˜ë ¤ ë…¸ë ¥'}í•˜ê³  ${charB?.conflicts || 'ë°°ë ¤í•˜ëŠ” ë§ˆìŒ'}ì„ ê°€ì ¸ì£¼ì„¸ìš”.`;
                advice.commitment = `ì¥ê¸°ì ì¸ ê´€ê³„ë¥¼ ìœ„í•´ì„œëŠ” ì „ë¬¸ì ì¸ ìƒë‹´ì´ë‚˜ ê´€ê³„ ê°œì„  í”„ë¡œê·¸ë¨ì„ í•¨ê»˜ ì°¸ì—¬í•˜ëŠ” ê²ƒë„ ë„ì›€ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
            }
            
            return advice;
        }
        
        // 2025ë…„ ì‹ ë…„ìš´ì„¸ ê³„ì‚° í•¨ìˆ˜
function calc2025Fortune(birthDate, name = '') {
    if (!birthDate) {
        return { idx: null, text: 'ìƒë…„ì›”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”.' };
    }
    
    try {
        // ì‚¬ì£¼ ê¸°ë³¸ ì •ë³´ ê³„ì‚°
        const bazi = computeBaZi(birthDate, '', 'solar', false);
        const birthYear = bazi.solar ? bazi.solar.getYear() : 2000;
        const currentAge = 2025 - birthYear;
        
        // ìƒë…„ì›”ì¼ ìˆ«ì í•©ê³„ë¡œ ê¸°ë³¸ ì¸ë±ìŠ¤ ê³„ì‚°
        const [y, m, d] = birthDate.split('-').map(Number);
        let baseIndex = (y + m + d + 2025) % YEAR_2025_DATA.personalTypes.length;
        
        // ì¼ê°„ ì˜¤í–‰ìœ¼ë¡œ ë³´ì •
        const dayGan = (bazi.pillars.day || '')[0] || '';
        const dayElement = GAN_WUXING[dayGan] || '';
        const elementModifier = {
            'æœ¨': 0, 'ç«': 1, 'åœŸ': 2, 'é‡‘': 3, 'æ°´': 4
        };
        const finalIndex = (baseIndex + (elementModifier[dayElement] || 0)) % YEAR_2025_DATA.personalTypes.length;
        
        const personalFortune = YEAR_2025_DATA.personalTypes[finalIndex];
        
        // ë‚˜ì´ëŒ€ë³„ íŠ¹ë³„ ì¡°ì–¸ ìƒì„±
        function getAgeSpecificAdvice(age) {
            if (age < 25) {
                return 'ì Šì€ ì—ë„ˆì§€ë¥¼ í™œìš©í•˜ì—¬ ë‹¤ì–‘í•œ ê²½í—˜ì„ ìŒ“ìœ¼ì„¸ìš”. ì‹¤íŒ¨ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ë§ê³  ì ê·¹ì ìœ¼ë¡œ ë„ì „í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. 2025ë…„ì€ ì¸ìƒì˜ ê¸°ë°˜ì„ ë‹¤ì§€ëŠ” ì†Œì¤‘í•œ ì‹œê¸°ì…ë‹ˆë‹¤.';
            } else if (age < 35) {
                return 'ê²½ë ¥ ë°œì „ê³¼ ì¸ìƒ ì„¤ê³„ê°€ ì¤‘ìš”í•œ ì‹œê¸°ì…ë‹ˆë‹¤. ì„ì‚¬ë…„ì˜ ì§€í˜œë¡œìš´ ì—ë„ˆì§€ë¥¼ í™œìš©í•´ ì¥ê¸°ì ì¸ ê³„íšì„ ì„¸ìš°ê³  ì‹¤í–‰í•´ë³´ì„¸ìš”. ì´ ì‹œê¸°ì˜ ì„ íƒì´ í–¥í›„ 10ë…„ì„ ì¢Œìš°í•©ë‹ˆë‹¤.';
            } else if (age < 50) {
                return 'ê²½í—˜ê³¼ ì²´ë ¥ì´ ì¡°í™”ë¥¼ ì´ë£¨ëŠ” í™©ê¸ˆê¸°ì…ë‹ˆë‹¤. ë¦¬ë”ì‹­ì„ ë°œíœ˜í•˜ê³  í›„ë°°ë“¤ì„ ì´ëŒì–´ê°€ë©° ìì‹ ë§Œì˜ ì „ë¬¸ ì˜ì—­ì„ êµ¬ì¶•í•˜ì„¸ìš”. ì•ˆì •ê³¼ ë„ì „ì˜ ê· í˜•ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.';
            } else if (age < 65) {
                return 'í’ë¶€í•œ ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ ì§€í˜œë¡œìš´ íŒë‹¨ì„ í•˜ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ì¶•ì ëœ ì§€ì‹ê³¼ ì¸ë§¥ì„ í™œìš©í•´ ìƒˆë¡œìš´ ê°€ì¹˜ë¥¼ ì°½ì¶œí•˜ê³ , ì‚¬íšŒì— ê¸°ì—¬í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì°¾ì•„ë³´ì„¸ìš”.';
            } else {
                return 'ì¸ìƒì˜ ì—¬ìœ ì™€ ê¹Šì´ë¥¼ ë§Œë½í•  ì‹œê¸°ì…ë‹ˆë‹¤. ê·¸ë™ì•ˆì˜ ê²½í—˜ì„ í›„ì„¸ì— ì „í•˜ê³ , ì§„ì •í•œ í–‰ë³µê³¼ ë§Œì¡±ì„ ì¶”êµ¬í•˜ëŠ”ë° ì§‘ì¤‘í•˜ì„¸ìš”. ê±´ê°•ê´€ë¦¬ê°€ ê°€ì¥ ì¤‘ìš”í•©ë‹ˆë‹¤.';
            }
        }
        
        // ì›”ë³„ ìš´ì„¸ í¬ì¸íŠ¸ ìƒì„± (ê°„ë‹¨íˆ)
        function getMonthlyHighlights() {
            const luckyMonths = personalFortune.luckyPeriods.split(', ');
            return {
                best: luckyMonths[0] || 'ìƒë°˜ê¸°',
                good: luckyMonths[1] || 'ì¤‘ë°˜ê¸°',
                careful: personalFortune.cautions.includes('3ì›”') ? '3ì›”' : 'í•˜ë°˜ê¸°'
            };
        }
        
        return {
            idx: finalIndex,
            yearInfo: YEAR_2025_DATA.yearInfo,
            personalFortune: personalFortune,
            ageAdvice: getAgeSpecificAdvice(currentAge),
            monthlyHighlights: getMonthlyHighlights(),
            birthYear: birthYear,
            currentAge: currentAge,
            name: name,
            element: dayElement
        };
        
    } catch (error) {
        console.error('ì‹ ë…„ìš´ì„¸ ê³„ì‚° ì˜¤ë¥˜:', error);
        // ì˜¤ë¥˜ ì‹œ ê¸°ì¡´ ë°©ì‹ìœ¼ë¡œ í´ë°±
        const [y, m, d] = birthDate.split('-').map(Number);
        const k = (y + m + d + 2025) % 6;
        const basicTypes = [
            'ë„ì•½ì˜ í•´: ìƒˆë¡œìš´ ê¸°íšŒì™€ ì„±ì¥ì´ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.',
            'ì„±ì¥ì˜ í•´: ë°°ì›€ì— íˆ¬ìí• ìˆ˜ë¡ í° ë³´ìƒì´ ë”°ë¦…ë‹ˆë‹¤.',
            'ê´€ê³„ì˜ í•´: ì¸ê°„ê´€ê³„ì—ì„œ ìƒˆë¡œìš´ ê¸°íšŒë¥¼ ë°œê²¬í•˜ì„¸ìš”.',
            'ì•ˆì •ì˜ í•´: ê¸°ë°˜ì„ ë‹¤ì§€ê³  ì¬ì •ê´€ë¦¬ì— ì§‘ì¤‘í•˜ì„¸ìš”.',
            'ì „í™˜ì˜ í•´: ë³€í™”ë¥¼ ë°›ì•„ë“¤ì´ê³  ìƒˆë¡œìš´ ì‹œì‘ì„ ì¤€ë¹„í•˜ì„¸ìš”.',
            'íœ´ì‹ì˜ í•´: ê±´ê°•ê´€ë¦¬ì™€ ì—ë„ˆì§€ ì¶©ì „ì— ì§‘ì¤‘í•˜ì„¸ìš”.'
        ];
        return {
            idx: k,
            text: basicTypes[k]
        };
    }
}
        // ì‹ ë…„ìš´ì„¸ HTML ìƒì„± í•¨ìˆ˜
function create2025FortuneHTML(result, name) {
    const nameTitle = name ? `${name}ë‹˜ì˜ ` : '';
    
    if (!result.personalFortune) {
        // í´ë°± ëª¨ë“œ
        return `<div class="result-section">
            <div class="section-title-result">ğŸ ${nameTitle}2025ë…„ ì„ì‚¬ë…„ ìš´ì„¸</div>
            <div class="result-card main-result">
                <div class="card-value">${result.text}</div>
            </div>
        </div>`;
    }
    
    const { yearInfo, personalFortune, ageAdvice, monthlyHighlights } = result;
    
    return `
        <div class="result-section">
            <div class="section-title-result">ğŸ ${nameTitle}2025ë…„ ì„ì‚¬ë…„ ìš´ì„¸</div>
            
            <div class="year-overview-card">
                <div class="year-character">
                    <div class="year-element">${yearInfo.element}</div>
                    <div class="year-desc">${yearInfo.description}</div>
                    <div class="year-keywords">
                        ${yearInfo.keywords.map(keyword => `<span class="keyword-tag">${keyword}</span>`).join('')}
                    </div>
                </div>
            </div>
        </div>
        
        <div class="result-section">
            <div class="section-title-result">${personalFortune.icon} ${nameTitle}ê°œì¸ ìš´ì„¸</div>
            
            <div class="result-card main-result">
                <div class="card-header">
                    <div class="card-icon">${personalFortune.icon}</div>
                    <div class="card-title">${personalFortune.name}</div>
                </div>
                <div class="card-description">${personalFortune.description}</div>
            </div>
        </div>
        
        <div class="result-section">
            <div class="section-title-result">ğŸ“Š ë¶„ì•¼ë³„ 2025ë…„ ìš´ì„¸</div>
            
            <div class="result-card">
                <div class="card-header">
                    <div class="card-icon">ğŸ’¼</div>
                    <div class="card-title">ì§ì¥ìš´</div>
                </div>
                <div class="card-description">${personalFortune.sectors.career}</div>
            </div>
            
            <div class="result-card">
                <div class="card-header">
                    <div class="card-icon">ğŸ’•</div>
                    <div class="card-title">ì—°ì• ìš´</div>
                </div>
                <div class="card-description">${personalFortune.sectors.love}</div>
            </div>
            
            <div class="result-card">
                <div class="card-header">
                    <div class="card-icon">ğŸ’ª</div>
                    <div class="card-title">ê±´ê°•ìš´</div>
                </div>
                <div class="card-description">${personalFortune.sectors.health}</div>
            </div>
            
            <div class="result-card">
                <div class="card-header">
                    <div class="card-icon">ğŸ’°</div>
                    <div class="card-title">ì¬ë¬¼ìš´</div>
                </div>
                <div class="card-description">${personalFortune.sectors.money}</div>
            </div>
        </div>
        
        <div class="result-section">
            <div class="section-title-result">ğŸ“… 2025ë…„ ì£¼ìš” ì‹œê¸°</div>
            
            <div class="timeline-card">
                <div class="timeline-item">
                    <div class="timeline-icon">ğŸ€</div>
                    <div class="timeline-content">
                        <div class="timeline-title">íŠ¹íˆ ì¢‹ì€ ë‹¬</div>
                        <div class="timeline-desc">${personalFortune.luckyPeriods}</div>
                    </div>
                </div>
                <div class="timeline-item caution">
                    <div class="timeline-icon">âš ï¸</div>
                    <div class="timeline-content">
                        <div class="timeline-title">ì£¼ì˜í•  ì </div>
                        <div class="timeline-desc">${personalFortune.cautions}</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="result-section">
            <div class="section-title-result">ğŸ¯ ${result.currentAge}ì„¸ ë§ì¶¤ ì¡°ì–¸</div>
            <div class="result-card">
                <div class="card-header">
                    <div class="card-icon">ğŸ§­</div>
                    <div class="card-title">ì¸ìƒ ë‹¨ê³„ë³„ ê°€ì´ë“œ</div>
                </div>
                <div class="card-description">${ageAdvice}</div>
            </div>
        </div>
        
        <div class="result-section">
            <div class="section-title-result">ğŸ’¡ 2025ë…„ í•µì‹¬ ì‹¤ì²œ ì¡°ì–¸</div>
            <div class="result-card">
                <div class="card-header">
                    <div class="card-icon">â­</div>
                    <div class="card-title">ì„±ê³µì˜ ì—´ì‡ </div>
                </div>
                <div class="card-description">${personalFortune.advice}</div>
            </div>
        </div>
        
        <div class="info-box">
            <div class="info-title">ğŸ“ 2025ë…„ ì‹¤ì²œ ì²´í¬ë¦¬ìŠ¤íŠ¸</div>
            <div class="info-content">
                <strong>í•µì‹¬ í…Œë§ˆ:</strong> ${personalFortune.name}<br/>
                <strong>ì£¼ìš” í‚¤ì›Œë“œ:</strong> ${personalFortune.keywords.join(', ')}<br/>
                <strong>ì‹¤ì²œ í¬ì¸íŠ¸:</strong> ${personalFortune.advice}
            </div>
        </div>
    `;
}
        
        // ê°ˆë“± í•´ê²° ë°©ì•ˆ ìƒì„±
        function generateConflictSolutions(elemA, elemB) {
            const charA = elementCharacteristics[elementA];
            const charB = elementCharacteristics[elementB];
            
            let solutions = [];
            
            // ì˜¤í–‰ ìƒê·¹ ê´€ê³„ë³„ íŠ¹í™”ëœ ì¡°ì–¸
            if (conflicted[elementA] && conflicted[elementA].includes(elementB)) {
                if (elementA === 'æœ¨' && elementB === 'é‡‘') {
                    solutions.push('ëª©(ì„±ì¥ì§€í–¥)ê³¼ ê¸ˆ(ì›ì¹™ì¤‘ì‹¬)ì˜ ê°ˆë“±: ê³„íš ì„¸ìš¸ ë•ŒëŠ” ëª©ì˜ ë¹„ì „ì„ ì¡´ì¤‘í•˜ë˜, ì‹¤í–‰í•  ë•ŒëŠ” ê¸ˆì˜ ì²´ê³„ì„±ì„ í™œìš©í•˜ì„¸ìš”.');
                } else if (elementA === 'ç«' && elementB === 'æ°´') {
                    solutions.push('í™”(ì—´ì •)ì™€ ìˆ˜(ì‹ ì¤‘í•¨)ì˜ ê°ˆë“±: ì¤‘ìš”í•œ ê²°ì •ì€ í™”ì˜ ì§ê°ê³¼ ìˆ˜ì˜ ë¶„ì„ì„ ëª¨ë‘ ê±°ì³ì„œ ë‚´ë¦¬ì„¸ìš”.');
                } else if (elementA === 'åœŸ' && elementB === 'æœ¨') {
                    solutions.push('í† (ì•ˆì •)ì™€ ëª©(ë³€í™”)ì˜ ê°ˆë“±: ë³€í™”ê°€ í•„ìš”í•  ë•ŒëŠ” ì‘ì€ ë‹¨ê³„ë¶€í„° ì‹œì‘í•´ì„œ ì ì§„ì ìœ¼ë¡œ ì§„í–‰í•˜ì„¸ìš”.');
                }
            }
            
            // ê³µí†µ ê°ˆë“± í•´ê²° ë°©ì•ˆ
            solutions.push(`ì˜ì‚¬ì†Œí†µ: ${charA?.communication || 'ì„œë¡œì˜ ì†Œí†µ ë°©ì‹ì„ ì´í•´'}í•˜ê³  ${charB?.communication || 'ìƒëŒ€ë°©ì—ê²Œ ë§ëŠ” ë°©ì‹ìœ¼ë¡œ ëŒ€í™”'}í•˜ì„¸ìš”.`);
            solutions.push(`ê°ˆë“± ì˜ˆë°©: ${charA?.conflicts || 'ìƒëŒ€ë°©ì˜ ì„±í–¥ì„ ë¯¸ë¦¬ íŒŒì•…'}í•˜ê³  ${charB?.conflicts || 'ë°°ë ¤í•˜ëŠ” ë§ˆìŒ'}ì„ ê°€ì ¸ì£¼ì„¸ìš”.`);
            solutions.push('íƒ€ì´ë°: ë¯¼ê°í•œ ëŒ€í™”ëŠ” ë‘ ë¶„ ëª¨ë‘ ì»¨ë””ì…˜ì´ ì¢‹ê³  ì‹œê°„ ì—¬ìœ ê°€ ìˆì„ ë•Œ í•˜ì„¸ìš”.');
            solutions.push('ê³µí†µ ê´€ì‹¬ì‚¬: ì„œë¡œ ë‹¤ë¥¸ ì·¨í–¥ ì‚¬ì´ì—ì„œ ê³µí†µë¶„ëª¨ë¥¼ ì°¾ì•„ í•¨ê»˜ ì¦ê¸¸ ìˆ˜ ìˆëŠ” í™œë™ì„ ê°œë°œí•˜ì„¸ìš”.');
            
            return solutions;
        }
        
        // ìƒì„¸ ë¶„ì„ í…ìŠ¤íŠ¸ ìƒì„±
        const elementNames = {'æœ¨':'ëª©','ç«':'í™”','åœŸ':'í† ','é‡‘':'ê¸ˆ','æ°´':'ìˆ˜'};
        const elemA = elementNames[elementA] || '?';
        const elemB = elementNames[elementB] || '?';
        
        const zodiacNames = {
            'å­':'ì¥','ä¸‘':'ì†Œ','å¯…':'í˜¸ë‘ì´','å¯':'í† ë¼','è¾°':'ìš©','å·³':'ë±€',
            'åˆ':'ë§','æœª':'ì–‘','ç”³':'ì›ìˆ­ì´','é…‰':'ë‹­','æˆŒ':'ê°œ','äº¥':'ë¼ì§€'
        };
        const zodiacA_name = zodiacNames[yearZhiA] || '?';
        const zodiacB_name = zodiacNames[yearZhiB] || '?';
        
        // ê¸°ì¡´ text ìƒì„± ë¶€ë¶„ì„ ì´ë ‡ê²Œ êµì²´
let text = '';
if (clampedScore >= 85) {
    text = `ì²œìƒì—°ë¶„ì˜ ê¶í•©ì…ë‹ˆë‹¤! ${elemA}(${elementA})ê³¼ ${elemB}(${elementB}) ê¸°ì§ˆì´ ì™„ë²½í•˜ê²Œ ì¡°í™”ë¥¼ ì´ë£¨ì–´ ì„œë¡œì˜ ì¥ì ì„ ê·¹ëŒ€í™”ì‹œí‚¤ê³  ë‹¨ì ì„ ìì—°ìŠ¤ëŸ½ê²Œ ë³´ì™„í•©ë‹ˆë‹¤. ${zodiacA_name}ë ì˜ ${getZodiacTraits(yearZhiA)}ê³¼ ${zodiacB_name}ë ì˜ ${getZodiacTraits(yearZhiB)}ì´ ë§¤ìš° ì˜ ì–´ìš¸ë¦¬ë©°, ${ageDiff}ì„¸ì˜ ë‚˜ì´ì°¨ëŠ” ì„œë¡œì—ê²Œ ì‹ ì„ í•¨ê³¼ ì•ˆì •ê°ì„ ë™ì‹œì— ì œê³µí•©ë‹ˆë‹¤. ì´ ê´€ê³„ì—ì„œëŠ” ê¹Šì€ ì •ì‹ ì  êµê°ì´ ê°€ëŠ¥í•˜ê³ , ì„œë¡œë¥¼ ì„±ì¥ì‹œí‚¤ëŠ” ë™ë°˜ì ê´€ê³„ë¡œ ë°œì „í•  ê°€ëŠ¥ì„±ì´ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤. ì—°ì• ë¶€í„° ê²°í˜¼ê¹Œì§€ ìì—°ìŠ¤ëŸ½ê²Œ í˜ëŸ¬ê°ˆ ê²ƒì´ë©°, ì£¼ë³€ì—ì„œë„ ë¶€ëŸ¬ì›Œí•˜ëŠ” ì´ìƒì ì¸ ì»¤í”Œì´ ë  ê²ƒì…ë‹ˆë‹¤.`;
} else if (clampedScore >= 70) {
    text = `ë§¤ìš° ì¢‹ì€ ê¶í•©ì…ë‹ˆë‹¤. ${elemA} ì„±í–¥ì˜ ${getElementPersonality(elementA)}ê³¼ ${elemB} ì„±í–¥ì˜ ${getElementPersonality(elementB)}ì´ ì„œë¡œ ë„ì›€ì„ ì£¼ëŠ” ê´€ê³„ì…ë‹ˆë‹¤. ${zodiacA_name}ë ì™€ ${zodiacB_name}ë ì˜ ì¡°í•©ì€ ì „í†µì ìœ¼ë¡œ ì¢‹ì€ ê¶í•©ìœ¼ë¡œ ì—¬ê²¨ì§€ë©°, ì‹¤ì œë¡œë„ ë§ì€ ë¶€ë¶„ì—ì„œ ì˜ ë§ì„ ê²ƒì…ë‹ˆë‹¤. ê°€ë” ì˜ê²¬ ì°¨ì´ê°€ ìˆì„ ìˆ˜ ìˆì§€ë§Œ, ì´ëŠ” ê´€ê³„ë¥¼ ë”ìš± í’ìš”ë¡­ê²Œ ë§Œë“œëŠ” ìš”ì†Œê°€ ë©ë‹ˆë‹¤. ${ageDiff}ì„¸ì˜ ë‚˜ì´ì°¨ëŠ” ì„œë¡œ ë‹¤ë¥¸ ê´€ì ì„ ì œê³µí•˜ì—¬ ì‹œì•¼ë¥¼ ë„“í˜€ì£¼ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ì†Œí†µê³¼ ë°°ë ¤ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì„œë¡œì˜ ì°¨ì´ë¥¼ ì¡´ì¤‘í•œë‹¤ë©´ ë§¤ìš° í–‰ë³µí•˜ê³  ì•ˆì •ì ì¸ ê´€ê³„ë¥¼ ë§Œë“¤ì–´ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
} else if (clampedScore >= 55) {
    text = `ë¬´ë‚œí•œ ê¶í•©ìœ¼ë¡œ ë…¸ë ¥ì— ë”°ë¼ ì¢‹ì€ ê´€ê³„ë¡œ ë°œì „í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ${elemA} ê¸°ì§ˆê³¼ ${elemB} ê¸°ì§ˆì€ ìƒë°˜ëœ ë©´ì´ ìˆì§€ë§Œ, ì´ëŠ” ì„œë¡œì—ê²Œ ë¶€ì¡±í•œ ë¶€ë¶„ì„ ì±„ì›Œì¤„ ìˆ˜ ìˆëŠ” ê¸°íšŒì´ê¸°ë„ í•©ë‹ˆë‹¤. ${zodiacA_name}ë ì˜ íŠ¹ì„±ê³¼ ${zodiacB_name}ë ì˜ ì„±í–¥ì´ ë‹¤ì†Œ ë‹¤ë¥´ì§€ë§Œ, ì´í•´í•˜ë ¤ëŠ” ë…¸ë ¥ì„ í†µí•´ ê·¹ë³µ ê°€ëŠ¥í•©ë‹ˆë‹¤. ${ageDiff}ì„¸ì˜ ë‚˜ì´ ì°¨ì´ë¡œ ì¸í•´ ìƒí™œ íŒ¨í„´ì´ë‚˜ ê°€ì¹˜ê´€ì—ì„œ ì°¨ì´ê°€ ë‚  ìˆ˜ ìˆìœ¼ë‚˜, ì´ëŠ” ì„œë¡œë¥¼ ë°°ìš°ê³  ì„±ìˆ™í•´ì§€ëŠ” ê³„ê¸°ê°€ ë  ê²ƒì…ë‹ˆë‹¤. ì´ˆê¸°ì—ëŠ” ì„œë¡œë¥¼ ì´í•´í•˜ëŠ” ì‹œê°„ì´ í•„ìš”í•˜ì§€ë§Œ, ì¸ë‚´ì‹¬ì„ ê°–ê³  ê¾¸ì¤€íˆ ì†Œí†µí•œë‹¤ë©´ ì•ˆì •ì ì´ê³  ê· í˜•ì¡íŒ ê´€ê³„ë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
} else if (clampedScore >= 40) {
    text = `ì¡°ê¸ˆ ì–´ë ¤ìš´ ê¶í•©ì´ì§€ë§Œ ê·¹ë³µ ë¶ˆê°€ëŠ¥í•˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤. ${elemA}ê³¼ ${elemB} ì˜¤í–‰ ê´€ê³„ì—ì„œ ìƒê·¹ ìš”ì†Œê°€ ìˆì–´ ê¸°ë³¸ì ì¸ ì„±í–¥ê³¼ ì ‘ê·¼ ë°©ì‹ì´ ë§ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ${zodiacA_name}ë ì™€ ${zodiacB_name}ë ëŠ” ì„œë¡œ ë‹¤ë¥¸ ê°€ì¹˜ê´€ê³¼ ìƒí™œ ë°©ì‹ì„ ì„ í˜¸í•˜ëŠ” ê²½í–¥ì´ ìˆì–´ ì´ˆê¸° ì ì‘ì— ì‹œê°„ì´ ê±¸ë¦´ ê²ƒì…ë‹ˆë‹¤. ${ageDiff}ì„¸ì˜ ë‚˜ì´ì°¨ë¡œ ì¸í•œ ì„¸ëŒ€ ì°¨ì´ë‚˜ ê²½í—˜ì˜ ì°¨ì´ë„ ê°ˆë“± ìš”ì†Œê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì„œë¡œì˜ ë‹¤ë¦„ì„ ì¸ì •í•˜ê³  ì¡´ì¤‘í•˜ë©°, ê¾¸ì¤€í•œ ëŒ€í™”ì™€ ì–‘ë³´ë¥¼ í†µí•´ ê´€ê³„ë¥¼ ê°œì„ í•´ë‚˜ê°„ë‹¤ë©´ ì˜¤íˆë ¤ ë” ê¹Šê³  ì„±ìˆ™í•œ ì‚¬ë‘ì„ ë§Œë“¤ì–´ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¸‰í•˜ê²Œ ì„œë‘ë¥´ì§€ ë§ê³  ì¶©ë¶„í•œ ì‹œê°„ì„ ê°–ê³  ì„œë¡œë¥¼ ì´í•´í•´ë‚˜ê°€ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.`;
} else {
    text = `í˜ë“  ê¶í•©ì´ì§€ë§Œ ì§„ì •í•œ ì‚¬ë‘ìœ¼ë¡œ ê·¹ë³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ${elemA} ê¸°ì§ˆê³¼ ${elemB} ê¸°ì§ˆì˜ ì°¨ì´ê°€ ì»¤ì„œ ê¸°ë³¸ì ì¸ ì‚¬ê³ ë°©ì‹ê³¼ í–‰ë™ íŒ¨í„´ì´ ë§ì´ ë‹¤ë¥¼ ê²ƒì…ë‹ˆë‹¤. ${zodiacA_name}ë ì™€ ${zodiacB_name}ë ëŠ” ì „í†µì ìœ¼ë¡œ ê°ˆë“±ì´ ìˆì„ ìˆ˜ ìˆëŠ” ì¡°í•©ì´ë©°, ì¼ìƒìƒí™œì—ì„œë„ ë§ˆì°°ì´ ìƒê¸¸ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤. ${ageDiff}ì„¸ì˜ ë‚˜ì´ì°¨ëŠ” ì†Œí†µì— ì–´ë ¤ì›€ì„ ì¤„ ìˆ˜ ìˆê³ , ì„œë¡œì˜ ê´€ì‹¬ì‚¬ë‚˜ ìƒí™œ ë¦¬ë“¬ì´ ë§ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŸ° ì–´ë ¤ì›€ì—ë„ ë¶ˆêµ¬í•˜ê³  ì„œë¡œì— ëŒ€í•œ ê¹Šì€ ì‚¬ë‘ê³¼ ì´í•´ê°€ ìˆë‹¤ë©´, ì°¨ì´ì ë“¤ì„ ë³´ì™„í•˜ê³  ìƒˆë¡œìš´ ì¡°í™”ë¥¼ ë§Œë“¤ì–´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì „ë¬¸ì ì¸ ê´€ê³„ ìƒë‹´ì„ ë°›ëŠ” ê²ƒë„ ë„ì›€ì´ ë  ê²ƒì´ë©°, ë¬´ì—‡ë³´ë‹¤ ì„œë¡œì— ëŒ€í•œ ì¸ë‚´ì‹¬ê³¼ í¬ìš©ë ¥ì´ ê´€ê³„ ì„±ê³µì˜ ì—´ì‡ ê°€ ë©ë‹ˆë‹¤.`;
}

// ë ë³„ íŠ¹ì„±ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ ì¶”ê°€
function getZodiacTraits(zhi) {
    const traits = {
        'å­': 'ê¸°ë¯¼í•¨ê³¼ ì ì‘ë ¥',
        'ä¸‘': 'ì„±ì‹¤í•¨ê³¼ ëˆê¸°',
        'å¯…': 'ìš©ê¸°ì™€ ë¦¬ë”ì‹­',
        'å¯': 'ì˜¨í™”í•¨ê³¼ ì„¸ì‹¬í•¨',
        'è¾°': 'í¬ìš©ë ¥ê³¼ ì¹´ë¦¬ìŠ¤ë§ˆ',
        'å·³': 'ì§€í˜œì™€ ì§ê°',
        'åˆ': 'ì—´ì •ê³¼ í™œë ¥',
        'æœª': 'ë°°ë ¤ì‹¬ê³¼ í˜‘ì¡°ì„±',
        'ç”³': 'ì¬ì¹˜ì™€ ì°½ì˜ì„±',
        'é…‰': 'ì™„ë²½ì£¼ì˜ì™€ ì±…ì„ê°',
        'æˆŒ': 'ì¶©ì‹¤í•¨ê³¼ ì •ì§í•¨',
        'äº¥': 'ìˆœìˆ˜í•¨ê³¼ ê´€ëŒ€í•¨'
    };
    return traits[zhi] || 'ë…íŠ¹í•œ ê°œì„±';
}

// ì˜¤í–‰ë³„ ì„±ê²©ì„ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ ì¶”ê°€
function getElementPersonality(element) {
    const personalities = {
        'æœ¨': 'ì„±ì¥ê³¼ ë°œì „ì„ ì¶”êµ¬í•˜ëŠ” ì§„ì·¨ì  ì„±ê²©',
        'ç«': 'ì—´ì •ê³¼ í‘œí˜„ë ¥ì´ ë›°ì–´ë‚œ ì™¸í–¥ì  ì„±ê²©',
        'åœŸ': 'ì•ˆì •ê³¼ ì‹ ë¢°ë¥¼ ì¤‘ì‹œí•˜ëŠ” ë“ ë“ í•œ ì„±ê²©',
        'é‡‘': 'ì›ì¹™ê³¼ ì™„ë²½ì„ ì¶”êµ¬í•˜ëŠ” ì²´ê³„ì  ì„±ê²©',
        'æ°´': 'ìœ ì—°í•¨ê³¼ ì ì‘ë ¥ì„ ê°€ì§„ ì§€ì ì¸ ì„±ê²©'
    };
    return personalities[element] || 'ë…íŠ¹í•œ ê°œì„±';
}
        
        // ë‹¨ê³„ë³„ ì¡°ì–¸ ë° ê°ˆë“± í•´ê²° ë°©ì•ˆ ìƒì„±
        const stageAdvice = generateStageAdvice(elementA, elementB, clampedScore);
        const conflictSolutions = generateConflictSolutions(elementA, elementB);
        
        return {
            score: clampedScore, 
            text: text,
            details: {
                elementA: elemA, elementB: elemB,
                zodiacA: zodiacA_name, zodiacB: zodiacB_name,
                elementScore: elementScore,
                zodiacScore: zodiacScore,
                ageScore: ageScore,
                balanceScore: balanceScore,
                ageDiff: ageDiff
            },
            advice: {
                stages: stageAdvice,
                conflicts: conflictSolutions,
                characteristics: {
                    A: elementCharacteristics[elementA],
                    B: elementCharacteristics[elementB]
                }
            }
        };
        
    } catch (error) {
        console.error('ê¶í•© ê³„ì‚° ì˜¤ë¥˜:', error);
        // ì˜¤ë¥˜ ì‹œ ê¸°ì¡´ ë°©ì‹ìœ¼ë¡œ í´ë°±
        const seed = (a + b).replaceAll('-','');
        let h = 0;
        for(let i = 0; i < seed.length; i++) {
            h = (h * 33 + seed.charCodeAt(i)) % 100000;
        }
        const s = h % 101;
        const text = 'ê¸°ë³¸ ê¶í•© ë¶„ì„ì…ë‹ˆë‹¤. ì„œë¡œ ì´í•´í•˜ë ¤ ë…¸ë ¥í•˜ë©´ ì¢‹ì€ ê´€ê³„ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
        return {score: s, text: text};
    }
}

// ê¶í•© ë²„íŠ¼ ì´ë²¤íŠ¸ (í•˜ë‚˜ë¡œ í†µí•©)
setTimeout(() => {
    const btn = document.getElementById('btnMatch');
    if (btn) {
        btn.addEventListener('click', () => {
            const a = document.getElementById('match-a').value;
            const b = document.getElementById('match-b').value;
            const nameA = document.getElementById('match-name-a')?.value || 'ì²« ë²ˆì§¸ ë¶„';
            const nameB = document.getElementById('match-name-b')?.value || 'ë‘ ë²ˆì§¸ ë¶„';
            
            const result = calcMatch(a, b);
            
            if(result.score === null) {
                alert(result.text);
                return;
            }
            
            // ê¸°ì¡´ setTimeout ë‚´ë¶€ì˜ HTML ìƒì„± ë¶€ë¶„ì„ ì´ë ‡ê²Œ êµì²´
const html = `
    <div class="result-section">
        <div class="section-title-result">ğŸ’• ${nameA} & ${nameB} ìƒì„¸ ê¶í•© ë¶„ì„</div>
        <div class="result-card main-result">
            <div class="card-header">
                <div class="card-icon">ğŸ’˜</div>
                <div class="card-title">ì¢…í•© ê¶í•© ì ìˆ˜</div>
            </div>
            <div class="card-value">${result.score}ì </div>
            <div class="card-description">${result.text}</div>
        </div>
    </div>
    
    ${result.details ? `
    <div class="result-section">
        <div class="section-title-result">ğŸ” ë¶„ì•¼ë³„ ìƒì„¸ ë¶„ì„</div>
        <div class="result-card">
            <div class="card-header">
                <div class="card-icon">ğŸŒ¿</div>
                <div class="card-title">ì˜¤í–‰ ê¶í•©</div>
            </div>
            <div class="card-value">${result.details.elementScore}ì </div>
            <div class="card-description">${result.details.elementA} Ã— ${result.details.elementB} ì¡°í•©</div>
        </div>
        <div class="result-card">
            <div class="card-header">
                <div class="card-icon">ğŸ‰</div>
                <div class="card-title">ë  ê¶í•©</div>
            </div>
            <div class="card-value">${result.details.zodiacScore}ì </div>
            <div class="card-description">${result.details.zodiacA} Ã— ${result.details.zodiacB} ì¡°í•©</div>
        </div>
        <div class="result-card">
            <div class="card-header">
                <div class="card-icon">ğŸ‘«</div>
                <div class="card-title">ë‚˜ì´ì°¨ ì¡°í™”</div>
            </div>
            <div class="card-value">${result.details.ageScore}ì </div>
            <div class="card-description">${result.details.ageDiff}ì„¸ ì°¨ì´</div>
        </div>
        <div class="result-card">
            <div class="card-header">
                <div class="card-icon">âš–ï¸</div>
                <div class="card-title">ì˜¤í–‰ ê· í˜•</div>
            </div>
            <div class="card-value">${result.details.balanceScore}ì </div>
            <div class="card-description">ì„±í–¥ ê· í˜•ë„</div>
        </div>
    </div>
    ` : ''}
    
    ${result.advice ? `
    <div class="result-section">
        <div class="section-title-result">ğŸ’¡ ê´€ê³„ ë°œì „ ë‹¨ê³„ë³„ ì¡°ì–¸</div>
        <div class="result-card">
            <div class="card-header">
                <div class="card-icon">ğŸŒ±</div>
                <div class="card-title">ì—°ì•  ì´ˆê¸°</div>
            </div>
            <div class="card-description">${result.advice.stages.initial}</div>
        </div>
        <div class="result-card">
            <div class="card-header">
                <div class="card-icon">ğŸ’</div>
                <div class="card-title">ê´€ê³„ ë°œì „ê¸°</div>
            </div>
            <div class="card-description">${result.advice.stages.development}</div>
        </div>
        <div class="result-card">
            <div class="card-header">
                <div class="card-icon">ğŸ’’</div>
                <div class="card-title">ê²°í˜¼/ë™ê±° ì¤€ë¹„</div>
            </div>
            <div class="card-description">${result.advice.stages.commitment}</div>
        </div>
    </div>
    
    <div class="result-section">
        <div class="section-title-result">ğŸ¤ ê°ˆë“± í•´ê²° ê°€ì´ë“œ</div>
        ${result.advice.conflicts.map((solution, index) => `
            <div class="result-card">
                <div class="card-header">
                    <div class="card-icon">${index === 0 ? 'ğŸ¯' : index === 1 ? 'ğŸ’¬' : index === 2 ? 'â°' : 'ğŸª'}</div>
                    <div class="card-title">í•´ê²° ë°©ì•ˆ ${index + 1}</div>
                </div>
                <div class="card-description">${solution}</div>
            </div>
        `).join('')}
    </div>
    ` : ''}
`;
 openSheet('ê¶í•© ê²°ê³¼', html);
        });
    }
}, 3000);

// ì‹ ë…„ìš´ì„¸ ë²„íŠ¼ ì´ë²¤íŠ¸
setTimeout(() => {
    const btn = document.getElementById('btnYear');
    if (btn) {
        btn.addEventListener('click', () => {
            const birthDate = document.getElementById('year-birth').value;
            const name = document.getElementById('year-name')?.value?.trim() || '';
            
            if (!birthDate) {
                alert('ìƒë…„ì›”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”.');
                return;
            }
            
            const result = calc2025Fortune(birthDate, name);
            const html = create2025FortuneHTML(result, name);
            
            openSheet('2025ë…„ ìƒì„¸ ì‹ ë…„ìš´ì„¸', html, {
                type: 'enhanced-year',
                birthDate, name, result
            });
        });
    }
}, 3000);

// 2025ë…„ ì„ì‚¬ë…„ ë°ì´í„° ì •ì˜
const YEAR_2025_DATA = {
    yearInfo: {
        element: "ì„ì‚¬(ä¹™å·³)",
        description: "ì§€í˜œì™€ ë³€í™”ì˜ í•´",
        keywords: ["ì§€í˜œ", "ë³€í™”", "ì„±ì¥", "í†µì°°", "ì¬ìƒ"]
    },
    personalTypes: [
        {
            name: "ë„ì•½ì˜ í•´",
            icon: "ğŸš€",
            description: "ìƒˆë¡œìš´ ê¸°íšŒì™€ ì„±ì¥ì´ ê¸°ë‹¤ë¦¬ëŠ” í•œ í•´ì…ë‹ˆë‹¤. ì ê·¹ì ì¸ ë„ì „ ì •ì‹ ìœ¼ë¡œ ëª©í‘œë¥¼ í–¥í•´ ë‚˜ì•„ê°€ì„¸ìš”.",
            keywords: ["ë„ì „", "ì„±ì¥", "ê¸°íšŒ"],
            sectors: {
                career: "ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ë‚˜ ì§ì±…ì— ë„ì „í•  ê¸°íšŒê°€ ì°¾ì•„ì˜µë‹ˆë‹¤. ì ê·¹ì ì¸ ìì„¸ë¡œ ì„í•˜ë©´ í° ì„±ê³¼ë¥¼ ê±°ë‘˜ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                love: "ìƒˆë¡œìš´ ë§Œë‚¨ì´ë‚˜ ê´€ê³„ ë°œì „ì˜ ê¸°íšŒê°€ ë§ìŠµë‹ˆë‹¤. ì§„ì‹¬ì„ ë‹¤í•´ ì†Œí†µí•˜ë©´ ì¢‹ì€ ê²°ê³¼ê°€ ìˆì„ ê²ƒì…ë‹ˆë‹¤.",
                health: "í™œë™ì ì¸ ìƒí™œê³¼ ê·œì¹™ì ì¸ ìš´ë™ì´ ê±´ê°•ìš´ì„ ë†’ì—¬ì¤ë‹ˆë‹¤. ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ì— ì‹ ê²½ ì“°ì„¸ìš”.",
                money: "íˆ¬ìë‚˜ ì‚¬ì—…ì—ì„œ ì¢‹ì€ ê¸°íšŒê°€ ë³´ì…ë‹ˆë‹¤. ì‹ ì¤‘í•œ íŒë‹¨ê³¼ ì² ì €í•œ ì¤€ë¹„ê°€ í•„ìš”í•©ë‹ˆë‹¤."
            },
            luckyPeriods: "3ì›”, 6ì›”, 9ì›”",
            cautions: "ì„±ê¸‰í•œ ê²°ì •ì€ ê¸ˆë¬¼. ì¶©ë¶„í•œ ê²€í†  í›„ í–‰ë™í•˜ì„¸ìš”.",
            advice: "ë³€í™”ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ë§ê³  ìƒˆë¡œìš´ ë„ì „ì— ì ê·¹ì ìœ¼ë¡œ ë‚˜ì„œì„¸ìš”. ê¾¸ì¤€í•œ ë…¸ë ¥ì´ í° ê²°ì‹¤ì„ ë§ºì„ ê²ƒì…ë‹ˆë‹¤."
        },
        {
            name: "ì„±ì¥ì˜ í•´",
            icon: "ğŸŒ±",
            description: "ë°°ì›€ê³¼ ë°œì „ì— ì§‘ì¤‘í•˜ëŠ” í•œ í•´ì…ë‹ˆë‹¤. ìê¸°ê³„ë°œì— íˆ¬ìí•˜ë©´ í° ë³´ìƒì„ ë°›ê²Œ ë©ë‹ˆë‹¤.",
            keywords: ["í•™ìŠµ", "ë°œì „", "ìê¸°ê³„ë°œ"],
            sectors: {
                career: "ê¸°ìˆ  í–¥ìƒê³¼ ì „ë¬¸ì„± ê°œë°œì— ì§‘ì¤‘í•˜ë©´ ì¢‹ì€ í‰ê°€ë¥¼ ë°›ì„ ê²ƒì…ë‹ˆë‹¤. êµìœ¡ì´ë‚˜ ì—°ìˆ˜ ê¸°íšŒë¥¼ ë†“ì¹˜ì§€ ë§ˆì„¸ìš”.",
                love: "ì„œë¡œë¥¼ ì´í•´í•˜ê³  ì„±ì¥ì‹œí‚¤ëŠ” ê´€ê³„ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤. ê¹Šì´ ìˆëŠ” ëŒ€í™”ë¥¼ í†µí•´ ê´€ê³„ê°€ ë°œì „í•  ê²ƒì…ë‹ˆë‹¤.",
                health: "ëª¸ê³¼ ë§ˆìŒì˜ ê· í˜•ì„ ë§ì¶”ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ëª…ìƒì´ë‚˜ ìš”ê°€ ê°™ì€ í™œë™ì´ ë„ì›€ë©ë‹ˆë‹¤.",
                money: "ë‹¨ê¸° ì´ìµë³´ë‹¤ ì¥ê¸°ì  ê´€ì ì˜ íˆ¬ìê°€ ì¢‹ìŠµë‹ˆë‹¤. êµìœ¡ë¹„ ì§€ì¶œì€ ë¯¸ë˜ì˜ ìì‚°ì´ ë  ê²ƒì…ë‹ˆë‹¤."
            },
            luckyPeriods: "4ì›”, 7ì›”, 10ì›”",
            cautions: "ì¡°ê¸‰í•¨ë³´ë‹¤ëŠ” ê¾¸ì¤€í•¨ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.",
            advice: "ì§€ì‹ê³¼ ê¸°ìˆ  ìŠµë“ì— ì ê·¹ íˆ¬ìí•˜ì„¸ìš”. ì§€ê¸ˆì˜ ë…¸ë ¥ì´ ë¯¸ë˜ì˜ í° ìì‚°ì´ ë  ê²ƒì…ë‹ˆë‹¤."
        },
        {
            name: "ê´€ê³„ì˜ í•´",
            icon: "ğŸ¤",
            description: "ì¸ê°„ê´€ê³„ì—ì„œ ìƒˆë¡œìš´ ê¸°íšŒë¥¼ ë°œê²¬í•˜ëŠ” í•œ í•´ì…ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí‚¹ê³¼ ì†Œí†µì´ ì¤‘ìš”í•©ë‹ˆë‹¤.",
            keywords: ["ì¸ë§¥", "í˜‘ë ¥", "ì†Œí†µ"],
            sectors: {
                career: "ë™ë£Œë“¤ê³¼ì˜ í˜‘ë ¥ì´ ì„±ê³µì˜ ì—´ì‡ ì…ë‹ˆë‹¤. íŒ€ì›Œí¬ë¥¼ ì¤‘ì‹œí•˜ê³  ë¦¬ë”ì‹­ì„ ë°œíœ˜í•˜ì„¸ìš”.",
                love: "ì§„ì†”í•œ ë§ˆìŒìœ¼ë¡œ ë‹¤ê°€ê°€ë©´ ì¢‹ì€ ì¸ì—°ì„ ë§Œë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê¸°ì¡´ ê´€ê³„ë„ ë”ìš± ê¹Šì–´ì§ˆ ê²ƒì…ë‹ˆë‹¤.",
                health: "ìŠ¤íŠ¸ë ˆìŠ¤ í•´ì†Œë¥¼ ìœ„í•´ ê°€ì¡±ì´ë‚˜ ì¹œêµ¬ë“¤ê³¼ ì‹œê°„ì„ ë³´ë‚´ì„¸ìš”. ì‚¬íšŒì  í™œë™ì´ ê±´ê°•ì— ë„ì›€ë©ë‹ˆë‹¤.",
                money: "ì¸ë§¥ì„ í†µí•œ ìƒˆë¡œìš´ ìˆ˜ìµ ê¸°íšŒê°€ ìƒê¹ë‹ˆë‹¤. ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” íŒŒíŠ¸ë„ˆì™€ í•¨ê»˜í•˜ì„¸ìš”."
            },
            luckyPeriods: "2ì›”, 5ì›”, 8ì›”",
            cautions: "ë„ˆë¬´ ë§ì€ ì‚¬ëŒì„ ì‹ ë¢°í•˜ì§€ ë§ˆì„¸ìš”. ì§„ì§œ ì¹œêµ¬ë¥¼ êµ¬ë³„í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.",
            advice: "ì§„ì‹¬ì–´ë¦° ê´€ì‹¬ê³¼ ë°°ë ¤ë¡œ ì¸ê°„ê´€ê³„ë¥¼ ë„“í˜€ê°€ì„¸ìš”. ì¢‹ì€ ì¸ì—°ì´ ì¸ìƒì„ ë°”ê¿€ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
        },
        {
            name: "ì•ˆì •ì˜ í•´",
            icon: "ğŸ ",
            description: "ê¸°ë°˜ì„ ë‹¤ì§€ê³  ì•ˆì •ì„ ì¶”êµ¬í•˜ëŠ” í•œ í•´ì…ë‹ˆë‹¤. ì°¨ê·¼ì°¨ê·¼ ê³„íšì„ ì‹¤í–‰í•´ë‚˜ê°€ì„¸ìš”.",
            keywords: ["ì•ˆì •", "ê¸°ë°˜", "ê³„íš"],
            sectors: {
                career: "ê¸°ì¡´ ì—…ë¬´ì— ì¶©ì‹¤í•˜ë©° ì‹¤ë ¥ì„ ìŒ“ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. ì„±ì‹¤í•¨ì´ ì¸ì •ë°›ì„ ë•Œì…ë‹ˆë‹¤.",
                love: "ì•ˆì •ì ì¸ ê´€ê³„ ë°œì „ì— ì§‘ì¤‘í•˜ì„¸ìš”. ê²°í˜¼ì´ë‚˜ ë™ê±° ë“± êµ¬ì²´ì ì¸ ë¯¸ë˜ ê³„íšì„ ì„¸ì›Œë³´ì„¸ìš”.",
                health: "ê·œì¹™ì ì¸ ìƒí™œìŠµê´€ê³¼ ê¾¸ì¤€í•œ ê±´ê°•ê´€ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤. ì •ê¸°ê²€ì§„ë„ ìŠì§€ ë§ˆì„¸ìš”.",
                money: "ì €ì¶•ê³¼ ì•ˆì „í•œ íˆ¬ìì— ì§‘ì¤‘í•˜ì„¸ìš”. ë¬´ë¦¬í•œ íˆ¬ìë³´ë‹¤ëŠ” ì•ˆì •ì„±ì„ ì¤‘ì‹œí•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤."
            },
            luckyPeriods: "1ì›”, 6ì›”, 11ì›”",
            cautions: "ë³€í™”ì— ëŒ€í•œ ë‘ë ¤ì›€ì´ ê¸°íšŒë¥¼ ë†“ì¹˜ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
            advice: "ì•ˆì •ì„ ì¶”êµ¬í•˜ë˜ ì„±ì¥ì„ í¬ê¸°í•˜ì§€ ë§ˆì„¸ìš”. ë‹¨ê³„ì ìœ¼ë¡œ ëª©í‘œë¥¼ ë‹¬ì„±í•´ë‚˜ê°€ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤."
        },
        {
            name: "ì „í™˜ì˜ í•´",
            icon: "ğŸ”„",
            description: "ë³€í™”ë¥¼ ë°›ì•„ë“¤ì´ê³  ìƒˆë¡œìš´ ì‹œì‘ì„ ì¤€ë¹„í•˜ëŠ” í•œ í•´ì…ë‹ˆë‹¤. ìœ ì—°ì„±ì´ í•µì‹¬ì…ë‹ˆë‹¤.",
            keywords: ["ë³€í™”", "ì „í™˜", "ìƒˆì¶œë°œ"],
            sectors: {
                career: "ì§ì¥ ì´ì§ì´ë‚˜ ì—…ë¬´ ë³€í™”ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—´ë¦° ë§ˆìŒìœ¼ë¡œ ìƒˆë¡œìš´ í™˜ê²½ì— ì ì‘í•˜ì„¸ìš”.",
                love: "ê´€ê³„ì˜ ë³€í™”ë‚˜ ìƒˆë¡œìš´ ë§Œë‚¨ì´ ì˜ˆìƒë©ë‹ˆë‹¤. ê³¼ê±°ì— ì–½ë§¤ì´ì§€ ë§ê³  ì•ì„ ë³´ì„¸ìš”.",
                health: "ìƒí™œíŒ¨í„´ì˜ ë³€í™”ê°€ ê±´ê°•ì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì ì‘ ê¸°ê°„ ë™ì•ˆ ë”ìš± ì„¸ì‹¬í•œ ê´€ë¦¬ê°€ í•„ìš”í•©ë‹ˆë‹¤.",
                money: "ìˆ˜ì…ì›ì˜ ë³€í™”ë‚˜ ìƒˆë¡œìš´ íˆ¬ì ê¸°íšŒê°€ ìƒê¹ë‹ˆë‹¤. ë¦¬ìŠ¤í¬ ê´€ë¦¬ì— ì‹ ê²½ ì“°ì„¸ìš”."
            },
            luckyPeriods: "3ì›”, 7ì›”, 12ì›”",
            cautions: "ë„ˆë¬´ ë§ì€ ë³€í™”ë¥¼ í•œë²ˆì— ì‹œë„í•˜ì§€ ë§ˆì„¸ìš”.",
            advice: "ë³€í™”ëŠ” ê¸°íšŒì…ë‹ˆë‹¤. ë‘ë ¤ì›€ë³´ë‹¤ëŠ” ì„¤ë ˜ìœ¼ë¡œ ìƒˆë¡œìš´ ì‹œì‘ì„ ë§ì´í•˜ì„¸ìš”."
        },
        {
            name: "íœ´ì‹ì˜ í•´",
            icon: "ğŸ§˜",
            description: "ì¶©ì „ê³¼ íšŒë³µì— ì§‘ì¤‘í•˜ëŠ” í•œ í•´ì…ë‹ˆë‹¤. ë‚´ë©´ì„ ëŒì•„ë³´ê³  ì—ë„ˆì§€ë¥¼ ì¶•ì í•˜ì„¸ìš”.",
            keywords: ["íœ´ì‹", "ì¶©ì „", "íšŒë³µ"],
            sectors: {
                career: "ë¬´ë¦¬í•˜ì§€ ë§ê³  í˜„ì¬ ìƒí™©ì„ ìœ ì§€í•˜ë©° ì‹¤ë ¥ì„ ê¸°ë¥´ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ë²ˆì•„ì›ƒ ì£¼ì˜í•˜ì„¸ìš”.",
                love: "ì„œë‘ë¥´ì§€ ë§ê³  ìì—°ìŠ¤ëŸ¬ìš´ íë¦„ì„ ê¸°ë‹¤ë¦¬ì„¸ìš”. í˜¼ìë§Œì˜ ì‹œê°„ë„ ì†Œì¤‘íˆ ì—¬ê¸°ì„¸ìš”.",
                health: "ì¶©ë¶„í•œ íœ´ì‹ê³¼ ìˆ˜ë©´ì´ ê°€ì¥ ì¤‘ìš”í•©ë‹ˆë‹¤. ìŠ¤íŠ¸ë ˆìŠ¤ í•´ì†Œì™€ íë§ì— ì§‘ì¤‘í•˜ì„¸ìš”.",
                money: "ì§€ì¶œì„ ì¤„ì´ê³  ì €ì¶•ì— ì§‘ì¤‘í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤. í° íˆ¬ìëŠ” í”¼í•˜ê³  ì•ˆì •ì„±ì„ ìš°ì„ í•˜ì„¸ìš”."
            },
            luckyPeriods: "4ì›”, 8ì›”, 10ì›”",
            cautions: "ë„ˆë¬´ ì†Œê·¹ì ì´ ë˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”.",
            advice: "ì§€ê¸ˆì€ ì¶©ì „ì˜ ì‹œê¸°ì…ë‹ˆë‹¤. ëª¸ê³¼ ë§ˆìŒì„ ëŒë³´ë©° ë‹¤ìŒ ë„ì•½ì„ ì¤€ë¹„í•˜ì„¸ìš”."
        }
    ]
};

// ê°„ë‹¨í•œ ì˜¤í–‰ ë§¤í•‘
const GAN_WUXING = {
    'ç”²': 'æœ¨', 'ä¹™': 'æœ¨',
    'ä¸™': 'ç«', 'ä¸': 'ç«', 
    'æˆŠ': 'åœŸ', 'å·±': 'åœŸ',
    'åºš': 'é‡‘', 'è¾›': 'é‡‘',
    'å£¬': 'æ°´', 'ç™¸': 'æ°´'
};

// 2025ë…„ ì‹ ë…„ìš´ì„¸ ê³„ì‚° í•¨ìˆ˜ (ìˆ˜ì •ëœ ë²„ì „)
function calc2025Fortune(birthDate, name = '') {
    if (!birthDate) {
        return { idx: null, text: 'ìƒë…„ì›”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”.' };
    }
    
    try {
        // ìƒë…„ì›”ì¼ íŒŒì‹±
        const [year, month, day] = birthDate.split('-').map(Number);
        if (!year || !month || !day) {
            throw new Error('ì˜ëª»ëœ ë‚ ì§œ í˜•ì‹ì…ë‹ˆë‹¤.');
        }
        
        const currentAge = 2025 - year;
        
        // ìƒë…„ì›”ì¼ ìˆ«ì í•©ê³„ë¡œ ê¸°ë³¸ ì¸ë±ìŠ¤ ê³„ì‚°
        let baseIndex = (year + month + day + 2025) % YEAR_2025_DATA.personalTypes.length;
        
        // ì¶œìƒë…„ë„ ëìë¦¬ë¡œ ì¶”ê°€ ë³´ì •
        const yearLastDigit = year % 10;
        const finalIndex = (baseIndex + yearLastDigit) % YEAR_2025_DATA.personalTypes.length;
        
        const personalFortune = YEAR_2025_DATA.personalTypes[finalIndex];
        
        // ë‚˜ì´ëŒ€ë³„ íŠ¹ë³„ ì¡°ì–¸ ìƒì„±
        function getAgeSpecificAdvice(age) {
            if (age < 25) {
                return 'ì Šì€ ì—ë„ˆì§€ë¥¼ í™œìš©í•˜ì—¬ ë‹¤ì–‘í•œ ê²½í—˜ì„ ìŒ“ìœ¼ì„¸ìš”. ì‹¤íŒ¨ë¥¼ ë‘ë ¤ì›Œí•˜ì§€ ë§ê³  ì ê·¹ì ìœ¼ë¡œ ë„ì „í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. 2025ë…„ì€ ì¸ìƒì˜ ê¸°ë°˜ì„ ë‹¤ì§€ëŠ” ì†Œì¤‘í•œ ì‹œê¸°ì…ë‹ˆë‹¤.';
            } else if (age < 35) {
                return 'ê²½ë ¥ ë°œì „ê³¼ ì¸ìƒ ì„¤ê³„ê°€ ì¤‘ìš”í•œ ì‹œê¸°ì…ë‹ˆë‹¤. ì„ì‚¬ë…„ì˜ ì§€í˜œë¡œìš´ ì—ë„ˆì§€ë¥¼ í™œìš©í•´ ì¥ê¸°ì ì¸ ê³„íšì„ ì„¸ìš°ê³  ì‹¤í–‰í•´ë³´ì„¸ìš”. ì´ ì‹œê¸°ì˜ ì„ íƒì´ í–¥í›„ 10ë…„ì„ ì¢Œìš°í•©ë‹ˆë‹¤.';
            } else if (age < 50) {
                return 'ê²½í—˜ê³¼ ì²´ë ¥ì´ ì¡°í™”ë¥¼ ì´ë£¨ëŠ” í™©ê¸ˆê¸°ì…ë‹ˆë‹¤. ë¦¬ë”ì‹­ì„ ë°œíœ˜í•˜ê³  í›„ë°°ë“¤ì„ ì´ëŒì–´ê°€ë©° ìì‹ ë§Œì˜ ì „ë¬¸ ì˜ì—­ì„ êµ¬ì¶•í•˜ì„¸ìš”. ì•ˆì •ê³¼ ë„ì „ì˜ ê· í˜•ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.';
            } else if (age < 65) {
                return 'í’ë¶€í•œ ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ ì§€í˜œë¡œìš´ íŒë‹¨ì„ í•˜ëŠ” ì‹œê¸°ì…ë‹ˆë‹¤. ì¶•ì ëœ ì§€ì‹ê³¼ ì¸ë§¥ì„ í™œìš©í•´ ìƒˆë¡œìš´ ê°€ì¹˜ë¥¼ ì°½ì¶œí•˜ê³ , ì‚¬íšŒì— ê¸°ì—¬í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì°¾ì•„ë³´ì„¸ìš”.';
            } else {
                return 'ì¸ìƒì˜ ì—¬ìœ ì™€ ê¹Šì´ë¥¼ ë§Œë½í•  ì‹œê¸°ì…ë‹ˆë‹¤. ê·¸ë™ì•ˆì˜ ê²½í—˜ì„ í›„ì„¸ì— ì „í•˜ê³ , ì§„ì •í•œ í–‰ë³µê³¼ ë§Œì¡±ì„ ì¶”êµ¬í•˜ëŠ”ë° ì§‘ì¤‘í•˜ì„¸ìš”. ê±´ê°•ê´€ë¦¬ê°€ ê°€ì¥ ì¤‘ìš”í•©ë‹ˆë‹¤.';
            }
        }
        
        return {
            idx: finalIndex,
            yearInfo: YEAR_2025_DATA.yearInfo,
            personalFortune: personalFortune,
            ageAdvice: getAgeSpecificAdvice(currentAge),
            birthYear: year,
            currentAge: currentAge,
            name: name
        };
        
    } catch (error) {
        console.error('ì‹ ë…„ìš´ì„¸ ê³„ì‚° ì˜¤ë¥˜:', error);
        // ì˜¤ë¥˜ ì‹œ ê¸°ë³¸ ê²°ê³¼ ë°˜í™˜
        const [y, m, d] = birthDate.split('-').map(Number);
        const k = (y + m + d + 2025) % 6;
        const basicTypes = [
            'ë„ì•½ì˜ í•´: ìƒˆë¡œìš´ ê¸°íšŒì™€ ì„±ì¥ì´ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.',
            'ì„±ì¥ì˜ í•´: ë°°ì›€ì— íˆ¬ìí• ìˆ˜ë¡ í° ë³´ìƒì´ ë”°ë¦…ë‹ˆë‹¤.',
            'ê´€ê³„ì˜ í•´: ì¸ê°„ê´€ê³„ì—ì„œ ìƒˆë¡œìš´ ê¸°íšŒë¥¼ ë°œê²¬í•˜ì„¸ìš”.',
            'ì•ˆì •ì˜ í•´: ê¸°ë°˜ì„ ë‹¤ì§€ê³  ì¬ì •ê´€ë¦¬ì— ì§‘ì¤‘í•˜ì„¸ìš”.',
            'ì „í™˜ì˜ í•´: ë³€í™”ë¥¼ ë°›ì•„ë“¤ì´ê³  ìƒˆë¡œìš´ ì‹œì‘ì„ ì¤€ë¹„í•˜ì„¸ìš”.',
            'íœ´ì‹ì˜ í•´: ê±´ê°•ê´€ë¦¬ì™€ ì—ë„ˆì§€ ì¶©ì „ì— ì§‘ì¤‘í•˜ì„¸ìš”.'
        ];
        return {
            idx: k,
            text: basicTypes[k]
        };
    }
}

// ì‹ ë…„ìš´ì„¸ HTML ìƒì„± í•¨ìˆ˜
function create2025FortuneHTML(result, name) {
    const nameTitle = name ? `${name}ë‹˜ì˜ ` : '';
    
    if (!result.personalFortune) {
        // í´ë°± ëª¨ë“œ
        return `<div class="result-section">
            <div class="section-title-result">ğŸ ${nameTitle}2025ë…„ ì„ì‚¬ë…„ ìš´ì„¸</div>
            <div class="result-card main-result">
                <div class="card-value">${result.text}</div>
            </div>
        </div>`;
    }
    
    const { yearInfo, personalFortune, ageAdvice } = result;
    
    return `
        <div class="result-section">
            <div class="section-title-result">ğŸ ${nameTitle}2025ë…„ ì„ì‚¬ë…„ ìš´ì„¸</div>
            
            <div class="year-overview-card">
                <div class="year-character">
                    <div class="year-element">${yearInfo.element}</div>
                    <div class="year-desc">${yearInfo.description}</div>
                    <div class="year-keywords">
                        ${yearInfo.keywords.map(keyword => `<span class="keyword-tag">${keyword}</span>`).join('')}
                    </div>
                </div>
            </div>
        </div>
        
        <div class="result-section">
            <div class="section-title-result">${personalFortune.icon} ${nameTitle}ê°œì¸ ìš´ì„¸</div>
            
            <div class="result-card main-result">
                <div class="card-header">
                    <div class="card-icon">${personalFortune.icon}</div>
                    <div class="card-title">${personalFortune.name}</div>
                </div>
                <div class="card-description">${personalFortune.description}</div>
            </div>
        </div>
        
        <div class="result-section">
            <div class="section-title-result">ğŸ“Š ë¶„ì•¼ë³„ 2025ë…„ ìš´ì„¸</div>
            
            <div class="result-card">
                <div class="card-header">
                    <div class="card-icon">ğŸ’¼</div>
                    <div class="card-title">ì§ì¥ìš´</div>
                </div>
                <div class="card-description">${personalFortune.sectors.career}</div>
            </div>
            
            <div class="result-card">
                <div class="card-header">
                    <div class="card-icon">ğŸ’•</div>
                    <div class="card-title">ì—°ì• ìš´</div>
                </div>
                <div class="card-description">${personalFortune.sectors.love}</div>
            </div>
            
            <div class="result-card">
                <div class="card-header">
                    <div class="card-icon">ğŸ’ª</div>
                    <div class="card-title">ê±´ê°•ìš´</div>
                </div>
                <div class="card-description">${personalFortune.sectors.health}</div>
            </div>
            
            <div class="result-card">
                <div class="card-header">
                    <div class="card-icon">ğŸ’°</div>
                    <div class="card-title">ì¬ë¬¼ìš´</div>
                </div>
                <div class="card-description">${personalFortune.sectors.money}</div>
            </div>
        </div>
        
        <div class="result-section">
            <div class="section-title-result">ğŸ“… 2025ë…„ ì£¼ìš” ì‹œê¸°</div>
            
            <div class="timeline-card">
                <div class="timeline-item">
                    <div class="timeline-icon">ğŸ€</div>
                    <div class="timeline-content">
                        <div class="timeline-title">íŠ¹íˆ ì¢‹ì€ ë‹¬</div>
                        <div class="timeline-desc">${personalFortune.luckyPeriods}</div>
                    </div>
                </div>
                <div class="timeline-item caution">
                    <div class="timeline-icon">âš ï¸</div>
                    <div class="timeline-content">
                        <div class="timeline-title">ì£¼ì˜í•  ì </div>
                        <div class="timeline-desc">${personalFortune.cautions}</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="result-section">
            <div class="section-title-result">ğŸ¯ ${result.currentAge}ì„¸ ë§ì¶¤ ì¡°ì–¸</div>
            <div class="result-card">
                <div class="card-header">
                    <div class="card-icon">ğŸ§­</div>
                    <div class="card-title">ì¸ìƒ ë‹¨ê³„ë³„ ê°€ì´ë“œ</div>
                </div>
                <div class="card-description">${ageAdvice}</div>
            </div>
        </div>
        
        <div class="result-section">
            <div class="section-title-result">ğŸ’¡ 2025ë…„ í•µì‹¬ ì‹¤ì²œ ì¡°ì–¸</div>
            <div class="result-card">
                <div class="card-header">
                    <div class="card-icon">â­</div>
                    <div class="card-title">ì„±ê³µì˜ ì—´ì‡ </div>
                </div>
                <div class="card-description">${personalFortune.advice}</div>
            </div>
        </div>
        
        <div class="info-box">
            <div class="info-title">ğŸ“ 2025ë…„ ì‹¤ì²œ ì²´í¬ë¦¬ìŠ¤íŠ¸</div>
            <div class="info-content">
                <strong>í•µì‹¬ í…Œë§ˆ:</strong> ${personalFortune.name}<br/>
                <strong>ì£¼ìš” í‚¤ì›Œë“œ:</strong> ${personalFortune.keywords.join(', ')}<br/>
                <strong>ì‹¤ì²œ í¬ì¸íŠ¸:</strong> ${personalFortune.advice}
            </div>
        </div>
    `;
}

// ì‹ ë…„ìš´ì„¸ ë²„íŠ¼ ì´ë²¤íŠ¸
setTimeout(() => {
    const btn = document.getElementById('btnYear');
    if (btn) {
        btn.addEventListener('click', () => {
            const birthDate = document.getElementById('year-birth').value;
            const name = document.getElementById('year-name')?.value?.trim() || '';
            
            if (!birthDate) {
                alert('ìƒë…„ì›”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”.');
                return;
            }
            
            const result = calc2025Fortune(birthDate, name);
            const html = create2025FortuneHTML(result, name);
            
            // openSheet í•¨ìˆ˜ê°€ ìˆë‹¤ê³  ê°€ì •
            if (typeof openSheet === 'function') {
                openSheet('2025ë…„ ìƒì„¸ ì‹ ë…„ìš´ì„¸', html, {
                    type: 'enhanced-year',
                    birthDate, name, result
                });
            } else {
                console.log('ê²°ê³¼ HTML:', html);
                // ê²°ê³¼ë¥¼ í‘œì‹œí•  ë‹¤ë¥¸ ë°©ë²•ì´ í•„ìš”í•¨
            }
        });
    } else {
        console.error('btnYear ë²„íŠ¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
    }
}, 1000); // 3ì´ˆì—ì„œ 1ì´ˆë¡œ ì¤„ì„
